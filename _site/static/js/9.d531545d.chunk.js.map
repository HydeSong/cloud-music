{"version":3,"sources":["components/list/music.png","components/slider/style.js","components/slider/index.js","components/list/style.js","components/list/index.js","application/Recommend/style.js","application/Recommend/index.js","api/utils.js","baseUI/loading/index.js","baseUI/loading-v2/index.js","baseUI/scroll/index.js"],"names":["module","exports","SliderContainer","styled","div","_templateObject","_taggedTemplateLiteral","style","React","memo","props","_useState","useState","_useState2","_slicedToArray","sliderSwiper","setSliderSwiper","bannerList","useEffect","length","Swiper","loop","autoplay","delay","disableOnInteraction","pagination","el","createElement","className","map","slider","key","imageUrl","pic","src","width","height","alt","ListWrapper","List","_templateObject2","ListItem","_templateObject3","withRouter","recommendList","item","index","id","onClick","history","push","concat","LazyLoad","placeholder","require","picUrl","getCount","playCount","name","Content","connect","state","getIn","enterLoading","dispatch","getBannerDataDispatch","actionTypes","getRecommendListDataDispatch","size","bannerListJS","toJS","recommendListJS","Scroll","onScroll","forceCheck","Slider","RecommendList","Loading","renderRoutes","route","routes","count","Math","floor","debounce","func","timer","_this","_len","arguments","args","Array","_key","clearTimeout","setTimeout","apply","filterIndex","rankList","i","tracks","getName","list","str","isEmptyObject","obj","Object","keys","loading","keyframes","LoadingWrapper","show","display","defaultProps","dance","ScrollContainer","PullUpLoading","PullDownLoading","forwardRef","ref","bScroll","setBScroll","scrollContaninerRef","useRef","direction","click","refresh","bounceTop","bounceBottom","pullUp","pullDown","pullUpLoading","pullDownLoading","pullUpDebounce","useMemo","pullDownDebounce","scroll","BScroll","current","scrollX","scrollY","probeType","bounce","top","bottom","on","off","y","maxScrollY","pos","useImperativeHandle","scrollTo","getBScroll","PullUpdisplayStyle","PullDowndisplayStyle","children","LoadingV2"],"mappings":"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","file":"static/js/9.d531545d.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/music.64444b39.png\";","import styled from 'styled-components';\r\nimport style from '../../assets/global-style';\r\n\r\nexport const SliderContainer = styled.div`\r\n  position: relative;\r\n  box-sizing: border-box;\r\n  width: 100%;\r\n  height: 100%;\r\n  margin: auto;\r\n  background: white;\r\n  .before {\r\n    position: absolute;\r\n    top: -300px;\r\n    height: 400px;\r\n    width: 100%;\r\n    background: ${style[\"theme-color\"]};\r\n  }\r\n  .slider-container {\r\n    position: relative;\r\n    width: 98%;\r\n    height: 160px;\r\n    overflow: hidden;\r\n    margin: auto;\r\n    border-radius: 6px;\r\n    .slider-nav {\r\n      position: absolute;\r\n      display: block;\r\n      width: 100%;\r\n      height: 100%;\r\n    }\r\n    .swiper-pagination-bullet-active {\r\n      background: ${style['theme-color']};\r\n    }\r\n  }\r\n`;\r\n","import React, {useEffect, useState} from 'react';\r\nimport {SliderContainer} from './style';\r\nimport 'swiper/css/swiper.css';\r\nimport Swiper from 'swiper';\r\n\r\nfunction Slider (props) {\r\n  const [sliderSwiper, setSliderSwiper] = useState (null);\r\n  const {bannerList} = props;\r\n\r\n  useEffect (\r\n    () => {\r\n      if (bannerList.length && !sliderSwiper) {\r\n        let sliderSwiper = new Swiper ('.slider-container', {\r\n          loop: true,\r\n          autoplay: {\r\n            delay: 3000,\r\n            disableOnInteraction: false,\r\n          },\r\n          pagination: {el: '.swiper-pagination'},\r\n        });\r\n        setSliderSwiper (sliderSwiper);\r\n      }\r\n    },\r\n    [bannerList.length, sliderSwiper]\r\n  );\r\n\r\n  return (\r\n    <SliderContainer>\r\n      <div className=\"before\" />\r\n      <div className=\"slider-container\">\r\n        <div className=\"swiper-wrapper\">\r\n          {bannerList.map (slider => {\r\n            return (\r\n              <div className=\"swiper-slide\" key={slider.imageUrl || slider.pic}>\r\n                <div className=\"slider-nav\">\r\n                  <img\r\n                    src={slider.imageUrl || slider.pic}\r\n                    width=\"100%\"\r\n                    height=\"100%\"\r\n                    alt=\"推荐\"\r\n                  />\r\n                </div>\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n        <div className=\"swiper-pagination\" />\r\n      </div>\r\n    </SliderContainer>\r\n  );\r\n}\r\n\r\nexport default React.memo (Slider);\r\n","import styled from 'styled-components';\r\nimport style from '../../assets/global-style';\r\n\r\nexport const ListWrapper = styled.div`\r\n  max-width: 100%;\r\n  .title {\r\n    font-weight: 700;\r\n    padding-left: 6px;\r\n    font-size: 14px;\r\n    line-height: 60px;\r\n  }\r\n`;\r\nexport const List = styled.div`\r\n  width: 100%;\r\n  display: flex;\r\n  flex-direction: row;\r\n  flex-wrap: wrap;\r\n  justify-content: space-around;\r\n`;\r\n\r\nexport const ListItem = styled.div`\r\n  position: relative;\r\n  width: 32%;\r\n\r\n  .img_wrapper {\r\n    .decorate {\r\n      position: absolute;\r\n      top: 0;\r\n      width: 100%;\r\n      height: 35px;\r\n      border-radius: 3px;\r\n      background: linear-gradient(hsla(0,0%,43%,.4),hsla(0,0%,100%,0));\r\n    }\r\n    position: relative;\r\n    height: 0;\r\n    padding-bottom: 100%;\r\n    .play_count {\r\n      position: absolute;\r\n      right: 2px;\r\n      top: 2px;\r\n      font-size: ${style['font-size-s']};\r\n      line-height: 15px;\r\n      color: ${style['font-color-light']};\r\n      .play {\r\n        vertical-align: top;\r\n      }\r\n    }\r\n    img {\r\n      position: absolute;\r\n      width: 100%;\r\n      height: 100%;\r\n      border-radius: 3px;\r\n    }\r\n  }\r\n  .desc {\r\n      overflow: hidden;\r\n      margin-top: 2px;\r\n      padding: 0 2px;\r\n      height: 50px;\r\n      text-align: left;\r\n      font-size: ${style['font-size-s']};\r\n      line-height: 1.4;\r\n      color: ${style['font-color-desc']};\r\n    }\r\n`;\r\n","import React from 'react';\r\nimport LazyLoad from 'react-lazyload';\r\nimport {ListWrapper, ListItem, List} from './style';\r\nimport {getCount} from '../../api/utils';\r\nimport {withRouter} from 'react-router-dom';\r\n\r\nfunction RecommendList (props) {\r\n  const enterDetail = id => {\r\n    props.history.push (`/recommend/${id}`);\r\n  };\r\n\r\n  return (\r\n    <ListWrapper>\r\n      <h1 className=\"title\"> 推荐歌单 </h1>\r\n      <List>\r\n        {props.recommendList.map ((item, index) => {\r\n          return (\r\n            <ListItem key={item.id + index} onClick={() => enterDetail (item.id)}>\r\n              <div className=\"img_wrapper\">\r\n                <div className=\"decorate\" />\r\n                {/* 加此参数可以减小请求的图片资源大小 */}\r\n                <LazyLoad\r\n                  placeholder={\r\n                    <img width=\"100%\" height=\"100%\" src={require ('./music.png')} alt=\"music\" />\r\n                  }\r\n                >\r\n                  <img\r\n                    src={item.picUrl + '?param=300x300'}\r\n                    width=\"100%\"\r\n                    height=\"100%\"\r\n                    alt=\"music\"\r\n                  />\r\n                </LazyLoad>;\r\n\r\n                <div className=\"play_count\">\r\n                  <i className=\"iconfont play\">&#xe885;</i>\r\n                  <span className=\"count\">{getCount (item.playCount)}</span>\r\n                </div>\r\n              </div>\r\n              <div className=\"desc\">{item.name}</div>\r\n            </ListItem>\r\n          );\r\n        })}\r\n      </List>\r\n    </ListWrapper>\r\n  );\r\n}\r\n\r\nexport default React.memo (withRouter (RecommendList));\r\n","import styled from 'styled-components';\r\n\r\nexport const Content = styled.div`\r\n  position: fixed;\r\n  top: 90px;\r\n  bottom: 0;\r\n  width: 100%;\r\n`;\r\n","import React, { useEffect } from 'react';\r\nimport Slider from '../../components/slider';\r\nimport RecommendList from '../../components/list';\r\nimport Scroll from '../../baseUI/scroll/index';\r\nimport Loading from '../../baseUI/loading/index';\r\nimport {Content} from './style';\r\nimport {connect} from 'react-redux';\r\nimport * as actionTypes from './store/actionCreators';\r\nimport {forceCheck} from 'react-lazyload';\r\nimport {renderRoutes} from 'react-router-config';\r\n\r\nfunction Recommend (props) {\r\n  const {bannerList, recommendList, enterLoading} = props;\r\n  const {getBannerDataDispatch, getRecommendListDataDispatch} = props;\r\n\r\n  useEffect (() => {\r\n    if (!bannerList.size) {\r\n      getBannerDataDispatch ();\r\n    }\r\n    if (!recommendList.size) {\r\n      getRecommendListDataDispatch ();\r\n    }\r\n    //eslint-disable-next-line\r\n  }, []);\r\n\r\n  const bannerListJS = bannerList ? bannerList.toJS () : [];\r\n  const recommendListJS = recommendList ? recommendList.toJS () : [];\r\n\r\n  return (\r\n    <Content>\r\n      <Scroll onScroll={forceCheck}>\r\n        <div>\r\n          <Slider bannerList={bannerListJS} />\r\n          <RecommendList recommendList={recommendListJS} />\r\n        </div>\r\n      </Scroll>\r\n      { enterLoading ? <Loading /> : null }\r\n      { renderRoutes (props.route.routes) }\r\n    </Content>\r\n  );\r\n}\r\n\r\n// 映射 Redux 全局的 state 到组件的 props 上\r\nconst mapStateToProps = state => ({\r\n  // 不要在这里将数据 toJS\r\n  // 不然每次 diff 比对 props 的时候都是不一样的引用，还是导致不必要的重渲染，属于滥用 immutable\r\n  bannerList: state.getIn (['recommend', 'bannerList']),\r\n  recommendList: state.getIn (['recommend', 'recommendList']),\r\n  enterLoading: state.getIn (['recommend', 'enterLoading'])\r\n});\r\n// 映射 dispatch 到 props 上\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    getBannerDataDispatch () {\r\n      dispatch (actionTypes.getBannerList ());\r\n    },\r\n    getRecommendListDataDispatch () {\r\n      dispatch (actionTypes.getRecommendList ());\r\n    },\r\n  };\r\n};\r\n\r\nexport default connect (mapStateToProps, mapDispatchToProps) (\r\n  React.memo (Recommend)\r\n);\r\n\r\n","import {RankTypes} from './config';\r\n\r\nexport const getCount = count => {\r\n  if (count < 0) return;\r\n  if (count < 10000) {\r\n    return count;\r\n  } else if (Math.floor (count / 10000) < 10000) {\r\n    return Math.floor (count / 1000) / 10 + '万';\r\n  } else {\r\n    return Math.floor (count / 10000000) / 10 + '亿';\r\n  }\r\n};\r\n\r\nexport const debounce = (func, delay) => {\r\n  let timer;\r\n  return function (...args) {\r\n    if (timer) {\r\n      clearTimeout (timer);\r\n    }\r\n    timer = setTimeout (() => {\r\n      func.apply (this, args);\r\n      clearTimeout (timer);\r\n    }, delay);\r\n  };\r\n};\r\n\r\n// 处理数据，找出第一个没有歌名的排行榜的索引\r\nexport const filterIndex = rankList => {\r\n  for (let i = 0; i < rankList.length - 1; i++) {\r\n    if (rankList[i].tracks.length && !rankList[i + 1].tracks.length) {\r\n      return i + 1;\r\n    }\r\n  }\r\n};\r\n\r\n//找出排行榜的编号\r\nexport const filterIdx = name => {\r\n  for (var key in RankTypes) {\r\n    if (RankTypes[key] === name) return key;\r\n  }\r\n  return null;\r\n};\r\n\r\n// 处理歌手列表拼接歌手名字\r\nexport const getName = list => {\r\n  let str = '';\r\n  list.map ((item, index) => {\r\n    str += index === 0 ? item.name : '/' + item.name;\r\n    return item;\r\n  });\r\n  return str;\r\n};\r\n\r\n//判断一个对象是否为空\r\nexport const isEmptyObject = obj => !obj || Object.keys (obj).length === 0;\r\n","import React from 'react';\r\nimport styled, {keyframes} from 'styled-components';\r\nimport style from '../../assets/global-style';\r\nimport {PropTypes} from 'prop-types';\r\n\r\nconst loading = keyframes`\r\n  0%, 100% {\r\n    transform: scale(0.0);\r\n  }\r\n  50% {\r\n    transform: scale(1.0);\r\n  }\r\n`;\r\nconst LoadingWrapper = styled.div`\r\n  >div {\r\n    position: absolute;\r\n    left: 0; \r\n    right: 0;  \r\n    top: 0;\r\n    bottom: 0;\r\n    margin: auto;\r\n    width: 60px;\r\n    height: 60px;\r\n    opacity: 0.6;\r\n    border-radius: 50%;\r\n    background-color: ${style['theme-color']};\r\n    animation: ${loading} 1.4s infinite ease-in;\r\n  }\r\n  >div:nth-child(2) {\r\n    animation-delay: -0.7s;\r\n  }\r\n`;\r\n\r\nfunction Loading (props) {\r\n  const {show} = props;\r\n  return (\r\n    <LoadingWrapper style={show ? {display: ''} : {display: 'none'}}>\r\n      <div />\r\n      <div />\r\n    </LoadingWrapper>\r\n  );\r\n}\r\n\r\nLoading.defaultProps = {\r\n  show: true,\r\n};\r\n\r\nLoading.propTypes = {\r\n  show: PropTypes.bool,\r\n};\r\n\r\nexport default React.memo (Loading);\r\n","import React from 'react';\r\nimport styled, {keyframes} from 'styled-components';\r\nimport style from '../../assets/global-style';\r\n\r\nconst dance = keyframes`\r\n    0%, 40%, 100%{\r\n      transform: scaleY(0.4);\r\n      transform-origin: center 100%;\r\n    }\r\n    20%{\r\n      transform: scaleY(1);\r\n    }\r\n`;\r\nconst Loading = styled.div`\r\n    height: 10px;\r\n    width: 100%;\r\n    margin: auto;\r\n    text-align: center;\r\n    font-size: 10px;\r\n    >div{\r\n      display: inline-block;\r\n      background-color: ${style['theme-color']};\r\n      height: 100%;\r\n      width: 1px;\r\n      margin-right:2px;\r\n      animation: ${dance} 1s infinite;\r\n    }\r\n    >div:nth-child(2) {\r\n      animation-delay: -0.4s;\r\n    }\r\n    >div:nth-child(3) {\r\n      animation-delay: -0.6s;\r\n    }\r\n    >div:nth-child(4) {\r\n      animation-delay: -0.5s;\r\n    }\r\n    >div:nth-child(5) {\r\n      animation-delay: -0.2s;\r\n    } \r\n`;\r\n\r\nfunction LoadingV2 () {\r\n  return (\r\n    <Loading>\r\n      <div />\r\n      <div />\r\n      <div />\r\n      <div />\r\n      <div />\r\n      <span>拼命加载中...</span>\r\n    </Loading>\r\n  );\r\n}\r\n\r\nexport default React.memo (LoadingV2);\r\n","import React, {\r\n  forwardRef,\r\n  useState,\r\n  useEffect,\r\n  useRef,\r\n  useImperativeHandle,\r\n  useMemo,\r\n} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport BScroll from 'better-scroll';\r\nimport styled from 'styled-components';\r\nimport Loading from '../loading';\r\nimport {debounce} from '../../api/utils';\r\nimport LoadingV2 from '../loading-v2';\r\n\r\nconst ScrollContainer = styled.div`\r\n  width: 100%;\r\n  height: 100%;\r\n  overflow: hidden;\r\n`;\r\n\r\nconst PullUpLoading = styled.div`\r\n  position: absolute;\r\n  left:0; right:0;\r\n  bottom: 5px;\r\n  width: 60px;\r\n  height: 60px;\r\n  margin: auto;\r\n  z-index: 100;\r\n`;\r\n\r\nexport const PullDownLoading = styled.div`\r\n  position: absolute;\r\n  left:0; right:0;\r\n  top: 0px;\r\n  height: 30px;\r\n  margin: auto;\r\n  z-index: 100;\r\n`;\r\n\r\nconst Scroll = forwardRef ((props, ref) => {\r\n  const [bScroll, setBScroll] = useState ();\r\n\r\n  const scrollContaninerRef = useRef ();\r\n\r\n  const {direction, click, refresh, bounceTop, bounceBottom} = props;\r\n\r\n  const {pullUp, pullDown, onScroll, pullUpLoading, pullDownLoading} = props;\r\n\r\n  let pullUpDebounce = useMemo (\r\n    () => {\r\n      return debounce (pullUp, 300);\r\n    },\r\n    [pullUp]\r\n  );\r\n\r\n  let pullDownDebounce = useMemo (\r\n    () => {\r\n      return debounce (pullDown, 300);\r\n    },\r\n    [pullDown]\r\n  );\r\n\r\n  useEffect (() => {\r\n    const scroll = new BScroll (scrollContaninerRef.current, {\r\n      scrollX: direction === 'horizental',\r\n      scrollY: direction === 'vertical',\r\n      probeType: 3,\r\n      click: click,\r\n      bounce: {\r\n        top: bounceTop,\r\n        bottom: bounceBottom,\r\n      },\r\n    });\r\n    setBScroll (scroll);\r\n    return () => {\r\n      setBScroll (null);\r\n    };\r\n    // eslint-disable-next-line\r\n  }, []);\r\n\r\n  useEffect (\r\n    () => {\r\n      if (!bScroll || !onScroll) return;\r\n      bScroll.on ('scroll', scroll => {\r\n        onScroll (scroll);\r\n      });\r\n      return () => {\r\n        bScroll.off ('scroll');\r\n      };\r\n    },\r\n    [onScroll, bScroll]\r\n  );\r\n\r\n  useEffect (\r\n    () => {\r\n      if (!bScroll || !pullUp) return;\r\n      bScroll.on ('scrollEnd', () => {\r\n        //判断是否滑动到了底部\r\n        if (bScroll.y <= bScroll.maxScrollY + 100) {\r\n          pullUpDebounce ();\r\n        }\r\n      });\r\n      return () => {\r\n        bScroll.off ('scrollEnd');\r\n      };\r\n    },\r\n    [pullUpDebounce, pullUp, bScroll]\r\n  );\r\n\r\n  useEffect (\r\n    () => {\r\n      if (!bScroll || !pullDown) return;\r\n      bScroll.on ('touchEnd', pos => {\r\n        //判断用户的下拉动作\r\n        if (pos.y > 50) {\r\n          pullDownDebounce ();\r\n        }\r\n      });\r\n      return () => {\r\n        bScroll.off ('touchEnd');\r\n      };\r\n    },\r\n    [pullDownDebounce, pullDown, bScroll]\r\n  );\r\n\r\n  useEffect (() => {\r\n    if (refresh && bScroll) {\r\n      bScroll.refresh ();\r\n    }\r\n  });\r\n\r\n  useImperativeHandle (ref, () => ({\r\n    refresh () {\r\n      if (bScroll) {\r\n        bScroll.refresh ();\r\n        bScroll.scrollTo (0, 0);\r\n      }\r\n    },\r\n    getBScroll () {\r\n      if (bScroll) {\r\n        return bScroll;\r\n      }\r\n    },\r\n  }));\r\n\r\n  const PullUpdisplayStyle = pullUpLoading ? {display: ''} : {display: 'none'};\r\n  const PullDowndisplayStyle = pullDownLoading ? {display: ''} : {display: 'none'};\r\n  return (\r\n    <ScrollContainer ref={scrollContaninerRef}>\r\n      {props.children}\r\n      {/* 滑到底部加载动画 */}\r\n      <PullUpLoading style={PullUpdisplayStyle}><Loading /></PullUpLoading>\r\n      {/* 顶部下拉刷新动画 */}\r\n      <PullDownLoading style={PullDowndisplayStyle}>\r\n        <LoadingV2 />\r\n      </PullDownLoading>\r\n    </ScrollContainer>\r\n  );\r\n});\r\n\r\nScroll.defaultProps = {\r\n  direction: 'vertical',\r\n  click: true,\r\n  refresh: true,\r\n  onScroll: null,\r\n  pullUpLoading: false,\r\n  pullDownLoading: false,\r\n  pullUp: null,\r\n  pullDown: null,\r\n  bounceTop: true,\r\n  bounceBottom: true,\r\n};\r\n\r\nScroll.propTypes = {\r\n  direction: PropTypes.oneOf (['vertical', 'horizental']),\r\n  refresh: PropTypes.bool,\r\n  onScroll: PropTypes.func,\r\n  pullUp: PropTypes.func,\r\n  pullDown: PropTypes.func,\r\n  pullUpLoading: PropTypes.bool,\r\n  pullDownLoading: PropTypes.bool,\r\n  bounceTop: PropTypes.bool, //是否支持向上吸顶\r\n  bounceBottom: PropTypes.bool, //是否支持向上吸顶\r\n};\r\n\r\nexport default Scroll;\r\n"],"sourceRoot":""}