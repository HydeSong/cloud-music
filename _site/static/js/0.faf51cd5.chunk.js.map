{"version":3,"sources":["../node_modules/better-scroll/dist/better-scroll.esm.js"],"names":["_extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","__extends","__","this","constructor","create","_assign","assign","t","s","i","n","arguments","length","apply","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","__generator","body","f","y","g","_","label","sent","trys","ops","verb","Symbol","iterator","v","op","TypeError","pop","push","__spreadArrays","il","r","k","a","j","jl","propertiesConfig$7","sourceKey","key","warn","msg","console","error","assert","condition","Error","inBrowser","window","ua","navigator","userAgent","toLowerCase","isWeChatDevTools","test","isAndroid","indexOf","isIOSBadVersion","matches","exec","parts","split","map","item","parseInt","supportsPassive","opts","defineProperty","get","addEventListener","getNow","performance","now","timing","navigationStart","Date","extend","target","source","isUndef","undefined","between","x","min","max","findIndex","ary","fn","index","some","ret","elementStyle","document","createElement","style","vendor","_i","transformNames_1","obj","prefixStyle","charAt","toUpperCase","substr","getElement","el","querySelector","addEvent","type","capture","useCapture","passive","removeEvent","removeEventListener","maybePrevent","cancelable","preventDefault","offset","left","top","offsetLeft","offsetTop","offsetParent","cssVendor","transform","transition","hasPerspective","hasTouch","hasTransition","transitionTimingFunction","transitionDuration","transitionDelay","transformOrigin","transitionEnd","transitionProperty","eventTypeMap","touchstart","touchmove","touchend","touchcancel","mousedown","mousemove","mouseup","getRect","SVGElement","rect","getBoundingClientRect","width","height","offsetWidth","offsetHeight","preventDefaultExceptionFn","exceptions","tagExceptionFn","click","event","eventSource","changedTouches","ev","posSrc","screenX","screenY","clientX","clientY","pressedKeysMap","ctrlKey","shiftKey","altKey","metaKey","MouseEvent","bubbles","createEvent","initEvent","forwardedTouchEvent","_constructed","dispatchEvent","hasClass","className","RegExp","ease","swipe","swipeBounce","bounce","windowCompat","noop$1","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","callback","setTimeout","interval","cancelAnimationFrame","webkitCancelAnimationFrame","mozCancelAnimationFrame","oCancelAnimationFrame","id","clearTimeout","noop","val","sharedPropertyDefinition","enumerable","configurable","set","EventEmitter","names","events","eventTypes","registerType","on","context","hasType","once","_this","magic","args","off","count","splice","trigger","len","eventsCopy","event_1","forEach","destroy","types","keys","JSON","stringify","EventRegister","wrapper","addDOMEvents","removeDOMEvents","handleDOMEvents","eventOperation","name","handleEvent","eventType","handler","OptionsConstructor","_super","startX","startY","scrollX","scrollY","freeScroll","directionLockThreshold","eventPassthrough","dblclick","tap","bottom","right","bounceTime","momentum","momentumLimitTime","momentumLimitDistance","swipeTime","swipeBounceTime","deceleration","flickLimitTime","flickLimitDistance","resizePolling","probeType","stopPropagation","preventDefaultException","tagName","tagException","HWCompositing","useTransition","bindToWrapper","bindToTarget","disableMouse","disableTouch","autoBlur","autoEndDistance","outOfBoundaryDampingFactor","specifiedIndexAsContent","quadrant","merge","options","resolveBounce","process","translateZ","bounceOptions","DEFAULT_BOUNCE","ActionsHandler","hooks","_a","wrapperEvents","targetEvents","shouldRegisterTouch","shouldRegisterMouse","bind","start","move","end","wrapperEventRegister","targetEventRegister","beforeHandler","setInitiated","initiated","_eventType","button","beforeStart","point","touches","pointX","pageX","pointY","pageY","deltaX","deltaY","scrollLeft","documentElement","pageXOffset","scrollTop","pageYOffset","pX","pY","clientWidth","clientHeight","setContent","content","rebindDOMEvents","translaterMetaData","Translater","getComputedPosition","matrix","getComputedStyle","translate","transformStyle","transformFnName","transformFnArgUnit","transformFnArg","beforeTranslate","join","Base","translater","timer","endPoint","setPending","pending","setForceStopped","forceStopped","setCallStop","called","callStopWhenPending","stop","clearTimer","Transition","startProbe","startPoint","prePos","probe","pos","currentPos","computeDirection","endValue","startValue","delta","directionX","directionY","isValidPostion","transitionTime","time","easing","timeFunction","easingFn","isRealtimeProbeType","_reflow","doStop","forceStop","callStop","Animation","animate","duration","startTime","destTime","newPoint","_b","_c","_d","Behavior","refresh","dist","setMovingDirection","setDirection","hasScroll","performDampingAlgorithm","movingDirection","direction","dampingFactor","newPos","minScrollPos","maxScrollPos","bounces","momentumInfo","absDist","Math","abs","startPos","wrapperSize","destination","current","lowerMargin","upperMargin","distance","speed","momentumData","rate","round","updateDirection","absStartPos","size","position","isWrapperStatic","wrapperRect","contentRect","contentSize","relativeOffset","computeBoundary","resetState","resetStartPos","beforeComputeBoundary","boundary","scrollable","updatePosition","getCurrentPos","checkInBoundary","adjustPosition","inBoundary","ignoreHasScroll","updateStartPos","updateAbsStartPos","getAbsDist","PassthroughHandlers","DirectionMap","DirectionLockAction","reset","directionLocked","checkMovingDirection","absDistX","absDistY","computeDirectionLock","handleEventPassthrough","adjustDelta","handleMap","ScrollerActions","scrollBehaviorX","scrollBehaviorY","actionsHandler","animater","directionLockAction","enabled","bindActionsHandler","handleStart","applyQuadrantTransformation","transformateDeltaData","coordinateTransformation","handleMove","handleEnd","handleClick","timestamp","fingerMoved","contentMoved","beforeMove","checkMomentum","prevX","newX","prevY","newY","detectMovingDirection","positionChanged","contentNotMoved","scrollStart","dispatchScroll","scroll","endTime","beforeEnd","ensureIntegerPos","scrollEnd","ensuringInteger","minScrollPosX","maxScrollPosX","minScrollPosY","maxScrollPosY","ceil","floor","createBehaviorOptions","bsOptions","extraProp","reduce","prev","cur","bubbling","sourceEvent","targetEvent","Scroller","resizeTimeout","element","animaterOptions","createAnimater","actions","resizeHandler","resize","resizeRegister","registerTransitionEnd","init","bindTranslater","bindAnimater","bindActions","togglePointerEvents","transitionEndRegister","prevPos","updatePositions","resetPosition","beforeScrollStart","touchEnd","scrollCancel","checkClick","checkFlick","flick","meta","swiper","momentumX","momentumY","scrollTo","_dblclick","dblclickTrigged","lastClickTime","delay","eventName","children","pointerEvents","node","isBScrollContainer","contentChanged","beforeRefresh","wrapperOffset","scrollBy","extraTransform","keys_1","isSamePoint","minDistanceScroll","scrollToElement","offsetX","offsetY","targetEle","getOffset","getPos","wrapperPos","scrollBehavior","xInBoundary","yInBoundary","reflow","enable","disable","BScrollConstructor","plugins","valid","use","ctor","pluginName","plugin","pluginsMap","applyOrder","scroller","eventBubbling","handleAutoBlur","proxy","applyPlugins","refreshWithoutReset","beforeInitialScrollTo","sort","applyOrderMap","activeElement","blur","propertiesConfig","lastKey","getProperty","temp","setProperty","propertiesProxy","eventRegister","createBScroll","BScroll","MouseWheel","wheelEndTimer","wheelMoveTimer","wheelStart","handleBScroll","handleOptions","handleHooks","registerEvent","userOptions","mouseWheel","mouseWheelOpt","invert","easeTime","discreteTime","throttleTime","hooksFn","registerHooks","wheelHandler","wheelStartHandler","getWheelDelta","wheelMoveHandler","wheelEndDetector","cleanCache","alterOptions","mousewheelStart","deltaCache","cachedDelta","mousewheelMove","getEaseTime","mousewheelEnd","wheelDeltaX","wheelDeltaY","deltaMode","wheelDelta","detail","hasVerticalScroll","hasHorizontalScroll","hooksName","handlerFn","ObserveDOM","stopObserver","handleMutationObserver","MutationObserver","observer","mutations","mutationObserverHandler","startObserve","checkDOMUpdate","stopObserve","shouldNotRefresh","immediateRefresh","deferredRefresh","mutation","observe","attributes","childList","subtree","outsideBoundaries","oldWidth","oldHeight","check","newWidth","newHeight","disconnect","propertiesConfig$6","sourcePrefix$6","PullDown","pulling","thresholdBoundary","setPulling","status","setThresholdBoundary","pullDownRefresh","watch","threshold","currentMinScrollY","cachedOriginanMinScrollY","finishPullDown","hasMouseWheelPlugin","mouseWheelOptions","watching","checkPullDown","resetStateBeforeScrollStart","checkLocationOfThresholdBoundary","isFetchingStatus","scroll_1","enteredThresholdBoundary","locateInsideThresholdBoundary","leftThresholdBoundary","unwatch","modifyBehaviorYBoundary","stopDistance","openPullDown","config","closePullDown","autoPullDownRefresh","propertiesConfig$5","sourcePrefix$5","PullUp","pullUpLoad","finishPullUp","checkPullUp","movingDirectionY","maxScrollY","openPullUp","closePullUp","autoPullUpLoad","outOfBoundaryPos","EventHandler","indicator","registerEvents","startEvents","moveEvents","endEvents","startEventRegister","indicatorEl","moveEventRegister","endEventRegister","BScrollIsDisabled","lastPoint","keysMap","touchStart","pointPos","touchMove","Indicator$1","Indicator","getKeysMap","handleFade","fade","opacity","interactive","scrollbarTrackClickable","scrollHooks","translaterHooks","animaterHooks","hasScrollKey","eventHandler","eventHandlerHooks","startHandler","moveHandler","endHandler","bindClick","clickEventRegister","calculateclickOffsetPos","scrollbarTrackOffsetTime","poinKey","domRectKey","domRect","scrollbarTrackOffsetType","clickPointOffset","scrollToWhere","scrollInfo","baseSize","scrollerSize","translateProperty","visible","fadeInTime","fadeOutTime","canScroll","wrapperSizeKey","scrollerSizeKey","maxScrollPosKey","refreshScrollInfo","display","indicatorElSize","minSize","isCustom","maxIndicatorScrollPos","sizeRatio","caculatePosAndSize","refreshStyle","posKey","translatePropertyKey","sizeKey","moved","indicatorNotMoved","syncBScroll","minScrollY","maxScrollX","minScrollX","parentNode","removeChild","ScrollBar","createIndicators","indicators","scrollbar","customElements","indicatorOptions","scrollDirectionConfigKeys","indicatorDirections","customScrollbarEls","customElement","shift","scrollbarWrapper","createScrollbarElement","appendChild","scrollbarWrapperEl","scrollbarIndicatorEl","cssText","BASE_PAGE","DEFAULT_PAGE_STATS","cx","cy","PagesMatrix","wrapperWidth","wrapperHeight","scrollerHeight","scrollerWidth","pages","buildPagesMatrix","pageLengthOfX","pageLengthOfY","getPageStats","getNearestPageIndex","l","stepX","stepY","SlidePages","slideOptions","slideX","slideY","currentPage","pagesMatrix","checkSlideLoop","getAdjustedCurrentPage","loopX","loopY","setCurrentPage","newPage","getInternalPage","getInitialPage","showFirstPage","firstInitialised","startPageXIndex","startPageYIndex","firstPageX","firstPageY","getExposedPage","page","exposedPage","fixedPage","getExposedPageByPageIndex","pageIndexX","pageIndexY","getWillChangedPage","realPageLen","pageIndex","unshift","getValidPageIndex","lastX","lastY","firstX","firstY","nextPageIndex","getPageIndexByDirection","prevPageIndex","getNearestPage","getPageByDirection","resetLoopPage","wannaLoop","loop","propertiesConfig$4","sourcePrefix$4","Slide","cachedClonedPageDOM","resetLooping","autoplayTimer","satisfyInitialization","willChangeToPage","createPages","slide","defaultOptions","listenFlick","autoplay","handleLoop","prevSlideContent","slideContent","currentSlidePagesLength","resetLoopChangedStatus","removeClonedSlidePage","cloneFirstAndLastSlidePage","initialised","moreToOnePageInLoop","oneToMorePagesInLoop","scrollerHooks","prevContent","pausePlay","modifyCurrentPage","startPlay","refreshHandler","setSlideInlineStyle","modifyScrollMetaHandler","scrollHandler","flickHandler","slideWrapper","scrollOptions","sizeType","styleType","length_1","goTo","goToPage","getCurrentPage","nearestPage","satisfyThreshold","satisfied","thresholdX","thresholdY","computeThreshold","initPage","preprendDOM","cloneNode","appendDOM","firstChild","insertBefore","before","prepend","child","prevExposedPageX","prevExposedPageY","currentExposedPageX","currentExposedPageY","pageWillChangeTo","slidePageChanged","changePage","scrollEasing","currentPosX","startPosX","currentPosY","startPosY","scrollMeta","p1","p2","changeToPage","slideWillChange","propertiesConfig$3","sourcePrefix$3","CONSTANTS","Wheel","refreshBoundary","setSelectedIndex","selectedIndex","wheel","wheelWrapperClass","wheelItemClass","rotate","adjustTime","wheelDisabledItemClass","findNearestValidWheel","isAdjustingPosition","items","rotateX","wheelTo","itemHeight","slice","checkWheelAllDisabled","validWheel","prevSelectedIndex","getSelectedIndex","restorePosition","SafeDeg","toFixed","currentIndex","cacheIndex","wheelDisabledItemClassName","wheelItemsAllDisabled","propertiesConfig$2","sourcePrefix$2","Zoom","scale","prevScale","tryInitialZoomTo","zoomOpt","zoomTo","resolveOrigin","origin","originX","originY","baseScale","_doZoomTo","zoom","initialOrigin","minimalZoomDistance","setTransformOrigin","numberOfFingers","fingersOperation","zoomStart","zoomEnd","resetBoundaries","amounts","useCurrentPos","fromScale","toScale","timer_1","startTime_1","endTime_1","scheduler_1","zooming","currentScale","_zoomTo","ratio","setScale","getNewPos","resolveFormula","center","firstFinger","secondFinger","startDistance","getFingerDistance","startScale","offsetToBody","beforeZoomStart","currentDistance","zoomed","endScale","dampingScale","shouldRebound","sqrt","pow","scrollBehaviorPairs","behavior","lastScale","shouldInBoundary","BScrollFamily","ancestors","descendants","hooksManager","analyzed","selfScroll","hasAncestors","bscrollFamily","hasDescendants","addAncestor","addDescendant","removeAncestor","removeDescendant","hook","setAnalyzed","flag","purge","propertiesConfig$1","sourcePrefix$1","enableScrollHander","scrolls","disableScrollHander","currentScroll","calculateDistance","childNode","parent","NestedScroll","groupId","instance","instancesMap","store","getAllNestedScrolls","purgeAllNestedScrolls","ns","purgeNestedScroll","nestedScroll","groupIdType","addBScroll","buildBScrollGraph","analyzeBScrollGraph","ensureEventInvokeSequence","deleteScroll","bf1","bf2","wrapper1","wrapper2","contains","ancestorScrolls","descendantScrolls","isResettingPosition","syncTouchstartData","selfActionsHooks","parentScroll","otherAncestorScrolls","isTopScroll","movingDirectionX","isOutOfBoundary","IndexCalculator","tombstoneHeight","lastDirection","lastPos","calculate","list","getDirection","calculateIndex","tombstone","ListItem","data","dom","DataManager","fetchFn","onFetchFinish","loadedNum","fetching","hasMore","update","addEmptyData","checkToFetch","add","fetch","newData","currentEnd","getList","Tombstone","cached","initialed","getSize","isTombstone","classList","getOne","tombstoneStyle","recycle","tombstones","tombstones_1","recycleOne","DomManager","renderFn","unusedDom","timers","collectUnusedDom","createDom","cacheHeight","positionDom","startDelta","endPos","tombstoneEles","getStartPos","timerId","i_1","originPos","removeTombstone","querySelectorAll","InfinityScroll","render","createTombstoneFn","createTombstone","indexCalculator","domManager","dataManager","modifyBoundary","infinityOptions","infinity","updateDom","sourcePrefix","Movable","putAt","resolvePostion","ObserveImage","refreshTimer","observeImage","bindEventsToWrapper","debounceTime","imageLoadEventRegister","load","imageErrorEventRegister","handleBubbleAndCancelable","handleDOM","handleInteractive","relationElement","relationElementHandleElementIndex","maxBScrollX","maxBScrollY","ratioConfig","ratioX","ratioY","resolveRatioOption","indicatorWidth","indicatorHeight","translateXSign","translateYSign","lastPointX","lastPointY","getBScrollPosByRatio","currentX","currentY","BScrollMinScrollX","BScrollMaxScrollX","BScrollMinScrollY","BScrollMaxScrollY","newPosX","newPosY","xNotMoved","yNotMoved","BScrollPos","newIndicatorPos","getIndicatorPosByRatio","applyTransformProperty","transformProperties","roundX","roundY","Indicators","UserIndicatorsOptions","isArray","UserIndicatorsOptions_1"],"mappings":"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","file":"static/js/0.faf51cd5.chunk.js","sourcesContent":["/*!\n * better-scroll / better-scroll\n * (c) 2016-2023 ustbhuangyi\n * Released under the MIT License.\n */\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\n/* global Reflect, Promise */\n\nvar _extendStatics = function extendStatics(d, b) {\n  _extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n  };\n  return _extendStatics(d, b);\n};\nfunction __extends(d, b) {\n  _extendStatics(d, b);\n  function __() {\n    this.constructor = d;\n  }\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\nvar _assign = function __assign() {\n  _assign = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return _assign.apply(this, arguments);\n};\nfunction __awaiter(thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n}\nfunction __generator(thisArg, body) {\n  var _ = {\n      label: 0,\n      sent: function sent() {\n        if (t[0] & 1) throw t[1];\n        return t[1];\n      },\n      trys: [],\n      ops: []\n    },\n    f,\n    y,\n    t,\n    g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n    while (_) try {\n      if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n      if (y = 0, t) op = [op[0] & 2, t.value];\n      switch (op[0]) {\n        case 0:\n        case 1:\n          t = op;\n          break;\n        case 4:\n          _.label++;\n          return {\n            value: op[1],\n            done: false\n          };\n        case 5:\n          _.label++;\n          y = op[1];\n          op = [0];\n          continue;\n        case 7:\n          op = _.ops.pop();\n          _.trys.pop();\n          continue;\n        default:\n          if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n            _ = 0;\n            continue;\n          }\n          if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n            _.label = op[1];\n            break;\n          }\n          if (op[0] === 6 && _.label < t[1]) {\n            _.label = t[1];\n            t = op;\n            break;\n          }\n          if (t && _.label < t[2]) {\n            _.label = t[2];\n            _.ops.push(op);\n            break;\n          }\n          if (t[2]) _.ops.pop();\n          _.trys.pop();\n          continue;\n      }\n      op = body.call(thisArg, _);\n    } catch (e) {\n      op = [6, e];\n      y = 0;\n    } finally {\n      f = t = 0;\n    }\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n}\nfunction __spreadArrays() {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n  for (var r = Array(s), k = 0, i = 0; i < il; i++) for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++) r[k] = a[j];\n  return r;\n}\nvar propertiesConfig$7 = [{\n  sourceKey: 'scroller.scrollBehaviorX.currentPos',\n  key: 'x'\n}, {\n  sourceKey: 'scroller.scrollBehaviorY.currentPos',\n  key: 'y'\n}, {\n  sourceKey: 'scroller.scrollBehaviorX.hasScroll',\n  key: 'hasHorizontalScroll'\n}, {\n  sourceKey: 'scroller.scrollBehaviorY.hasScroll',\n  key: 'hasVerticalScroll'\n}, {\n  sourceKey: 'scroller.scrollBehaviorX.contentSize',\n  key: 'scrollerWidth'\n}, {\n  sourceKey: 'scroller.scrollBehaviorY.contentSize',\n  key: 'scrollerHeight'\n}, {\n  sourceKey: 'scroller.scrollBehaviorX.maxScrollPos',\n  key: 'maxScrollX'\n}, {\n  sourceKey: 'scroller.scrollBehaviorY.maxScrollPos',\n  key: 'maxScrollY'\n}, {\n  sourceKey: 'scroller.scrollBehaviorX.minScrollPos',\n  key: 'minScrollX'\n}, {\n  sourceKey: 'scroller.scrollBehaviorY.minScrollPos',\n  key: 'minScrollY'\n}, {\n  sourceKey: 'scroller.scrollBehaviorX.movingDirection',\n  key: 'movingDirectionX'\n}, {\n  sourceKey: 'scroller.scrollBehaviorY.movingDirection',\n  key: 'movingDirectionY'\n}, {\n  sourceKey: 'scroller.scrollBehaviorX.direction',\n  key: 'directionX'\n}, {\n  sourceKey: 'scroller.scrollBehaviorY.direction',\n  key: 'directionY'\n}, {\n  sourceKey: 'scroller.actions.enabled',\n  key: 'enabled'\n}, {\n  sourceKey: 'scroller.animater.pending',\n  key: 'pending'\n}, {\n  sourceKey: 'scroller.animater.stop',\n  key: 'stop'\n}, {\n  sourceKey: 'scroller.scrollTo',\n  key: 'scrollTo'\n}, {\n  sourceKey: 'scroller.scrollBy',\n  key: 'scrollBy'\n}, {\n  sourceKey: 'scroller.scrollToElement',\n  key: 'scrollToElement'\n}, {\n  sourceKey: 'scroller.resetPosition',\n  key: 'resetPosition'\n}];\nfunction warn(msg) {\n  console.error(\"[BScroll warn]: \" + msg);\n}\nfunction assert(condition, msg) {\n  if (!condition) {\n    throw new Error('[BScroll] ' + msg);\n  }\n}\n\n// ssr support\nvar inBrowser = typeof window !== 'undefined';\nvar ua = inBrowser && navigator.userAgent.toLowerCase();\nvar isWeChatDevTools = !!(ua && /wechatdevtools/.test(ua));\nvar isAndroid = ua && ua.indexOf('android') > 0;\n/* istanbul ignore next */\nvar isIOSBadVersion = function () {\n  if (typeof ua === 'string') {\n    var regex = /os (\\d\\d?_\\d(_\\d)?)/;\n    var matches = regex.exec(ua);\n    if (!matches) return false;\n    var parts = matches[1].split('_').map(function (item) {\n      return parseInt(item, 10);\n    });\n    // ios version >= 13.4 issue 982\n    return !!(parts[0] === 13 && parts[1] >= 4);\n  }\n  return false;\n}();\n/* istanbul ignore next */\nvar supportsPassive = false;\n/* istanbul ignore next */\nif (inBrowser) {\n  var EventName = 'test-passive';\n  try {\n    var opts = {};\n    Object.defineProperty(opts, 'passive', {\n      get: function get() {\n        supportsPassive = true;\n      }\n    }); // https://github.com/facebook/flow/issues/285\n    window.addEventListener(EventName, function () {}, opts);\n  } catch (e) {}\n}\nfunction getNow() {\n  return window.performance && window.performance.now && window.performance.timing ? window.performance.now() + window.performance.timing.navigationStart : +new Date();\n}\nvar extend = function extend(target, source) {\n  for (var key in source) {\n    target[key] = source[key];\n  }\n  return target;\n};\nfunction isUndef(v) {\n  return v === undefined || v === null;\n}\nfunction getDistance(x, y) {\n  return Math.sqrt(x * x + y * y);\n}\nfunction between(x, min, max) {\n  if (x < min) {\n    return min;\n  }\n  if (x > max) {\n    return max;\n  }\n  return x;\n}\nfunction findIndex(ary, fn) {\n  if (ary.findIndex) {\n    return ary.findIndex(fn);\n  }\n  var index = -1;\n  ary.some(function (item, i, ary) {\n    var ret = fn(item, i, ary);\n    if (ret) {\n      index = i;\n      return ret;\n    }\n  });\n  return index;\n}\nvar elementStyle = inBrowser && document.createElement('div').style;\nvar vendor = function () {\n  /* istanbul ignore if  */\n  if (!inBrowser) {\n    return false;\n  }\n  var transformNames = [{\n    key: 'standard',\n    value: 'transform'\n  }, {\n    key: 'webkit',\n    value: 'webkitTransform'\n  }, {\n    key: 'Moz',\n    value: 'MozTransform'\n  }, {\n    key: 'O',\n    value: 'OTransform'\n  }, {\n    key: 'ms',\n    value: 'msTransform'\n  }];\n  for (var _i = 0, transformNames_1 = transformNames; _i < transformNames_1.length; _i++) {\n    var obj = transformNames_1[_i];\n    if (elementStyle[obj.value] !== undefined) {\n      return obj.key;\n    }\n  }\n  /* istanbul ignore next  */\n  return false;\n}();\n/* istanbul ignore next  */\nfunction prefixStyle(style) {\n  if (vendor === false) {\n    return style;\n  }\n  if (vendor === 'standard') {\n    if (style === 'transitionEnd') {\n      return 'transitionend';\n    }\n    return style;\n  }\n  return vendor + style.charAt(0).toUpperCase() + style.substr(1);\n}\nfunction getElement(el) {\n  return typeof el === 'string' ? document.querySelector(el) : el;\n}\nfunction addEvent(el, type, fn, capture) {\n  var useCapture = supportsPassive ? {\n    passive: false,\n    capture: !!capture\n  } : !!capture;\n  el.addEventListener(type, fn, useCapture);\n}\nfunction removeEvent(el, type, fn, capture) {\n  el.removeEventListener(type, fn, {\n    capture: !!capture\n  });\n}\nfunction maybePrevent(e) {\n  if (e.cancelable) {\n    e.preventDefault();\n  }\n}\nfunction offset(el) {\n  var left = 0;\n  var top = 0;\n  while (el) {\n    left -= el.offsetLeft;\n    top -= el.offsetTop;\n    el = el.offsetParent;\n  }\n  return {\n    left: left,\n    top: top\n  };\n}\nfunction offsetToBody(el) {\n  var rect = el.getBoundingClientRect();\n  return {\n    left: -(rect.left + window.pageXOffset),\n    top: -(rect.top + window.pageYOffset)\n  };\n}\nvar cssVendor = vendor && vendor !== 'standard' ? '-' + vendor.toLowerCase() + '-' : '';\nvar transform = prefixStyle('transform');\nvar transition = prefixStyle('transition');\nvar hasPerspective = inBrowser && prefixStyle('perspective') in elementStyle;\n// fix issue #361\nvar hasTouch = inBrowser && ('ontouchstart' in window || isWeChatDevTools);\nvar hasTransition = inBrowser && transition in elementStyle;\nvar style = {\n  transform: transform,\n  transition: transition,\n  transitionTimingFunction: prefixStyle('transitionTimingFunction'),\n  transitionDuration: prefixStyle('transitionDuration'),\n  transitionDelay: prefixStyle('transitionDelay'),\n  transformOrigin: prefixStyle('transformOrigin'),\n  transitionEnd: prefixStyle('transitionEnd'),\n  transitionProperty: prefixStyle('transitionProperty')\n};\nvar eventTypeMap = {\n  touchstart: 1,\n  touchmove: 1,\n  touchend: 1,\n  touchcancel: 1,\n  mousedown: 2,\n  mousemove: 2,\n  mouseup: 2\n};\nfunction getRect(el) {\n  /* istanbul ignore if  */\n  if (el instanceof window.SVGElement) {\n    var rect = el.getBoundingClientRect();\n    return {\n      top: rect.top,\n      left: rect.left,\n      width: rect.width,\n      height: rect.height\n    };\n  } else {\n    return {\n      top: el.offsetTop,\n      left: el.offsetLeft,\n      width: el.offsetWidth,\n      height: el.offsetHeight\n    };\n  }\n}\nfunction preventDefaultExceptionFn(el, exceptions) {\n  for (var i in exceptions) {\n    if (exceptions[i].test(el[i])) {\n      return true;\n    }\n  }\n  return false;\n}\nvar tagExceptionFn = preventDefaultExceptionFn;\nfunction tap(e, eventName) {\n  var ev = document.createEvent('Event');\n  ev.initEvent(eventName, true, true);\n  ev.pageX = e.pageX;\n  ev.pageY = e.pageY;\n  e.target.dispatchEvent(ev);\n}\nfunction click(e, event) {\n  if (event === void 0) {\n    event = 'click';\n  }\n  var eventSource;\n  if (e.type === 'mouseup') {\n    eventSource = e;\n  } else if (e.type === 'touchend' || e.type === 'touchcancel') {\n    eventSource = e.changedTouches[0];\n  }\n  var posSrc = {};\n  if (eventSource) {\n    posSrc.screenX = eventSource.screenX || 0;\n    posSrc.screenY = eventSource.screenY || 0;\n    posSrc.clientX = eventSource.clientX || 0;\n    posSrc.clientY = eventSource.clientY || 0;\n  }\n  var ev;\n  var bubbles = true;\n  var cancelable = true;\n  var ctrlKey = e.ctrlKey,\n    shiftKey = e.shiftKey,\n    altKey = e.altKey,\n    metaKey = e.metaKey;\n  var pressedKeysMap = {\n    ctrlKey: ctrlKey,\n    shiftKey: shiftKey,\n    altKey: altKey,\n    metaKey: metaKey\n  };\n  if (typeof MouseEvent !== 'undefined') {\n    try {\n      ev = new MouseEvent(event, extend(_assign({\n        bubbles: bubbles,\n        cancelable: cancelable\n      }, pressedKeysMap), posSrc));\n    } catch (e) {\n      /* istanbul ignore next */\n      createEvent();\n    }\n  } else {\n    createEvent();\n  }\n  function createEvent() {\n    ev = document.createEvent('Event');\n    ev.initEvent(event, bubbles, cancelable);\n    extend(ev, posSrc);\n  }\n  // forwardedTouchEvent set to true in case of the conflict with fastclick\n  ev.forwardedTouchEvent = true;\n  ev._constructed = true;\n  e.target.dispatchEvent(ev);\n}\nfunction dblclick(e) {\n  click(e, 'dblclick');\n}\nfunction prepend(el, target) {\n  var firstChild = target.firstChild;\n  if (firstChild) {\n    before(el, firstChild);\n  } else {\n    target.appendChild(el);\n  }\n}\nfunction before(el, target) {\n  var parentNode = target.parentNode;\n  parentNode.insertBefore(el, target);\n}\nfunction removeChild(el, child) {\n  el.removeChild(child);\n}\nfunction hasClass(el, className) {\n  var reg = new RegExp('(^|\\\\s)' + className + '(\\\\s|$)');\n  return reg.test(el.className);\n}\nfunction HTMLCollectionToArray(el) {\n  return Array.prototype.slice.call(el, 0);\n}\nfunction getClientSize(el) {\n  return {\n    width: el.clientWidth,\n    height: el.clientHeight\n  };\n}\nvar ease = {\n  // easeOutQuint\n  swipe: {\n    style: 'cubic-bezier(0.23, 1, 0.32, 1)',\n    fn: function fn(t) {\n      return 1 + --t * t * t * t * t;\n    }\n  },\n  // easeOutQuard\n  swipeBounce: {\n    style: 'cubic-bezier(0.25, 0.46, 0.45, 0.94)',\n    fn: function fn(t) {\n      return t * (2 - t);\n    }\n  },\n  // easeOutQuart\n  bounce: {\n    style: 'cubic-bezier(0.165, 0.84, 0.44, 1)',\n    fn: function fn(t) {\n      return 1 - --t * t * t * t;\n    }\n  }\n};\nvar DEFAULT_INTERVAL = 1000 / 60;\nvar windowCompat = inBrowser && window;\n/* istanbul ignore next */\nfunction noop$1() {}\nvar requestAnimationFrame = function () {\n  /* istanbul ignore if  */\n  if (!inBrowser) {\n    return noop$1;\n  }\n  return windowCompat.requestAnimationFrame || windowCompat.webkitRequestAnimationFrame || windowCompat.mozRequestAnimationFrame || windowCompat.oRequestAnimationFrame ||\n  // if all else fails, use setTimeout\n  function (callback) {\n    return window.setTimeout(callback, callback.interval || DEFAULT_INTERVAL); // make interval as precise as possible.\n  };\n}();\n\nvar cancelAnimationFrame = function () {\n  /* istanbul ignore if  */\n  if (!inBrowser) {\n    return noop$1;\n  }\n  return windowCompat.cancelAnimationFrame || windowCompat.webkitCancelAnimationFrame || windowCompat.mozCancelAnimationFrame || windowCompat.oCancelAnimationFrame || function (id) {\n    window.clearTimeout(id);\n  };\n}();\n\n/* istanbul ignore next */\nvar noop = function noop(val) {};\nvar sharedPropertyDefinition = {\n  enumerable: true,\n  configurable: true,\n  get: noop,\n  set: noop\n};\nvar getProperty = function getProperty(obj, key) {\n  var keys = key.split('.');\n  for (var i = 0; i < keys.length - 1; i++) {\n    obj = obj[keys[i]];\n    if (typeof obj !== 'object' || !obj) return;\n  }\n  var lastKey = keys.pop();\n  if (typeof obj[lastKey] === 'function') {\n    return function () {\n      return obj[lastKey].apply(obj, arguments);\n    };\n  } else {\n    return obj[lastKey];\n  }\n};\nvar setProperty = function setProperty(obj, key, value) {\n  var keys = key.split('.');\n  var temp;\n  for (var i = 0; i < keys.length - 1; i++) {\n    temp = keys[i];\n    if (!obj[temp]) obj[temp] = {};\n    obj = obj[temp];\n  }\n  obj[keys.pop()] = value;\n};\nfunction propertiesProxy(target, sourceKey, key) {\n  sharedPropertyDefinition.get = function proxyGetter() {\n    return getProperty(this, sourceKey);\n  };\n  sharedPropertyDefinition.set = function proxySetter(val) {\n    setProperty(this, sourceKey, val);\n  };\n  Object.defineProperty(target, key, sharedPropertyDefinition);\n}\nvar EventEmitter = /** @class */function () {\n  function EventEmitter(names) {\n    this.events = {};\n    this.eventTypes = {};\n    this.registerType(names);\n  }\n  EventEmitter.prototype.on = function (type, fn, context) {\n    if (context === void 0) {\n      context = this;\n    }\n    this.hasType(type);\n    if (!this.events[type]) {\n      this.events[type] = [];\n    }\n    this.events[type].push([fn, context]);\n    return this;\n  };\n  EventEmitter.prototype.once = function (type, fn, context) {\n    var _this = this;\n    if (context === void 0) {\n      context = this;\n    }\n    this.hasType(type);\n    var magic = function magic() {\n      var args = [];\n      for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n      }\n      _this.off(type, magic);\n      var ret = fn.apply(context, args);\n      if (ret === true) {\n        return ret;\n      }\n    };\n    magic.fn = fn;\n    this.on(type, magic);\n    return this;\n  };\n  EventEmitter.prototype.off = function (type, fn) {\n    if (!type && !fn) {\n      this.events = {};\n      return this;\n    }\n    if (type) {\n      this.hasType(type);\n      if (!fn) {\n        this.events[type] = [];\n        return this;\n      }\n      var events = this.events[type];\n      if (!events) {\n        return this;\n      }\n      var count = events.length;\n      while (count--) {\n        if (events[count][0] === fn || events[count][0] && events[count][0].fn === fn) {\n          events.splice(count, 1);\n        }\n      }\n      return this;\n    }\n  };\n  EventEmitter.prototype.trigger = function (type) {\n    var args = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n      args[_i - 1] = arguments[_i];\n    }\n    this.hasType(type);\n    var events = this.events[type];\n    if (!events) {\n      return;\n    }\n    var len = events.length;\n    var eventsCopy = __spreadArrays(events);\n    var ret;\n    for (var i = 0; i < len; i++) {\n      var event_1 = eventsCopy[i];\n      var fn = event_1[0],\n        context = event_1[1];\n      if (fn) {\n        ret = fn.apply(context, args);\n        if (ret === true) {\n          return ret;\n        }\n      }\n    }\n  };\n  EventEmitter.prototype.registerType = function (names) {\n    var _this = this;\n    names.forEach(function (type) {\n      _this.eventTypes[type] = type;\n    });\n  };\n  EventEmitter.prototype.destroy = function () {\n    this.events = {};\n    this.eventTypes = {};\n  };\n  EventEmitter.prototype.hasType = function (type) {\n    var types = this.eventTypes;\n    var isType = types[type] === type;\n    if (!isType) {\n      warn(\"EventEmitter has used unknown event type: \\\"\" + type + \"\\\", should be oneof [\" + (\"\" + Object.keys(types).map(function (_) {\n        return JSON.stringify(_);\n      })) + \"]\");\n    }\n  };\n  return EventEmitter;\n}();\nvar EventRegister = /** @class */function () {\n  function EventRegister(wrapper, events) {\n    this.wrapper = wrapper;\n    this.events = events;\n    this.addDOMEvents();\n  }\n  EventRegister.prototype.destroy = function () {\n    this.removeDOMEvents();\n    this.events = [];\n  };\n  EventRegister.prototype.addDOMEvents = function () {\n    this.handleDOMEvents(addEvent);\n  };\n  EventRegister.prototype.removeDOMEvents = function () {\n    this.handleDOMEvents(removeEvent);\n  };\n  EventRegister.prototype.handleDOMEvents = function (eventOperation) {\n    var _this = this;\n    var wrapper = this.wrapper;\n    this.events.forEach(function (event) {\n      eventOperation(wrapper, event.name, _this, !!event.capture);\n    });\n  };\n  EventRegister.prototype.handleEvent = function (e) {\n    var eventType = e.type;\n    this.events.some(function (event) {\n      if (event.name === eventType) {\n        event.handler(e);\n        return true;\n      }\n      return false;\n    });\n  };\n  return EventRegister;\n}();\nvar CustomOptions = /** @class */function () {\n  function CustomOptions() {}\n  return CustomOptions;\n}();\nvar OptionsConstructor = /** @class */function (_super) {\n  __extends(OptionsConstructor, _super);\n  function OptionsConstructor() {\n    var _this = _super.call(this) || this;\n    _this.startX = 0;\n    _this.startY = 0;\n    _this.scrollX = false;\n    _this.scrollY = true;\n    _this.freeScroll = false;\n    _this.directionLockThreshold = 0;\n    _this.eventPassthrough = \"\" /* None */;\n    _this.click = false;\n    _this.dblclick = false;\n    _this.tap = '';\n    _this.bounce = {\n      top: true,\n      bottom: true,\n      left: true,\n      right: true\n    };\n    _this.bounceTime = 800;\n    _this.momentum = true;\n    _this.momentumLimitTime = 300;\n    _this.momentumLimitDistance = 15;\n    _this.swipeTime = 2500;\n    _this.swipeBounceTime = 500;\n    _this.deceleration = 0.0015;\n    _this.flickLimitTime = 200;\n    _this.flickLimitDistance = 100;\n    _this.resizePolling = 60;\n    _this.probeType = 0 /* Default */;\n    _this.stopPropagation = false;\n    _this.preventDefault = true;\n    _this.preventDefaultException = {\n      tagName: /^(INPUT|TEXTAREA|BUTTON|SELECT|AUDIO)$/\n    };\n    _this.tagException = {\n      tagName: /^TEXTAREA$/\n    };\n    _this.HWCompositing = true;\n    _this.useTransition = true;\n    _this.bindToWrapper = false;\n    _this.bindToTarget = false;\n    _this.disableMouse = hasTouch;\n    _this.disableTouch = !hasTouch;\n    _this.autoBlur = true;\n    _this.autoEndDistance = 5;\n    _this.outOfBoundaryDampingFactor = 1 / 3;\n    _this.specifiedIndexAsContent = 0;\n    _this.quadrant = 1 /* First */;\n    return _this;\n  }\n  OptionsConstructor.prototype.merge = function (options) {\n    if (!options) return this;\n    for (var key in options) {\n      if (key === 'bounce') {\n        this.bounce = this.resolveBounce(options[key]);\n        continue;\n      }\n      this[key] = options[key];\n    }\n    return this;\n  };\n  OptionsConstructor.prototype.process = function () {\n    this.translateZ = this.HWCompositing && hasPerspective ? ' translateZ(1px)' : '';\n    this.useTransition = this.useTransition && hasTransition;\n    this.preventDefault = !this.eventPassthrough && this.preventDefault;\n    // If you want eventPassthrough I have to lock one of the axes\n    this.scrollX = this.eventPassthrough === \"horizontal\" /* Horizontal */ ? false : this.scrollX;\n    this.scrollY = this.eventPassthrough === \"vertical\" /* Vertical */ ? false : this.scrollY;\n    // With eventPassthrough we also need lockDirection mechanism\n    this.freeScroll = this.freeScroll && !this.eventPassthrough;\n    // force true when freeScroll is true\n    this.scrollX = this.freeScroll ? true : this.scrollX;\n    this.scrollY = this.freeScroll ? true : this.scrollY;\n    this.directionLockThreshold = this.eventPassthrough ? 0 : this.directionLockThreshold;\n    return this;\n  };\n  OptionsConstructor.prototype.resolveBounce = function (bounceOptions) {\n    var DEFAULT_BOUNCE = {\n      top: true,\n      right: true,\n      bottom: true,\n      left: true\n    };\n    var NEGATED_BOUNCE = {\n      top: false,\n      right: false,\n      bottom: false,\n      left: false\n    };\n    var ret;\n    if (typeof bounceOptions === 'object') {\n      ret = extend(DEFAULT_BOUNCE, bounceOptions);\n    } else {\n      ret = bounceOptions ? DEFAULT_BOUNCE : NEGATED_BOUNCE;\n    }\n    return ret;\n  };\n  return OptionsConstructor;\n}(CustomOptions);\nvar ActionsHandler = /** @class */function () {\n  function ActionsHandler(wrapper, options) {\n    this.wrapper = wrapper;\n    this.options = options;\n    this.hooks = new EventEmitter(['beforeStart', 'start', 'move', 'end', 'click']);\n    this.handleDOMEvents();\n  }\n  ActionsHandler.prototype.handleDOMEvents = function () {\n    var _a = this.options,\n      bindToWrapper = _a.bindToWrapper,\n      disableMouse = _a.disableMouse,\n      disableTouch = _a.disableTouch,\n      click = _a.click;\n    var wrapper = this.wrapper;\n    var target = bindToWrapper ? wrapper : window;\n    var wrapperEvents = [];\n    var targetEvents = [];\n    var shouldRegisterTouch = !disableTouch;\n    var shouldRegisterMouse = !disableMouse;\n    if (click) {\n      wrapperEvents.push({\n        name: 'click',\n        handler: this.click.bind(this),\n        capture: true\n      });\n    }\n    if (shouldRegisterTouch) {\n      wrapperEvents.push({\n        name: 'touchstart',\n        handler: this.start.bind(this)\n      });\n      targetEvents.push({\n        name: 'touchmove',\n        handler: this.move.bind(this)\n      }, {\n        name: 'touchend',\n        handler: this.end.bind(this)\n      }, {\n        name: 'touchcancel',\n        handler: this.end.bind(this)\n      });\n    }\n    if (shouldRegisterMouse) {\n      wrapperEvents.push({\n        name: 'mousedown',\n        handler: this.start.bind(this)\n      });\n      targetEvents.push({\n        name: 'mousemove',\n        handler: this.move.bind(this)\n      }, {\n        name: 'mouseup',\n        handler: this.end.bind(this)\n      });\n    }\n    this.wrapperEventRegister = new EventRegister(wrapper, wrapperEvents);\n    this.targetEventRegister = new EventRegister(target, targetEvents);\n  };\n  ActionsHandler.prototype.beforeHandler = function (e, type) {\n    var _a = this.options,\n      preventDefault = _a.preventDefault,\n      stopPropagation = _a.stopPropagation,\n      preventDefaultException = _a.preventDefaultException;\n    var preventDefaultConditions = {\n      start: function start() {\n        return preventDefault && !preventDefaultExceptionFn(e.target, preventDefaultException);\n      },\n      end: function end() {\n        return preventDefault && !preventDefaultExceptionFn(e.target, preventDefaultException);\n      },\n      move: function move() {\n        return preventDefault;\n      }\n    };\n    if (preventDefaultConditions[type]()) {\n      e.preventDefault();\n    }\n    if (stopPropagation) {\n      e.stopPropagation();\n    }\n  };\n  ActionsHandler.prototype.setInitiated = function (type) {\n    if (type === void 0) {\n      type = 0;\n    }\n    this.initiated = type;\n  };\n  ActionsHandler.prototype.start = function (e) {\n    var _eventType = eventTypeMap[e.type];\n    if (this.initiated && this.initiated !== _eventType) {\n      return;\n    }\n    this.setInitiated(_eventType);\n    // if textarea or other html tags in options.tagException is manipulated\n    // do not make bs scroll\n    if (tagExceptionFn(e.target, this.options.tagException)) {\n      this.setInitiated();\n      return;\n    }\n    // only allow mouse left button\n    if (_eventType === 2 /* Mouse */ && e.button !== 0 /* Left */) return;\n    if (this.hooks.trigger(this.hooks.eventTypes.beforeStart, e)) {\n      return;\n    }\n    this.beforeHandler(e, 'start');\n    var point = e.touches ? e.touches[0] : e;\n    this.pointX = point.pageX;\n    this.pointY = point.pageY;\n    this.hooks.trigger(this.hooks.eventTypes.start, e);\n  };\n  ActionsHandler.prototype.move = function (e) {\n    if (eventTypeMap[e.type] !== this.initiated) {\n      return;\n    }\n    this.beforeHandler(e, 'move');\n    var point = e.touches ? e.touches[0] : e;\n    var deltaX = point.pageX - this.pointX;\n    var deltaY = point.pageY - this.pointY;\n    this.pointX = point.pageX;\n    this.pointY = point.pageY;\n    if (this.hooks.trigger(this.hooks.eventTypes.move, {\n      deltaX: deltaX,\n      deltaY: deltaY,\n      e: e\n    })) {\n      return;\n    }\n    // auto end when out of viewport\n    var scrollLeft = document.documentElement.scrollLeft || window.pageXOffset || document.body.scrollLeft;\n    var scrollTop = document.documentElement.scrollTop || window.pageYOffset || document.body.scrollTop;\n    var pX = this.pointX - scrollLeft;\n    var pY = this.pointY - scrollTop;\n    var autoEndDistance = this.options.autoEndDistance;\n    if (pX > document.documentElement.clientWidth - autoEndDistance || pY > document.documentElement.clientHeight - autoEndDistance || pX < autoEndDistance || pY < autoEndDistance) {\n      this.end(e);\n    }\n  };\n  ActionsHandler.prototype.end = function (e) {\n    if (eventTypeMap[e.type] !== this.initiated) {\n      return;\n    }\n    this.setInitiated();\n    this.beforeHandler(e, 'end');\n    this.hooks.trigger(this.hooks.eventTypes.end, e);\n  };\n  ActionsHandler.prototype.click = function (e) {\n    this.hooks.trigger(this.hooks.eventTypes.click, e);\n  };\n  ActionsHandler.prototype.setContent = function (content) {\n    if (content !== this.wrapper) {\n      this.wrapper = content;\n      this.rebindDOMEvents();\n    }\n  };\n  ActionsHandler.prototype.rebindDOMEvents = function () {\n    this.wrapperEventRegister.destroy();\n    this.targetEventRegister.destroy();\n    this.handleDOMEvents();\n  };\n  ActionsHandler.prototype.destroy = function () {\n    this.wrapperEventRegister.destroy();\n    this.targetEventRegister.destroy();\n    this.hooks.destroy();\n  };\n  return ActionsHandler;\n}();\nvar translaterMetaData = {\n  x: ['translateX', 'px'],\n  y: ['translateY', 'px']\n};\nvar Translater = /** @class */function () {\n  function Translater(content) {\n    this.setContent(content);\n    this.hooks = new EventEmitter(['beforeTranslate', 'translate']);\n  }\n  Translater.prototype.getComputedPosition = function () {\n    var cssStyle = window.getComputedStyle(this.content, null);\n    var matrix = cssStyle[style.transform].split(')')[0].split(', ');\n    var x = +(matrix[12] || matrix[4]) || 0;\n    var y = +(matrix[13] || matrix[5]) || 0;\n    return {\n      x: x,\n      y: y\n    };\n  };\n  Translater.prototype.translate = function (point) {\n    var transformStyle = [];\n    Object.keys(point).forEach(function (key) {\n      if (!translaterMetaData[key]) {\n        return;\n      }\n      var transformFnName = translaterMetaData[key][0];\n      if (transformFnName) {\n        var transformFnArgUnit = translaterMetaData[key][1];\n        var transformFnArg = point[key];\n        transformStyle.push(transformFnName + \"(\" + transformFnArg + transformFnArgUnit + \")\");\n      }\n    });\n    this.hooks.trigger(this.hooks.eventTypes.beforeTranslate, transformStyle, point);\n    this.style[style.transform] = transformStyle.join(' ');\n    this.hooks.trigger(this.hooks.eventTypes.translate, point);\n  };\n  Translater.prototype.setContent = function (content) {\n    if (this.content !== content) {\n      this.content = content;\n      this.style = content.style;\n    }\n  };\n  Translater.prototype.destroy = function () {\n    this.hooks.destroy();\n  };\n  return Translater;\n}();\nvar Base = /** @class */function () {\n  function Base(content, translater, options) {\n    this.translater = translater;\n    this.options = options;\n    this.timer = 0;\n    this.hooks = new EventEmitter(['move', 'end', 'beforeForceStop', 'forceStop', 'callStop', 'time', 'timeFunction']);\n    this.setContent(content);\n  }\n  Base.prototype.translate = function (endPoint) {\n    this.translater.translate(endPoint);\n  };\n  Base.prototype.setPending = function (pending) {\n    this.pending = pending;\n  };\n  Base.prototype.setForceStopped = function (forceStopped) {\n    this.forceStopped = forceStopped;\n  };\n  Base.prototype.setCallStop = function (called) {\n    this.callStopWhenPending = called;\n  };\n  Base.prototype.setContent = function (content) {\n    if (this.content !== content) {\n      this.content = content;\n      this.style = content.style;\n      this.stop();\n    }\n  };\n  Base.prototype.clearTimer = function () {\n    if (this.timer) {\n      cancelAnimationFrame(this.timer);\n      this.timer = 0;\n    }\n  };\n  Base.prototype.destroy = function () {\n    this.hooks.destroy();\n    cancelAnimationFrame(this.timer);\n  };\n  return Base;\n}();\n\n// iOS 13.6 - 14.x, window.getComputedStyle sometimes will get wrong transform value\n// when bs use transition mode\n// eg: translateY -100px -> -200px, when the last frame which is about to scroll to -200px\n// window.getComputedStyle(this.content) will calculate transformY to be -100px(startPoint)\n// it is weird\n// so we should validate position caculated by 'window.getComputedStyle'\nvar isValidPostion = function isValidPostion(startPoint, endPoint, currentPos, prePos) {\n  var computeDirection = function computeDirection(endValue, startValue) {\n    var delta = endValue - startValue;\n    var direction = delta > 0 ? -1 /* Negative */ : delta < 0 ? 1 /* Positive */ : 0 /* Default */;\n    return direction;\n  };\n  var directionX = computeDirection(endPoint.x, startPoint.x);\n  var directionY = computeDirection(endPoint.y, startPoint.y);\n  var deltaX = currentPos.x - prePos.x;\n  var deltaY = currentPos.y - prePos.y;\n  return directionX * deltaX <= 0 && directionY * deltaY <= 0;\n};\nvar Transition = /** @class */function (_super) {\n  __extends(Transition, _super);\n  function Transition() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  Transition.prototype.startProbe = function (startPoint, endPoint) {\n    var _this = this;\n    var prePos = startPoint;\n    var probe = function probe() {\n      var pos = _this.translater.getComputedPosition();\n      if (isValidPostion(startPoint, endPoint, pos, prePos)) {\n        _this.hooks.trigger(_this.hooks.eventTypes.move, pos);\n      }\n      // call bs.stop() should not dispatch end hook again.\n      // forceStop hook will do this.\n      /* istanbul ignore if  */\n      if (!_this.pending) {\n        if (_this.callStopWhenPending) {\n          _this.callStopWhenPending = false;\n        } else {\n          // transition ends should dispatch end hook.\n          _this.hooks.trigger(_this.hooks.eventTypes.end, pos);\n        }\n      }\n      prePos = pos;\n      if (_this.pending) {\n        _this.timer = requestAnimationFrame(probe);\n      }\n    };\n    // when manually call bs.stop(), then bs.scrollTo()\n    // we should reset callStopWhenPending to dispatch end hook\n    if (this.callStopWhenPending) {\n      this.setCallStop(false);\n    }\n    cancelAnimationFrame(this.timer);\n    probe();\n  };\n  Transition.prototype.transitionTime = function (time) {\n    if (time === void 0) {\n      time = 0;\n    }\n    this.style[style.transitionDuration] = time + 'ms';\n    this.hooks.trigger(this.hooks.eventTypes.time, time);\n  };\n  Transition.prototype.transitionTimingFunction = function (easing) {\n    this.style[style.transitionTimingFunction] = easing;\n    this.hooks.trigger(this.hooks.eventTypes.timeFunction, easing);\n  };\n  Transition.prototype.transitionProperty = function () {\n    this.style[style.transitionProperty] = style.transform;\n  };\n  Transition.prototype.move = function (startPoint, endPoint, time, easingFn) {\n    this.setPending(time > 0);\n    this.transitionTimingFunction(easingFn);\n    this.transitionProperty();\n    this.transitionTime(time);\n    this.translate(endPoint);\n    var isRealtimeProbeType = this.options.probeType === 3 /* Realtime */;\n    if (time && isRealtimeProbeType) {\n      this.startProbe(startPoint, endPoint);\n    }\n    // if we change content's transformY in a tick\n    // such as: 0 -> 50px -> 0\n    // transitionend will not be triggered\n    // so we forceupdate by reflow\n    if (!time) {\n      this._reflow = this.content.offsetHeight;\n      if (isRealtimeProbeType) {\n        this.hooks.trigger(this.hooks.eventTypes.move, endPoint);\n      }\n      this.hooks.trigger(this.hooks.eventTypes.end, endPoint);\n    }\n  };\n  Transition.prototype.doStop = function () {\n    var pending = this.pending;\n    this.setForceStopped(false);\n    this.setCallStop(false);\n    // still in transition\n    if (pending) {\n      this.setPending(false);\n      cancelAnimationFrame(this.timer);\n      var _a = this.translater.getComputedPosition(),\n        x = _a.x,\n        y = _a.y;\n      this.transitionTime();\n      this.translate({\n        x: x,\n        y: y\n      });\n      this.setForceStopped(true);\n      this.setCallStop(true);\n      this.hooks.trigger(this.hooks.eventTypes.forceStop, {\n        x: x,\n        y: y\n      });\n    }\n    return pending;\n  };\n  Transition.prototype.stop = function () {\n    var stopFromTransition = this.doStop();\n    if (stopFromTransition) {\n      this.hooks.trigger(this.hooks.eventTypes.callStop);\n    }\n  };\n  return Transition;\n}(Base);\nvar Animation = /** @class */function (_super) {\n  __extends(Animation, _super);\n  function Animation() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  Animation.prototype.move = function (startPoint, endPoint, time, easingFn) {\n    // time is 0\n    if (!time) {\n      this.translate(endPoint);\n      if (this.options.probeType === 3 /* Realtime */) {\n        this.hooks.trigger(this.hooks.eventTypes.move, endPoint);\n      }\n      this.hooks.trigger(this.hooks.eventTypes.end, endPoint);\n      return;\n    }\n    this.animate(startPoint, endPoint, time, easingFn);\n  };\n  Animation.prototype.animate = function (startPoint, endPoint, duration, easingFn) {\n    var _this = this;\n    var startTime = getNow();\n    var destTime = startTime + duration;\n    var isRealtimeProbeType = this.options.probeType === 3 /* Realtime */;\n    var step = function step() {\n      var now = getNow();\n      // js animation end\n      if (now >= destTime) {\n        _this.translate(endPoint);\n        if (isRealtimeProbeType) {\n          _this.hooks.trigger(_this.hooks.eventTypes.move, endPoint);\n        }\n        _this.hooks.trigger(_this.hooks.eventTypes.end, endPoint);\n        return;\n      }\n      now = (now - startTime) / duration;\n      var easing = easingFn(now);\n      var newPoint = {};\n      Object.keys(endPoint).forEach(function (key) {\n        var startValue = startPoint[key];\n        var endValue = endPoint[key];\n        newPoint[key] = (endValue - startValue) * easing + startValue;\n      });\n      _this.translate(newPoint);\n      if (isRealtimeProbeType) {\n        _this.hooks.trigger(_this.hooks.eventTypes.move, newPoint);\n      }\n      if (_this.pending) {\n        _this.timer = requestAnimationFrame(step);\n      }\n      // call bs.stop() should not dispatch end hook again.\n      // forceStop hook will do this.\n      /* istanbul ignore if  */\n      if (!_this.pending) {\n        if (_this.callStopWhenPending) {\n          _this.callStopWhenPending = false;\n        } else {\n          // raf ends should dispatch end hook.\n          _this.hooks.trigger(_this.hooks.eventTypes.end, endPoint);\n        }\n      }\n    };\n    this.setPending(true);\n    // when manually call bs.stop(), then bs.scrollTo()\n    // we should reset callStopWhenPending to dispatch end hook\n    if (this.callStopWhenPending) {\n      this.setCallStop(false);\n    }\n    cancelAnimationFrame(this.timer);\n    step();\n  };\n  Animation.prototype.doStop = function () {\n    var pending = this.pending;\n    this.setForceStopped(false);\n    this.setCallStop(false);\n    // still in requestFrameAnimation\n    if (pending) {\n      this.setPending(false);\n      cancelAnimationFrame(this.timer);\n      var pos = this.translater.getComputedPosition();\n      this.setForceStopped(true);\n      this.setCallStop(true);\n      this.hooks.trigger(this.hooks.eventTypes.forceStop, pos);\n    }\n    return pending;\n  };\n  Animation.prototype.stop = function () {\n    var stopFromAnimation = this.doStop();\n    if (stopFromAnimation) {\n      this.hooks.trigger(this.hooks.eventTypes.callStop);\n    }\n  };\n  return Animation;\n}(Base);\nfunction createAnimater(element, translater, options) {\n  var useTransition = options.useTransition;\n  var animaterOptions = {};\n  Object.defineProperty(animaterOptions, 'probeType', {\n    enumerable: true,\n    configurable: false,\n    get: function get() {\n      return options.probeType;\n    }\n  });\n  if (useTransition) {\n    return new Transition(element, translater, animaterOptions);\n  } else {\n    return new Animation(element, translater, animaterOptions);\n  }\n}\nvar Behavior = /** @class */function () {\n  function Behavior(wrapper, content, options) {\n    this.wrapper = wrapper;\n    this.options = options;\n    this.hooks = new EventEmitter(['beforeComputeBoundary', 'computeBoundary', 'momentum', 'end', 'ignoreHasScroll']);\n    this.refresh(content);\n  }\n  Behavior.prototype.start = function () {\n    this.dist = 0;\n    this.setMovingDirection(0 /* Default */);\n    this.setDirection(0 /* Default */);\n  };\n\n  Behavior.prototype.move = function (delta) {\n    delta = this.hasScroll ? delta : 0;\n    this.setMovingDirection(delta);\n    return this.performDampingAlgorithm(delta, this.options.outOfBoundaryDampingFactor);\n  };\n  Behavior.prototype.setMovingDirection = function (delta) {\n    this.movingDirection = delta > 0 ? -1 /* Negative */ : delta < 0 ? 1 /* Positive */ : 0 /* Default */;\n  };\n\n  Behavior.prototype.setDirection = function (delta) {\n    this.direction = delta > 0 ? -1 /* Negative */ : delta < 0 ? 1 /* Positive */ : 0 /* Default */;\n  };\n\n  Behavior.prototype.performDampingAlgorithm = function (delta, dampingFactor) {\n    var newPos = this.currentPos + delta;\n    // Slow down or stop if outside of the boundaries\n    if (newPos > this.minScrollPos || newPos < this.maxScrollPos) {\n      if (newPos > this.minScrollPos && this.options.bounces[0] || newPos < this.maxScrollPos && this.options.bounces[1]) {\n        newPos = this.currentPos + delta * dampingFactor;\n      } else {\n        newPos = newPos > this.minScrollPos ? this.minScrollPos : this.maxScrollPos;\n      }\n    }\n    return newPos;\n  };\n  Behavior.prototype.end = function (duration) {\n    var momentumInfo = {\n      duration: 0\n    };\n    var absDist = Math.abs(this.currentPos - this.startPos);\n    // start momentum animation if needed\n    if (this.options.momentum && duration < this.options.momentumLimitTime && absDist > this.options.momentumLimitDistance) {\n      var wrapperSize = this.direction === -1 /* Negative */ && this.options.bounces[0] || this.direction === 1 /* Positive */ && this.options.bounces[1] ? this.wrapperSize : 0;\n      momentumInfo = this.hasScroll ? this.momentum(this.currentPos, this.startPos, duration, this.maxScrollPos, this.minScrollPos, wrapperSize, this.options) : {\n        destination: this.currentPos,\n        duration: 0\n      };\n    } else {\n      this.hooks.trigger(this.hooks.eventTypes.end, momentumInfo);\n    }\n    return momentumInfo;\n  };\n  Behavior.prototype.momentum = function (current, start, time, lowerMargin, upperMargin, wrapperSize, options) {\n    if (options === void 0) {\n      options = this.options;\n    }\n    var distance = current - start;\n    var speed = Math.abs(distance) / time;\n    var deceleration = options.deceleration,\n      swipeBounceTime = options.swipeBounceTime,\n      swipeTime = options.swipeTime;\n    var duration = Math.min(swipeTime, speed * 2 / deceleration);\n    var momentumData = {\n      destination: current + speed * speed / deceleration * (distance < 0 ? -1 : 1),\n      duration: duration,\n      rate: 15\n    };\n    this.hooks.trigger(this.hooks.eventTypes.momentum, momentumData, distance);\n    if (momentumData.destination < lowerMargin) {\n      momentumData.destination = wrapperSize ? Math.max(lowerMargin - wrapperSize / 4, lowerMargin - wrapperSize / momentumData.rate * speed) : lowerMargin;\n      momentumData.duration = swipeBounceTime;\n    } else if (momentumData.destination > upperMargin) {\n      momentumData.destination = wrapperSize ? Math.min(upperMargin + wrapperSize / 4, upperMargin + wrapperSize / momentumData.rate * speed) : upperMargin;\n      momentumData.duration = swipeBounceTime;\n    }\n    momentumData.destination = Math.round(momentumData.destination);\n    return momentumData;\n  };\n  Behavior.prototype.updateDirection = function () {\n    var absDist = this.currentPos - this.absStartPos;\n    this.setDirection(absDist);\n  };\n  Behavior.prototype.refresh = function (content) {\n    var _a = this.options.rect,\n      size = _a.size,\n      position = _a.position;\n    var isWrapperStatic = window.getComputedStyle(this.wrapper, null).position === 'static';\n    // Force reflow\n    var wrapperRect = getRect(this.wrapper);\n    // use client is more fair than offset\n    this.wrapperSize = this.wrapper[size === 'width' ? 'clientWidth' : 'clientHeight'];\n    this.setContent(content);\n    var contentRect = getRect(this.content);\n    this.contentSize = contentRect[size];\n    this.relativeOffset = contentRect[position];\n    /* istanbul ignore if  */\n    if (isWrapperStatic) {\n      this.relativeOffset -= wrapperRect[position];\n    }\n    this.computeBoundary();\n    this.setDirection(0 /* Default */);\n  };\n\n  Behavior.prototype.setContent = function (content) {\n    if (content !== this.content) {\n      this.content = content;\n      this.resetState();\n    }\n  };\n  Behavior.prototype.resetState = function () {\n    this.currentPos = 0;\n    this.startPos = 0;\n    this.dist = 0;\n    this.setDirection(0 /* Default */);\n    this.setMovingDirection(0 /* Default */);\n    this.resetStartPos();\n  };\n  Behavior.prototype.computeBoundary = function () {\n    this.hooks.trigger(this.hooks.eventTypes.beforeComputeBoundary);\n    var boundary = {\n      minScrollPos: 0,\n      maxScrollPos: this.wrapperSize - this.contentSize\n    };\n    if (boundary.maxScrollPos < 0) {\n      boundary.maxScrollPos -= this.relativeOffset;\n      if (this.options.specifiedIndexAsContent === 0) {\n        boundary.minScrollPos = -this.relativeOffset;\n      }\n    }\n    this.hooks.trigger(this.hooks.eventTypes.computeBoundary, boundary);\n    this.minScrollPos = boundary.minScrollPos;\n    this.maxScrollPos = boundary.maxScrollPos;\n    this.hasScroll = this.options.scrollable && this.maxScrollPos < this.minScrollPos;\n    if (!this.hasScroll && this.minScrollPos < this.maxScrollPos) {\n      this.maxScrollPos = this.minScrollPos;\n      this.contentSize = this.wrapperSize;\n    }\n  };\n  Behavior.prototype.updatePosition = function (pos) {\n    this.currentPos = pos;\n  };\n  Behavior.prototype.getCurrentPos = function () {\n    return this.currentPos;\n  };\n  Behavior.prototype.checkInBoundary = function () {\n    var position = this.adjustPosition(this.currentPos);\n    var inBoundary = position === this.getCurrentPos();\n    return {\n      position: position,\n      inBoundary: inBoundary\n    };\n  };\n  // adjust position when out of boundary\n  Behavior.prototype.adjustPosition = function (pos) {\n    if (!this.hasScroll && !this.hooks.trigger(this.hooks.eventTypes.ignoreHasScroll)) {\n      pos = this.minScrollPos;\n    } else if (pos > this.minScrollPos) {\n      pos = this.minScrollPos;\n    } else if (pos < this.maxScrollPos) {\n      pos = this.maxScrollPos;\n    }\n    return pos;\n  };\n  Behavior.prototype.updateStartPos = function () {\n    this.startPos = this.currentPos;\n  };\n  Behavior.prototype.updateAbsStartPos = function () {\n    this.absStartPos = this.currentPos;\n  };\n  Behavior.prototype.resetStartPos = function () {\n    this.updateStartPos();\n    this.updateAbsStartPos();\n  };\n  Behavior.prototype.getAbsDist = function (delta) {\n    this.dist += delta;\n    return Math.abs(this.dist);\n  };\n  Behavior.prototype.destroy = function () {\n    this.hooks.destroy();\n  };\n  return Behavior;\n}();\nvar _a, _b, _c, _d;\nvar PassthroughHandlers = (_a = {}, _a[\"yes\" /* Yes */] = function (e) {\n  return true;\n}, _a[\"no\" /* No */] = function (e) {\n  maybePrevent(e);\n  return false;\n}, _a);\nvar DirectionMap = (_b = {}, _b[\"horizontal\" /* Horizontal */] = (_c = {}, _c[\"yes\" /* Yes */] = \"horizontal\" /* Horizontal */, _c[\"no\" /* No */] = \"vertical\" /* Vertical */, _c), _b[\"vertical\" /* Vertical */] = (_d = {}, _d[\"yes\" /* Yes */] = \"vertical\" /* Vertical */, _d[\"no\" /* No */] = \"horizontal\" /* Horizontal */, _d), _b);\nvar DirectionLockAction = /** @class */function () {\n  function DirectionLockAction(directionLockThreshold, freeScroll, eventPassthrough) {\n    this.directionLockThreshold = directionLockThreshold;\n    this.freeScroll = freeScroll;\n    this.eventPassthrough = eventPassthrough;\n    this.reset();\n  }\n  DirectionLockAction.prototype.reset = function () {\n    this.directionLocked = \"\" /* Default */;\n  };\n\n  DirectionLockAction.prototype.checkMovingDirection = function (absDistX, absDistY, e) {\n    this.computeDirectionLock(absDistX, absDistY);\n    return this.handleEventPassthrough(e);\n  };\n  DirectionLockAction.prototype.adjustDelta = function (deltaX, deltaY) {\n    if (this.directionLocked === \"horizontal\" /* Horizontal */) {\n      deltaY = 0;\n    } else if (this.directionLocked === \"vertical\" /* Vertical */) {\n      deltaX = 0;\n    }\n    return {\n      deltaX: deltaX,\n      deltaY: deltaY\n    };\n  };\n  DirectionLockAction.prototype.computeDirectionLock = function (absDistX, absDistY) {\n    // If you are scrolling in one direction, lock it\n    if (this.directionLocked === \"\" /* Default */ && !this.freeScroll) {\n      if (absDistX > absDistY + this.directionLockThreshold) {\n        this.directionLocked = \"horizontal\" /* Horizontal */; // lock horizontally\n      } else if (absDistY >= absDistX + this.directionLockThreshold) {\n        this.directionLocked = \"vertical\" /* Vertical */; // lock vertically\n      } else {\n        this.directionLocked = \"none\" /* None */; // no lock\n      }\n    }\n  };\n\n  DirectionLockAction.prototype.handleEventPassthrough = function (e) {\n    var handleMap = DirectionMap[this.directionLocked];\n    if (handleMap) {\n      if (this.eventPassthrough === handleMap[\"yes\" /* Yes */]) {\n        return PassthroughHandlers[\"yes\" /* Yes */](e);\n      } else if (this.eventPassthrough === handleMap[\"no\" /* No */]) {\n        return PassthroughHandlers[\"no\" /* No */](e);\n      }\n    }\n    return false;\n  };\n  return DirectionLockAction;\n}();\nvar applyQuadrantTransformation = function applyQuadrantTransformation(deltaX, deltaY, quadrant) {\n  if (quadrant === 2 /* Second */) {\n    return [deltaY, -deltaX];\n  } else if (quadrant === 3 /* Third */) {\n    return [-deltaX, -deltaY];\n  } else if (quadrant === 4 /* Forth */) {\n    return [-deltaY, deltaX];\n  } else {\n    return [deltaX, deltaY];\n  }\n};\nvar ScrollerActions = /** @class */function () {\n  function ScrollerActions(scrollBehaviorX, scrollBehaviorY, actionsHandler, animater, options) {\n    this.hooks = new EventEmitter(['start', 'beforeMove', 'scrollStart', 'scroll', 'beforeEnd', 'end', 'scrollEnd', 'contentNotMoved', 'detectMovingDirection', 'coordinateTransformation']);\n    this.scrollBehaviorX = scrollBehaviorX;\n    this.scrollBehaviorY = scrollBehaviorY;\n    this.actionsHandler = actionsHandler;\n    this.animater = animater;\n    this.options = options;\n    this.directionLockAction = new DirectionLockAction(options.directionLockThreshold, options.freeScroll, options.eventPassthrough);\n    this.enabled = true;\n    this.bindActionsHandler();\n  }\n  ScrollerActions.prototype.bindActionsHandler = function () {\n    var _this = this;\n    // [mouse|touch]start event\n    this.actionsHandler.hooks.on(this.actionsHandler.hooks.eventTypes.start, function (e) {\n      if (!_this.enabled) return true;\n      return _this.handleStart(e);\n    });\n    // [mouse|touch]move event\n    this.actionsHandler.hooks.on(this.actionsHandler.hooks.eventTypes.move, function (_a) {\n      var deltaX = _a.deltaX,\n        deltaY = _a.deltaY,\n        e = _a.e;\n      if (!_this.enabled) return true;\n      var _b = applyQuadrantTransformation(deltaX, deltaY, _this.options.quadrant),\n        transformateDeltaX = _b[0],\n        transformateDeltaY = _b[1];\n      var transformateDeltaData = {\n        deltaX: transformateDeltaX,\n        deltaY: transformateDeltaY\n      };\n      _this.hooks.trigger(_this.hooks.eventTypes.coordinateTransformation, transformateDeltaData);\n      return _this.handleMove(transformateDeltaData.deltaX, transformateDeltaData.deltaY, e);\n    });\n    // [mouse|touch]end event\n    this.actionsHandler.hooks.on(this.actionsHandler.hooks.eventTypes.end, function (e) {\n      if (!_this.enabled) return true;\n      return _this.handleEnd(e);\n    });\n    // click\n    this.actionsHandler.hooks.on(this.actionsHandler.hooks.eventTypes.click, function (e) {\n      // handle native click event\n      if (_this.enabled && !e._constructed) {\n        _this.handleClick(e);\n      }\n    });\n  };\n  ScrollerActions.prototype.handleStart = function (e) {\n    var timestamp = getNow();\n    this.fingerMoved = false;\n    this.contentMoved = false;\n    this.startTime = timestamp;\n    this.directionLockAction.reset();\n    this.scrollBehaviorX.start();\n    this.scrollBehaviorY.start();\n    // force stopping last transition or animation\n    this.animater.doStop();\n    this.scrollBehaviorX.resetStartPos();\n    this.scrollBehaviorY.resetStartPos();\n    this.hooks.trigger(this.hooks.eventTypes.start, e);\n  };\n  ScrollerActions.prototype.handleMove = function (deltaX, deltaY, e) {\n    if (this.hooks.trigger(this.hooks.eventTypes.beforeMove, e)) {\n      return;\n    }\n    var absDistX = this.scrollBehaviorX.getAbsDist(deltaX);\n    var absDistY = this.scrollBehaviorY.getAbsDist(deltaY);\n    var timestamp = getNow();\n    // We need to move at least momentumLimitDistance pixels\n    // for the scrolling to initiate\n    if (this.checkMomentum(absDistX, absDistY, timestamp)) {\n      return true;\n    }\n    if (this.directionLockAction.checkMovingDirection(absDistX, absDistY, e)) {\n      this.actionsHandler.setInitiated();\n      return true;\n    }\n    var delta = this.directionLockAction.adjustDelta(deltaX, deltaY);\n    var prevX = this.scrollBehaviorX.getCurrentPos();\n    var newX = this.scrollBehaviorX.move(delta.deltaX);\n    var prevY = this.scrollBehaviorY.getCurrentPos();\n    var newY = this.scrollBehaviorY.move(delta.deltaY);\n    if (this.hooks.trigger(this.hooks.eventTypes.detectMovingDirection)) {\n      return;\n    }\n    if (!this.fingerMoved) {\n      this.fingerMoved = true;\n    }\n    var positionChanged = newX !== prevX || newY !== prevY;\n    if (!this.contentMoved && !positionChanged) {\n      this.hooks.trigger(this.hooks.eventTypes.contentNotMoved);\n    }\n    if (!this.contentMoved && positionChanged) {\n      this.contentMoved = true;\n      this.hooks.trigger(this.hooks.eventTypes.scrollStart);\n    }\n    if (this.contentMoved && positionChanged) {\n      this.animater.translate({\n        x: newX,\n        y: newY\n      });\n      this.dispatchScroll(timestamp);\n    }\n  };\n  ScrollerActions.prototype.dispatchScroll = function (timestamp) {\n    // dispatch scroll in interval time\n    if (timestamp - this.startTime > this.options.momentumLimitTime) {\n      // refresh time and starting position to initiate a momentum\n      this.startTime = timestamp;\n      this.scrollBehaviorX.updateStartPos();\n      this.scrollBehaviorY.updateStartPos();\n      if (this.options.probeType === 1 /* Throttle */) {\n        this.hooks.trigger(this.hooks.eventTypes.scroll, this.getCurrentPos());\n      }\n    }\n    // dispatch scroll all the time\n    if (this.options.probeType > 1 /* Throttle */) {\n      this.hooks.trigger(this.hooks.eventTypes.scroll, this.getCurrentPos());\n    }\n  };\n  ScrollerActions.prototype.checkMomentum = function (absDistX, absDistY, timestamp) {\n    return timestamp - this.endTime > this.options.momentumLimitTime && absDistY < this.options.momentumLimitDistance && absDistX < this.options.momentumLimitDistance;\n  };\n  ScrollerActions.prototype.handleEnd = function (e) {\n    if (this.hooks.trigger(this.hooks.eventTypes.beforeEnd, e)) {\n      return;\n    }\n    var currentPos = this.getCurrentPos();\n    this.scrollBehaviorX.updateDirection();\n    this.scrollBehaviorY.updateDirection();\n    if (this.hooks.trigger(this.hooks.eventTypes.end, e, currentPos)) {\n      return true;\n    }\n    currentPos = this.ensureIntegerPos(currentPos);\n    this.animater.translate(currentPos);\n    this.endTime = getNow();\n    var duration = this.endTime - this.startTime;\n    this.hooks.trigger(this.hooks.eventTypes.scrollEnd, currentPos, duration);\n  };\n  ScrollerActions.prototype.ensureIntegerPos = function (currentPos) {\n    this.ensuringInteger = true;\n    var x = currentPos.x,\n      y = currentPos.y;\n    var _a = this.scrollBehaviorX,\n      minScrollPosX = _a.minScrollPos,\n      maxScrollPosX = _a.maxScrollPos;\n    var _b = this.scrollBehaviorY,\n      minScrollPosY = _b.minScrollPos,\n      maxScrollPosY = _b.maxScrollPos;\n    x = x > 0 ? Math.ceil(x) : Math.floor(x);\n    y = y > 0 ? Math.ceil(y) : Math.floor(y);\n    x = between(x, maxScrollPosX, minScrollPosX);\n    y = between(y, maxScrollPosY, minScrollPosY);\n    return {\n      x: x,\n      y: y\n    };\n  };\n  ScrollerActions.prototype.handleClick = function (e) {\n    if (!preventDefaultExceptionFn(e.target, this.options.preventDefaultException)) {\n      maybePrevent(e);\n      e.stopPropagation();\n    }\n  };\n  ScrollerActions.prototype.getCurrentPos = function () {\n    return {\n      x: this.scrollBehaviorX.getCurrentPos(),\n      y: this.scrollBehaviorY.getCurrentPos()\n    };\n  };\n  ScrollerActions.prototype.refresh = function () {\n    this.endTime = 0;\n  };\n  ScrollerActions.prototype.destroy = function () {\n    this.hooks.destroy();\n  };\n  return ScrollerActions;\n}();\nfunction createActionsHandlerOptions(bsOptions) {\n  var options = ['click', 'bindToWrapper', 'disableMouse', 'disableTouch', 'preventDefault', 'stopPropagation', 'tagException', 'preventDefaultException', 'autoEndDistance'].reduce(function (prev, cur) {\n    prev[cur] = bsOptions[cur];\n    return prev;\n  }, {});\n  return options;\n}\nfunction createBehaviorOptions(bsOptions, extraProp, bounces, rect) {\n  var options = ['momentum', 'momentumLimitTime', 'momentumLimitDistance', 'deceleration', 'swipeBounceTime', 'swipeTime', 'outOfBoundaryDampingFactor', 'specifiedIndexAsContent'].reduce(function (prev, cur) {\n    prev[cur] = bsOptions[cur];\n    return prev;\n  }, {});\n  // add extra property\n  options.scrollable = !!bsOptions[extraProp];\n  options.bounces = bounces;\n  options.rect = rect;\n  return options;\n}\nfunction bubbling(source, target, events) {\n  events.forEach(function (event) {\n    var sourceEvent;\n    var targetEvent;\n    if (typeof event === 'string') {\n      sourceEvent = targetEvent = event;\n    } else {\n      sourceEvent = event.source;\n      targetEvent = event.target;\n    }\n    source.on(sourceEvent, function () {\n      var args = [];\n      for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n      }\n      return target.trigger.apply(target, __spreadArrays([targetEvent], args));\n    });\n  });\n}\nfunction isSamePoint(startPoint, endPoint) {\n  // keys of startPoint and endPoint should be equal\n  var keys = Object.keys(startPoint);\n  for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {\n    var key = keys_1[_i];\n    if (startPoint[key] !== endPoint[key]) return false;\n  }\n  return true;\n}\nvar MIN_SCROLL_DISTANCE = 1;\nvar Scroller = /** @class */function () {\n  function Scroller(wrapper, content, options) {\n    this.wrapper = wrapper;\n    this.content = content;\n    this.resizeTimeout = 0;\n    this.hooks = new EventEmitter(['beforeStart', 'beforeMove', 'beforeScrollStart', 'scrollStart', 'scroll', 'beforeEnd', 'scrollEnd', 'resize', 'touchEnd', 'end', 'flick', 'scrollCancel', 'momentum', 'scrollTo', 'minDistanceScroll', 'scrollToElement', 'beforeRefresh']);\n    this.options = options;\n    var _a = this.options.bounce,\n      left = _a.left,\n      right = _a.right,\n      top = _a.top,\n      bottom = _a.bottom;\n    // direction X\n    this.scrollBehaviorX = new Behavior(wrapper, content, createBehaviorOptions(options, 'scrollX', [left, right], {\n      size: 'width',\n      position: 'left'\n    }));\n    // direction Y\n    this.scrollBehaviorY = new Behavior(wrapper, content, createBehaviorOptions(options, 'scrollY', [top, bottom], {\n      size: 'height',\n      position: 'top'\n    }));\n    this.translater = new Translater(this.content);\n    this.animater = createAnimater(this.content, this.translater, this.options);\n    this.actionsHandler = new ActionsHandler(this.options.bindToTarget ? this.content : wrapper, createActionsHandlerOptions(this.options));\n    this.actions = new ScrollerActions(this.scrollBehaviorX, this.scrollBehaviorY, this.actionsHandler, this.animater, this.options);\n    var resizeHandler = this.resize.bind(this);\n    this.resizeRegister = new EventRegister(window, [{\n      name: 'orientationchange',\n      handler: resizeHandler\n    }, {\n      name: 'resize',\n      handler: resizeHandler\n    }]);\n    this.registerTransitionEnd();\n    this.init();\n  }\n  Scroller.prototype.init = function () {\n    var _this = this;\n    this.bindTranslater();\n    this.bindAnimater();\n    this.bindActions();\n    // enable pointer events when scrolling ends\n    this.hooks.on(this.hooks.eventTypes.scrollEnd, function () {\n      _this.togglePointerEvents(true);\n    });\n  };\n  Scroller.prototype.registerTransitionEnd = function () {\n    this.transitionEndRegister = new EventRegister(this.content, [{\n      name: style.transitionEnd,\n      handler: this.transitionEnd.bind(this)\n    }]);\n  };\n  Scroller.prototype.bindTranslater = function () {\n    var _this = this;\n    var hooks = this.translater.hooks;\n    hooks.on(hooks.eventTypes.beforeTranslate, function (transformStyle) {\n      if (_this.options.translateZ) {\n        transformStyle.push(_this.options.translateZ);\n      }\n    });\n    // disable pointer events when scrolling\n    hooks.on(hooks.eventTypes.translate, function (pos) {\n      var prevPos = _this.getCurrentPos();\n      _this.updatePositions(pos);\n      // scrollEnd will dispatch when scroll is force stopping in touchstart handler\n      // so in touchend handler, don't toggle pointer-events\n      if (_this.actions.ensuringInteger === true) {\n        _this.actions.ensuringInteger = false;\n        return;\n      }\n      // a valid translate\n      if (pos.x !== prevPos.x || pos.y !== prevPos.y) {\n        _this.togglePointerEvents(false);\n      }\n    });\n  };\n  Scroller.prototype.bindAnimater = function () {\n    var _this = this;\n    // reset position\n    this.animater.hooks.on(this.animater.hooks.eventTypes.end, function (pos) {\n      if (!_this.resetPosition(_this.options.bounceTime)) {\n        _this.animater.setPending(false);\n        _this.hooks.trigger(_this.hooks.eventTypes.scrollEnd, pos);\n      }\n    });\n    bubbling(this.animater.hooks, this.hooks, [{\n      source: this.animater.hooks.eventTypes.move,\n      target: this.hooks.eventTypes.scroll\n    }, {\n      source: this.animater.hooks.eventTypes.forceStop,\n      target: this.hooks.eventTypes.scrollEnd\n    }]);\n  };\n  Scroller.prototype.bindActions = function () {\n    var _this = this;\n    var actions = this.actions;\n    bubbling(actions.hooks, this.hooks, [{\n      source: actions.hooks.eventTypes.start,\n      target: this.hooks.eventTypes.beforeStart\n    }, {\n      source: actions.hooks.eventTypes.start,\n      target: this.hooks.eventTypes.beforeScrollStart\n    }, {\n      source: actions.hooks.eventTypes.beforeMove,\n      target: this.hooks.eventTypes.beforeMove\n    }, {\n      source: actions.hooks.eventTypes.scrollStart,\n      target: this.hooks.eventTypes.scrollStart\n    }, {\n      source: actions.hooks.eventTypes.scroll,\n      target: this.hooks.eventTypes.scroll\n    }, {\n      source: actions.hooks.eventTypes.beforeEnd,\n      target: this.hooks.eventTypes.beforeEnd\n    }]);\n    actions.hooks.on(actions.hooks.eventTypes.end, function (e, pos) {\n      _this.hooks.trigger(_this.hooks.eventTypes.touchEnd, pos);\n      if (_this.hooks.trigger(_this.hooks.eventTypes.end, pos)) {\n        return true;\n      }\n      // check if it is a click operation\n      if (!actions.fingerMoved) {\n        _this.hooks.trigger(_this.hooks.eventTypes.scrollCancel);\n        if (_this.checkClick(e)) {\n          return true;\n        }\n      }\n      // reset if we are outside of the boundaries\n      if (_this.resetPosition(_this.options.bounceTime, ease.bounce)) {\n        _this.animater.setForceStopped(false);\n        return true;\n      }\n    });\n    actions.hooks.on(actions.hooks.eventTypes.scrollEnd, function (pos, duration) {\n      var deltaX = Math.abs(pos.x - _this.scrollBehaviorX.startPos);\n      var deltaY = Math.abs(pos.y - _this.scrollBehaviorY.startPos);\n      if (_this.checkFlick(duration, deltaX, deltaY)) {\n        _this.animater.setForceStopped(false);\n        _this.hooks.trigger(_this.hooks.eventTypes.flick);\n        return;\n      }\n      if (_this.momentum(pos, duration)) {\n        _this.animater.setForceStopped(false);\n        return;\n      }\n      if (actions.contentMoved) {\n        _this.hooks.trigger(_this.hooks.eventTypes.scrollEnd, pos);\n      }\n      if (_this.animater.forceStopped) {\n        _this.animater.setForceStopped(false);\n      }\n    });\n  };\n  Scroller.prototype.checkFlick = function (duration, deltaX, deltaY) {\n    var flickMinMovingDistance = 1; // distinguish flick from click\n    if (this.hooks.events.flick.length > 1 && duration < this.options.flickLimitTime && deltaX < this.options.flickLimitDistance && deltaY < this.options.flickLimitDistance && (deltaY > flickMinMovingDistance || deltaX > flickMinMovingDistance)) {\n      return true;\n    }\n  };\n  Scroller.prototype.momentum = function (pos, duration) {\n    var meta = {\n      time: 0,\n      easing: ease.swiper,\n      newX: pos.x,\n      newY: pos.y\n    };\n    // start momentum animation if needed\n    var momentumX = this.scrollBehaviorX.end(duration);\n    var momentumY = this.scrollBehaviorY.end(duration);\n    meta.newX = isUndef(momentumX.destination) ? meta.newX : momentumX.destination;\n    meta.newY = isUndef(momentumY.destination) ? meta.newY : momentumY.destination;\n    meta.time = Math.max(momentumX.duration, momentumY.duration);\n    this.hooks.trigger(this.hooks.eventTypes.momentum, meta, this);\n    // when x or y changed, do momentum animation now!\n    if (meta.newX !== pos.x || meta.newY !== pos.y) {\n      // change easing function when scroller goes out of the boundaries\n      if (meta.newX > this.scrollBehaviorX.minScrollPos || meta.newX < this.scrollBehaviorX.maxScrollPos || meta.newY > this.scrollBehaviorY.minScrollPos || meta.newY < this.scrollBehaviorY.maxScrollPos) {\n        meta.easing = ease.swipeBounce;\n      }\n      this.scrollTo(meta.newX, meta.newY, meta.time, meta.easing);\n      return true;\n    }\n  };\n  Scroller.prototype.checkClick = function (e) {\n    var cancelable = {\n      preventClick: this.animater.forceStopped\n    };\n    // we scrolled less than momentumLimitDistance pixels\n    if (this.hooks.trigger(this.hooks.eventTypes.checkClick)) {\n      this.animater.setForceStopped(false);\n      return true;\n    }\n    if (!cancelable.preventClick) {\n      var _dblclick = this.options.dblclick;\n      var dblclickTrigged = false;\n      if (_dblclick && this.lastClickTime) {\n        var _a = _dblclick.delay,\n          delay = _a === void 0 ? 300 : _a;\n        if (getNow() - this.lastClickTime < delay) {\n          dblclickTrigged = true;\n          dblclick(e);\n        }\n      }\n      if (this.options.tap) {\n        tap(e, this.options.tap);\n      }\n      if (this.options.click && !preventDefaultExceptionFn(e.target, this.options.preventDefaultException)) {\n        click(e);\n      }\n      this.lastClickTime = dblclickTrigged ? null : getNow();\n      return true;\n    }\n    return false;\n  };\n  Scroller.prototype.resize = function () {\n    var _this = this;\n    if (!this.actions.enabled) {\n      return;\n    }\n    // fix a scroll problem under Android condition\n    /* istanbul ignore if  */\n    if (isAndroid) {\n      this.wrapper.scrollTop = 0;\n    }\n    clearTimeout(this.resizeTimeout);\n    this.resizeTimeout = window.setTimeout(function () {\n      _this.hooks.trigger(_this.hooks.eventTypes.resize);\n    }, this.options.resizePolling);\n  };\n  /* istanbul ignore next */\n  Scroller.prototype.transitionEnd = function (e) {\n    if (e.target !== this.content || !this.animater.pending) {\n      return;\n    }\n    var animater = this.animater;\n    animater.transitionTime();\n    if (!this.resetPosition(this.options.bounceTime, ease.bounce)) {\n      this.animater.setPending(false);\n      if (this.options.probeType !== 3 /* Realtime */) {\n        this.hooks.trigger(this.hooks.eventTypes.scrollEnd, this.getCurrentPos());\n      }\n    }\n  };\n  Scroller.prototype.togglePointerEvents = function (enabled) {\n    if (enabled === void 0) {\n      enabled = true;\n    }\n    var el = this.content.children.length ? this.content.children : [this.content];\n    var pointerEvents = enabled ? 'auto' : 'none';\n    for (var i = 0; i < el.length; i++) {\n      var node = el[i];\n      // ignore BetterScroll instance's wrapper DOM\n      /* istanbul ignore if  */\n      if (node.isBScrollContainer) {\n        continue;\n      }\n      node.style.pointerEvents = pointerEvents;\n    }\n  };\n  Scroller.prototype.refresh = function (content) {\n    var contentChanged = this.setContent(content);\n    this.hooks.trigger(this.hooks.eventTypes.beforeRefresh);\n    this.scrollBehaviorX.refresh(content);\n    this.scrollBehaviorY.refresh(content);\n    if (contentChanged) {\n      this.translater.setContent(content);\n      this.animater.setContent(content);\n      this.transitionEndRegister.destroy();\n      this.registerTransitionEnd();\n      if (this.options.bindToTarget) {\n        this.actionsHandler.setContent(content);\n      }\n    }\n    this.actions.refresh();\n    this.wrapperOffset = offset(this.wrapper);\n  };\n  Scroller.prototype.setContent = function (content) {\n    var contentChanged = content !== this.content;\n    if (contentChanged) {\n      this.content = content;\n    }\n    return contentChanged;\n  };\n  Scroller.prototype.scrollBy = function (deltaX, deltaY, time, easing) {\n    if (time === void 0) {\n      time = 0;\n    }\n    var _a = this.getCurrentPos(),\n      x = _a.x,\n      y = _a.y;\n    easing = !easing ? ease.bounce : easing;\n    deltaX += x;\n    deltaY += y;\n    this.scrollTo(deltaX, deltaY, time, easing);\n  };\n  Scroller.prototype.scrollTo = function (x, y, time, easing, extraTransform) {\n    if (time === void 0) {\n      time = 0;\n    }\n    if (easing === void 0) {\n      easing = ease.bounce;\n    }\n    if (extraTransform === void 0) {\n      extraTransform = {\n        start: {},\n        end: {}\n      };\n    }\n    var easingFn = this.options.useTransition ? easing.style : easing.fn;\n    var currentPos = this.getCurrentPos();\n    var startPoint = _assign({\n      x: currentPos.x,\n      y: currentPos.y\n    }, extraTransform.start);\n    var endPoint = _assign({\n      x: x,\n      y: y\n    }, extraTransform.end);\n    this.hooks.trigger(this.hooks.eventTypes.scrollTo, endPoint);\n    // it is an useless move\n    if (isSamePoint(startPoint, endPoint)) return;\n    var deltaX = Math.abs(endPoint.x - startPoint.x);\n    var deltaY = Math.abs(endPoint.y - startPoint.y);\n    // considering of browser compatibility for decimal transform value\n    // force translating immediately\n    if (deltaX < MIN_SCROLL_DISTANCE && deltaY < MIN_SCROLL_DISTANCE) {\n      time = 0;\n      this.hooks.trigger(this.hooks.eventTypes.minDistanceScroll);\n    }\n    this.animater.move(startPoint, endPoint, time, easingFn);\n  };\n  Scroller.prototype.scrollToElement = function (el, time, offsetX, offsetY, easing) {\n    var targetEle = getElement(el);\n    var pos = offset(targetEle);\n    var getOffset = function getOffset(offset, size, wrapperSize) {\n      if (typeof offset === 'number') {\n        return offset;\n      }\n      // if offsetX/Y are true we center the element to the screen\n      return offset ? Math.round(size / 2 - wrapperSize / 2) : 0;\n    };\n    offsetX = getOffset(offsetX, targetEle.offsetWidth, this.wrapper.offsetWidth);\n    offsetY = getOffset(offsetY, targetEle.offsetHeight, this.wrapper.offsetHeight);\n    var getPos = function getPos(pos, wrapperPos, offset, scrollBehavior) {\n      pos -= wrapperPos;\n      pos = scrollBehavior.adjustPosition(pos - offset);\n      return pos;\n    };\n    pos.left = getPos(pos.left, this.wrapperOffset.left, offsetX, this.scrollBehaviorX);\n    pos.top = getPos(pos.top, this.wrapperOffset.top, offsetY, this.scrollBehaviorY);\n    if (this.hooks.trigger(this.hooks.eventTypes.scrollToElement, targetEle, pos)) {\n      return;\n    }\n    this.scrollTo(pos.left, pos.top, time, easing);\n  };\n  Scroller.prototype.resetPosition = function (time, easing) {\n    if (time === void 0) {\n      time = 0;\n    }\n    if (easing === void 0) {\n      easing = ease.bounce;\n    }\n    var _a = this.scrollBehaviorX.checkInBoundary(),\n      x = _a.position,\n      xInBoundary = _a.inBoundary;\n    var _b = this.scrollBehaviorY.checkInBoundary(),\n      y = _b.position,\n      yInBoundary = _b.inBoundary;\n    if (xInBoundary && yInBoundary) {\n      return false;\n    }\n    /* istanbul ignore if  */\n    if (isIOSBadVersion) {\n      // fix ios 13.4 bouncing\n      // see it in issues 982\n      this.reflow();\n    }\n    // out of boundary\n    this.scrollTo(x, y, time, easing);\n    return true;\n  };\n  /* istanbul ignore next */\n  Scroller.prototype.reflow = function () {\n    this._reflow = this.content.offsetHeight;\n  };\n  Scroller.prototype.updatePositions = function (pos) {\n    this.scrollBehaviorX.updatePosition(pos.x);\n    this.scrollBehaviorY.updatePosition(pos.y);\n  };\n  Scroller.prototype.getCurrentPos = function () {\n    return this.actions.getCurrentPos();\n  };\n  Scroller.prototype.enable = function () {\n    this.actions.enabled = true;\n  };\n  Scroller.prototype.disable = function () {\n    cancelAnimationFrame(this.animater.timer);\n    this.actions.enabled = false;\n  };\n  Scroller.prototype.destroy = function () {\n    var _this = this;\n    var keys = ['resizeRegister', 'transitionEndRegister', 'actionsHandler', 'actions', 'hooks', 'animater', 'translater', 'scrollBehaviorX', 'scrollBehaviorY'];\n    keys.forEach(function (key) {\n      return _this[key].destroy();\n    });\n  };\n  return Scroller;\n}();\nvar BScrollConstructor = /** @class */function (_super) {\n  __extends(BScrollConstructor, _super);\n  function BScrollConstructor(el, options) {\n    var _this = _super.call(this, ['refresh', 'contentChanged', 'enable', 'disable', 'beforeScrollStart', 'scrollStart', 'scroll', 'scrollEnd', 'scrollCancel', 'touchEnd', 'flick', 'destroy']) || this;\n    var wrapper = getElement(el);\n    if (!wrapper) {\n      warn('Can not resolve the wrapper DOM.');\n      return _this;\n    }\n    _this.plugins = {};\n    _this.options = new OptionsConstructor().merge(options).process();\n    if (!_this.setContent(wrapper).valid) {\n      return _this;\n    }\n    _this.hooks = new EventEmitter(['refresh', 'enable', 'disable', 'destroy', 'beforeInitialScrollTo', 'contentChanged']);\n    _this.init(wrapper);\n    return _this;\n  }\n  BScrollConstructor.use = function (ctor) {\n    var name = ctor.pluginName;\n    var installed = BScrollConstructor.plugins.some(function (plugin) {\n      return ctor === plugin.ctor;\n    });\n    if (installed) return BScrollConstructor;\n    if (isUndef(name)) {\n      warn(\"Plugin Class must specify plugin's name in static property by 'pluginName' field.\");\n      return BScrollConstructor;\n    }\n    BScrollConstructor.pluginsMap[name] = true;\n    BScrollConstructor.plugins.push({\n      name: name,\n      applyOrder: ctor.applyOrder,\n      ctor: ctor\n    });\n    return BScrollConstructor;\n  };\n  BScrollConstructor.prototype.setContent = function (wrapper) {\n    var contentChanged = false;\n    var valid = true;\n    var content = wrapper.children[this.options.specifiedIndexAsContent];\n    if (!content) {\n      warn('The wrapper need at least one child element to be content element to scroll.');\n      valid = false;\n    } else {\n      contentChanged = this.content !== content;\n      if (contentChanged) {\n        this.content = content;\n      }\n    }\n    return {\n      valid: valid,\n      contentChanged: contentChanged\n    };\n  };\n  BScrollConstructor.prototype.init = function (wrapper) {\n    var _this = this;\n    this.wrapper = wrapper;\n    // mark wrapper to recognize bs instance by DOM attribute\n    wrapper.isBScrollContainer = true;\n    this.scroller = new Scroller(wrapper, this.content, this.options);\n    this.scroller.hooks.on(this.scroller.hooks.eventTypes.resize, function () {\n      _this.refresh();\n    });\n    this.eventBubbling();\n    this.handleAutoBlur();\n    this.enable();\n    this.proxy(propertiesConfig$7);\n    this.applyPlugins();\n    // maybe boundary has changed, should refresh\n    this.refreshWithoutReset(this.content);\n    var _a = this.options,\n      startX = _a.startX,\n      startY = _a.startY;\n    var position = {\n      x: startX,\n      y: startY\n    };\n    // maybe plugins want to control scroll position\n    if (this.hooks.trigger(this.hooks.eventTypes.beforeInitialScrollTo, position)) {\n      return;\n    }\n    this.scroller.scrollTo(position.x, position.y);\n  };\n  BScrollConstructor.prototype.applyPlugins = function () {\n    var _this = this;\n    var options = this.options;\n    BScrollConstructor.plugins.sort(function (a, b) {\n      var _a;\n      var applyOrderMap = (_a = {}, _a[\"pre\" /* Pre */] = -1, _a[\"post\" /* Post */] = 1, _a);\n      var aOrder = a.applyOrder ? applyOrderMap[a.applyOrder] : 0;\n      var bOrder = b.applyOrder ? applyOrderMap[b.applyOrder] : 0;\n      return aOrder - bOrder;\n    }).forEach(function (item) {\n      var ctor = item.ctor;\n      if (options[item.name] && typeof ctor === 'function') {\n        _this.plugins[item.name] = new ctor(_this);\n      }\n    });\n  };\n  BScrollConstructor.prototype.handleAutoBlur = function () {\n    /* istanbul ignore if  */\n    if (this.options.autoBlur) {\n      this.on(this.eventTypes.beforeScrollStart, function () {\n        var activeElement = document.activeElement;\n        if (activeElement && (activeElement.tagName === 'INPUT' || activeElement.tagName === 'TEXTAREA')) {\n          activeElement.blur();\n        }\n      });\n    }\n  };\n  BScrollConstructor.prototype.eventBubbling = function () {\n    bubbling(this.scroller.hooks, this, [this.eventTypes.beforeScrollStart, this.eventTypes.scrollStart, this.eventTypes.scroll, this.eventTypes.scrollEnd, this.eventTypes.scrollCancel, this.eventTypes.touchEnd, this.eventTypes.flick]);\n  };\n  BScrollConstructor.prototype.refreshWithoutReset = function (content) {\n    this.scroller.refresh(content);\n    this.hooks.trigger(this.hooks.eventTypes.refresh, content);\n    this.trigger(this.eventTypes.refresh, content);\n  };\n  BScrollConstructor.prototype.proxy = function (propertiesConfig) {\n    var _this = this;\n    propertiesConfig.forEach(function (_a) {\n      var key = _a.key,\n        sourceKey = _a.sourceKey;\n      propertiesProxy(_this, sourceKey, key);\n    });\n  };\n  BScrollConstructor.prototype.refresh = function () {\n    var _a = this.setContent(this.wrapper),\n      contentChanged = _a.contentChanged,\n      valid = _a.valid;\n    if (valid) {\n      var content = this.content;\n      this.refreshWithoutReset(content);\n      if (contentChanged) {\n        this.hooks.trigger(this.hooks.eventTypes.contentChanged, content);\n        this.trigger(this.eventTypes.contentChanged, content);\n      }\n      this.scroller.resetPosition();\n    }\n  };\n  BScrollConstructor.prototype.enable = function () {\n    this.scroller.enable();\n    this.hooks.trigger(this.hooks.eventTypes.enable);\n    this.trigger(this.eventTypes.enable);\n  };\n  BScrollConstructor.prototype.disable = function () {\n    this.scroller.disable();\n    this.hooks.trigger(this.hooks.eventTypes.disable);\n    this.trigger(this.eventTypes.disable);\n  };\n  BScrollConstructor.prototype.destroy = function () {\n    this.hooks.trigger(this.hooks.eventTypes.destroy);\n    this.trigger(this.eventTypes.destroy);\n    this.scroller.destroy();\n  };\n  BScrollConstructor.prototype.eventRegister = function (names) {\n    this.registerType(names);\n  };\n  BScrollConstructor.plugins = [];\n  BScrollConstructor.pluginsMap = {};\n  return BScrollConstructor;\n}(EventEmitter);\nfunction createBScroll(el, options) {\n  var bs = new BScrollConstructor(el, options);\n  return bs;\n}\ncreateBScroll.use = BScrollConstructor.use;\ncreateBScroll.plugins = BScrollConstructor.plugins;\ncreateBScroll.pluginsMap = BScrollConstructor.pluginsMap;\nvar BScroll = createBScroll;\nvar MouseWheel = /** @class */function () {\n  function MouseWheel(scroll) {\n    this.scroll = scroll;\n    this.wheelEndTimer = 0;\n    this.wheelMoveTimer = 0;\n    this.wheelStart = false;\n    this.init();\n  }\n  MouseWheel.prototype.init = function () {\n    this.handleBScroll();\n    this.handleOptions();\n    this.handleHooks();\n    this.registerEvent();\n  };\n  MouseWheel.prototype.handleBScroll = function () {\n    this.scroll.registerType(['alterOptions', 'mousewheelStart', 'mousewheelMove', 'mousewheelEnd']);\n  };\n  MouseWheel.prototype.handleOptions = function () {\n    var userOptions = this.scroll.options.mouseWheel === true ? {} : this.scroll.options.mouseWheel;\n    var defaultOptions = {\n      speed: 20,\n      invert: false,\n      easeTime: 300,\n      discreteTime: 400,\n      throttleTime: 0,\n      dampingFactor: 0.1\n    };\n    this.mouseWheelOpt = extend(defaultOptions, userOptions);\n  };\n  MouseWheel.prototype.handleHooks = function () {\n    this.hooksFn = [];\n    this.registerHooks(this.scroll.hooks, 'destroy', this.destroy);\n  };\n  MouseWheel.prototype.registerEvent = function () {\n    this.eventRegister = new EventRegister(this.scroll.scroller.wrapper, [{\n      name: 'wheel',\n      handler: this.wheelHandler.bind(this)\n    }, {\n      name: 'mousewheel',\n      handler: this.wheelHandler.bind(this)\n    }, {\n      name: 'DOMMouseScroll',\n      handler: this.wheelHandler.bind(this)\n    }]);\n  };\n  MouseWheel.prototype.registerHooks = function (hooks, name, handler) {\n    hooks.on(name, handler, this);\n    this.hooksFn.push([hooks, name, handler]);\n  };\n  MouseWheel.prototype.wheelHandler = function (e) {\n    if (!this.scroll.enabled) {\n      return;\n    }\n    this.beforeHandler(e);\n    // start\n    if (!this.wheelStart) {\n      this.wheelStartHandler(e);\n      this.wheelStart = true;\n    }\n    // move\n    var delta = this.getWheelDelta(e);\n    this.wheelMoveHandler(delta);\n    // end\n    this.wheelEndDetector(delta);\n  };\n  MouseWheel.prototype.wheelStartHandler = function (e) {\n    this.cleanCache();\n    var _a = this.scroll.scroller,\n      scrollBehaviorX = _a.scrollBehaviorX,\n      scrollBehaviorY = _a.scrollBehaviorY;\n    scrollBehaviorX.setMovingDirection(0 /* Default */);\n    scrollBehaviorY.setMovingDirection(0 /* Default */);\n    scrollBehaviorX.setDirection(0 /* Default */);\n    scrollBehaviorY.setDirection(0 /* Default */);\n    this.scroll.trigger(this.scroll.eventTypes.alterOptions, this.mouseWheelOpt);\n    this.scroll.trigger(this.scroll.eventTypes.mousewheelStart);\n  };\n  MouseWheel.prototype.cleanCache = function () {\n    this.deltaCache = [];\n  };\n  MouseWheel.prototype.wheelMoveHandler = function (delta) {\n    var _this = this;\n    var _a = this.mouseWheelOpt,\n      throttleTime = _a.throttleTime,\n      dampingFactor = _a.dampingFactor;\n    if (throttleTime && this.wheelMoveTimer) {\n      this.deltaCache.push(delta);\n    } else {\n      var cachedDelta = this.deltaCache.reduce(function (prev, current) {\n        return {\n          x: prev.x + current.x,\n          y: prev.y + current.y\n        };\n      }, {\n        x: 0,\n        y: 0\n      });\n      this.cleanCache();\n      var _b = this.scroll.scroller,\n        scrollBehaviorX = _b.scrollBehaviorX,\n        scrollBehaviorY = _b.scrollBehaviorY;\n      scrollBehaviorX.setMovingDirection(-delta.directionX);\n      scrollBehaviorY.setMovingDirection(-delta.directionY);\n      scrollBehaviorX.setDirection(delta.x);\n      scrollBehaviorY.setDirection(delta.y);\n      // when out of boundary, perform a damping scroll\n      var newX = scrollBehaviorX.performDampingAlgorithm(Math.round(delta.x) + cachedDelta.x, dampingFactor);\n      var newY = scrollBehaviorY.performDampingAlgorithm(Math.round(delta.y) + cachedDelta.x, dampingFactor);\n      if (!this.scroll.trigger(this.scroll.eventTypes.mousewheelMove, {\n        x: newX,\n        y: newY\n      })) {\n        var easeTime = this.getEaseTime();\n        if (newX !== this.scroll.x || newY !== this.scroll.y) {\n          this.scroll.scrollTo(newX, newY, easeTime);\n        }\n      }\n      if (throttleTime) {\n        this.wheelMoveTimer = window.setTimeout(function () {\n          _this.wheelMoveTimer = 0;\n        }, throttleTime);\n      }\n    }\n  };\n  MouseWheel.prototype.wheelEndDetector = function (delta) {\n    var _this = this;\n    window.clearTimeout(this.wheelEndTimer);\n    this.wheelEndTimer = window.setTimeout(function () {\n      _this.wheelStart = false;\n      window.clearTimeout(_this.wheelMoveTimer);\n      _this.wheelMoveTimer = 0;\n      _this.scroll.trigger(_this.scroll.eventTypes.mousewheelEnd, delta);\n    }, this.mouseWheelOpt.discreteTime);\n  };\n  MouseWheel.prototype.getWheelDelta = function (e) {\n    var _a = this.mouseWheelOpt,\n      speed = _a.speed,\n      invert = _a.invert;\n    var wheelDeltaX = 0;\n    var wheelDeltaY = 0;\n    var direction = invert ? -1 /* Negative */ : 1 /* Positive */;\n    switch (true) {\n      case 'deltaX' in e:\n        if (e.deltaMode === 1) {\n          wheelDeltaX = -e.deltaX * speed;\n          wheelDeltaY = -e.deltaY * speed;\n        } else {\n          wheelDeltaX = -e.deltaX;\n          wheelDeltaY = -e.deltaY;\n        }\n        break;\n      case 'wheelDeltaX' in e:\n        wheelDeltaX = e.wheelDeltaX / 120 * speed;\n        wheelDeltaY = e.wheelDeltaY / 120 * speed;\n        break;\n      case 'wheelDelta' in e:\n        wheelDeltaX = wheelDeltaY = e.wheelDelta / 120 * speed;\n        break;\n      case 'detail' in e:\n        wheelDeltaX = wheelDeltaY = -e.detail / 3 * speed;\n        break;\n    }\n    wheelDeltaX *= direction;\n    wheelDeltaY *= direction;\n    if (!this.scroll.hasVerticalScroll) {\n      if (Math.abs(wheelDeltaY) > Math.abs(wheelDeltaX)) {\n        wheelDeltaX = wheelDeltaY;\n      }\n      wheelDeltaY = 0;\n    }\n    if (!this.scroll.hasHorizontalScroll) {\n      wheelDeltaX = 0;\n    }\n    var directionX = wheelDeltaX > 0 ? -1 /* Negative */ : wheelDeltaX < 0 ? 1 /* Positive */ : 0 /* Default */;\n    var directionY = wheelDeltaY > 0 ? -1 /* Negative */ : wheelDeltaY < 0 ? 1 /* Positive */ : 0 /* Default */;\n    return {\n      x: wheelDeltaX,\n      y: wheelDeltaY,\n      directionX: directionX,\n      directionY: directionY\n    };\n  };\n  MouseWheel.prototype.beforeHandler = function (e) {\n    var _a = this.scroll.options,\n      preventDefault = _a.preventDefault,\n      stopPropagation = _a.stopPropagation,\n      preventDefaultException = _a.preventDefaultException;\n    if (preventDefault && !preventDefaultExceptionFn(e.target, preventDefaultException)) {\n      maybePrevent(e);\n    }\n    if (stopPropagation) {\n      e.stopPropagation();\n    }\n  };\n  MouseWheel.prototype.getEaseTime = function () {\n    var SAFE_EASETIME = 100;\n    var easeTime = this.mouseWheelOpt.easeTime;\n    // scrollEnd event will be triggered in every calling of scrollTo when easeTime is too small\n    // easeTime needs to be greater than 100\n    if (easeTime < SAFE_EASETIME) {\n      warn(\"easeTime should be greater than 100.\" + \"If mouseWheel easeTime is too small,\" + \"scrollEnd will be triggered many times.\");\n    }\n    return Math.max(easeTime, SAFE_EASETIME);\n  };\n  MouseWheel.prototype.destroy = function () {\n    this.eventRegister.destroy();\n    window.clearTimeout(this.wheelEndTimer);\n    window.clearTimeout(this.wheelMoveTimer);\n    this.hooksFn.forEach(function (item) {\n      var hooks = item[0];\n      var hooksName = item[1];\n      var handlerFn = item[2];\n      hooks.off(hooksName, handlerFn);\n    });\n  };\n  MouseWheel.pluginName = 'mouseWheel';\n  MouseWheel.applyOrder = \"pre\" /* Pre */;\n  return MouseWheel;\n}();\nvar ObserveDOM = /** @class */function () {\n  function ObserveDOM(scroll) {\n    this.scroll = scroll;\n    this.stopObserver = false;\n    this.init();\n  }\n  ObserveDOM.prototype.init = function () {\n    this.handleMutationObserver();\n    this.handleHooks();\n  };\n  ObserveDOM.prototype.handleMutationObserver = function () {\n    var _this = this;\n    if (typeof MutationObserver !== 'undefined') {\n      var timer_1 = 0;\n      this.observer = new MutationObserver(function (mutations) {\n        _this.mutationObserverHandler(mutations, timer_1);\n      });\n      this.startObserve(this.observer);\n    } else {\n      this.checkDOMUpdate();\n    }\n  };\n  ObserveDOM.prototype.handleHooks = function () {\n    var _this = this;\n    this.hooksFn = [];\n    this.registerHooks(this.scroll.hooks, this.scroll.hooks.eventTypes.contentChanged, function () {\n      _this.stopObserve();\n      // launch a new mutationObserver\n      _this.handleMutationObserver();\n    });\n    this.registerHooks(this.scroll.hooks, this.scroll.hooks.eventTypes.enable, function () {\n      if (_this.stopObserver) {\n        _this.handleMutationObserver();\n      }\n    });\n    this.registerHooks(this.scroll.hooks, this.scroll.hooks.eventTypes.disable, function () {\n      _this.stopObserve();\n    });\n    this.registerHooks(this.scroll.hooks, this.scroll.hooks.eventTypes.destroy, function () {\n      _this.destroy();\n    });\n  };\n  ObserveDOM.prototype.mutationObserverHandler = function (mutations, timer) {\n    var _this = this;\n    if (this.shouldNotRefresh()) {\n      return;\n    }\n    var immediateRefresh = false;\n    var deferredRefresh = false;\n    for (var i = 0; i < mutations.length; i++) {\n      var mutation = mutations[i];\n      if (mutation.type !== 'attributes') {\n        immediateRefresh = true;\n        break;\n      } else {\n        if (mutation.target !== this.scroll.scroller.content) {\n          deferredRefresh = true;\n          break;\n        }\n      }\n    }\n    if (immediateRefresh) {\n      this.scroll.refresh();\n    } else if (deferredRefresh) {\n      // attributes changes too often\n      clearTimeout(timer);\n      timer = window.setTimeout(function () {\n        if (!_this.shouldNotRefresh()) {\n          _this.scroll.refresh();\n        }\n      }, 60);\n    }\n  };\n  ObserveDOM.prototype.startObserve = function (observer) {\n    var config = {\n      attributes: true,\n      childList: true,\n      subtree: true\n    };\n    observer.observe(this.scroll.scroller.content, config);\n  };\n  ObserveDOM.prototype.shouldNotRefresh = function () {\n    var scroller = this.scroll.scroller;\n    var scrollBehaviorX = scroller.scrollBehaviorX,\n      scrollBehaviorY = scroller.scrollBehaviorY;\n    var outsideBoundaries = scrollBehaviorX.currentPos > scrollBehaviorX.minScrollPos || scrollBehaviorX.currentPos < scrollBehaviorX.maxScrollPos || scrollBehaviorY.currentPos > scrollBehaviorY.minScrollPos || scrollBehaviorY.currentPos < scrollBehaviorY.maxScrollPos;\n    return scroller.animater.pending || outsideBoundaries;\n  };\n  ObserveDOM.prototype.checkDOMUpdate = function () {\n    var _this = this;\n    var content = this.scroll.scroller.content;\n    var contentRect = getRect(content);\n    var oldWidth = contentRect.width;\n    var oldHeight = contentRect.height;\n    var check = function check() {\n      if (_this.stopObserver) {\n        return;\n      }\n      contentRect = getRect(content);\n      var newWidth = contentRect.width;\n      var newHeight = contentRect.height;\n      if (oldWidth !== newWidth || oldHeight !== newHeight) {\n        _this.scroll.refresh();\n      }\n      oldWidth = newWidth;\n      oldHeight = newHeight;\n      next();\n    };\n    var next = function next() {\n      setTimeout(function () {\n        check();\n      }, 1000);\n    };\n    next();\n  };\n  ObserveDOM.prototype.registerHooks = function (hooks, name, handler) {\n    hooks.on(name, handler, this);\n    this.hooksFn.push([hooks, name, handler]);\n  };\n  ObserveDOM.prototype.stopObserve = function () {\n    this.stopObserver = true;\n    if (this.observer) {\n      this.observer.disconnect();\n    }\n  };\n  ObserveDOM.prototype.destroy = function () {\n    this.stopObserve();\n    this.hooksFn.forEach(function (item) {\n      var hooks = item[0];\n      var hooksName = item[1];\n      var handlerFn = item[2];\n      hooks.off(hooksName, handlerFn);\n    });\n    this.hooksFn.length = 0;\n  };\n  ObserveDOM.pluginName = 'observeDOM';\n  return ObserveDOM;\n}();\nvar sourcePrefix$6 = 'plugins.pullDownRefresh';\nvar propertiesMap$6 = [{\n  key: 'finishPullDown',\n  name: 'finishPullDown'\n}, {\n  key: 'openPullDown',\n  name: 'openPullDown'\n}, {\n  key: 'closePullDown',\n  name: 'closePullDown'\n}, {\n  key: 'autoPullDownRefresh',\n  name: 'autoPullDownRefresh'\n}];\nvar propertiesConfig$6 = propertiesMap$6.map(function (item) {\n  return {\n    key: item.key,\n    sourceKey: sourcePrefix$6 + \".\" + item.name\n  };\n});\nvar PULLING_DOWN_EVENT = 'pullingDown';\nvar ENTER_THRESHOLD_EVENT = 'enterThreshold';\nvar LEAVE_THRESHOLD_EVENT = 'leaveThreshold';\nvar PullDown = /** @class */function () {\n  function PullDown(scroll) {\n    this.scroll = scroll;\n    this.pulling = 0 /* DEFAULT */;\n    this.thresholdBoundary = 0 /* DEFAULT */;\n    this.init();\n  }\n  PullDown.prototype.setPulling = function (status) {\n    this.pulling = status;\n  };\n  PullDown.prototype.setThresholdBoundary = function (boundary) {\n    this.thresholdBoundary = boundary;\n  };\n  PullDown.prototype.init = function () {\n    this.handleBScroll();\n    this.handleOptions(this.scroll.options.pullDownRefresh);\n    this.handleHooks();\n    this.watch();\n  };\n  PullDown.prototype.handleBScroll = function () {\n    this.scroll.registerType([PULLING_DOWN_EVENT, ENTER_THRESHOLD_EVENT, LEAVE_THRESHOLD_EVENT]);\n    this.scroll.proxy(propertiesConfig$6);\n  };\n  PullDown.prototype.handleOptions = function (userOptions) {\n    if (userOptions === void 0) {\n      userOptions = {};\n    }\n    userOptions = userOptions === true ? {} : userOptions;\n    var defaultOptions = {\n      threshold: 90,\n      stop: 40\n    };\n    this.options = extend(defaultOptions, userOptions);\n    this.scroll.options.probeType = 3 /* Realtime */;\n  };\n\n  PullDown.prototype.handleHooks = function () {\n    var _this = this;\n    this.hooksFn = [];\n    var scroller = this.scroll.scroller;\n    var scrollBehaviorY = scroller.scrollBehaviorY;\n    this.currentMinScrollY = this.cachedOriginanMinScrollY = scrollBehaviorY.minScrollPos;\n    this.registerHooks(this.scroll.hooks, this.scroll.hooks.eventTypes.contentChanged, function () {\n      _this.finishPullDown();\n    });\n    this.registerHooks(scrollBehaviorY.hooks, scrollBehaviorY.hooks.eventTypes.computeBoundary, function (boundary) {\n      // content is smaller than wrapper\n      if (boundary.maxScrollPos > 0) {\n        // allow scrolling when content is not full of wrapper\n        boundary.maxScrollPos = -1;\n      }\n      boundary.minScrollPos = _this.currentMinScrollY;\n    });\n    // integrate with mousewheel\n    if (this.hasMouseWheelPlugin()) {\n      this.registerHooks(this.scroll, this.scroll.eventTypes.alterOptions, function (mouseWheelOptions) {\n        var SANE_DISCRETE_TIME = 300;\n        var SANE_EASE_TIME = 350;\n        mouseWheelOptions.discreteTime = SANE_DISCRETE_TIME;\n        // easeTime > discreteTime ensure goInto checkPullDown function\n        mouseWheelOptions.easeTime = SANE_EASE_TIME;\n      });\n      this.registerHooks(this.scroll, this.scroll.eventTypes.mousewheelEnd, function () {\n        // mouseWheel need trigger checkPullDown manually\n        scroller.hooks.trigger(scroller.hooks.eventTypes.end);\n      });\n    }\n  };\n  PullDown.prototype.registerHooks = function (hooks, name, handler) {\n    hooks.on(name, handler, this);\n    this.hooksFn.push([hooks, name, handler]);\n  };\n  PullDown.prototype.hasMouseWheelPlugin = function () {\n    return !!this.scroll.eventTypes.alterOptions;\n  };\n  PullDown.prototype.watch = function () {\n    var scroller = this.scroll.scroller;\n    this.watching = true;\n    this.registerHooks(scroller.hooks, scroller.hooks.eventTypes.end, this.checkPullDown);\n    this.registerHooks(this.scroll, this.scroll.eventTypes.scrollStart, this.resetStateBeforeScrollStart);\n    this.registerHooks(this.scroll, this.scroll.eventTypes.scroll, this.checkLocationOfThresholdBoundary);\n    if (this.hasMouseWheelPlugin()) {\n      this.registerHooks(this.scroll, this.scroll.eventTypes.mousewheelStart, this.resetStateBeforeScrollStart);\n    }\n  };\n  PullDown.prototype.resetStateBeforeScrollStart = function () {\n    // current fetching pulldownRefresh has ended\n    if (!this.isFetchingStatus()) {\n      this.setPulling(1 /* MOVING */);\n      this.setThresholdBoundary(0 /* DEFAULT */);\n    }\n  };\n\n  PullDown.prototype.checkLocationOfThresholdBoundary = function () {\n    // pulldownRefresh is in the phase of Moving\n    if (this.pulling === 1 /* MOVING */) {\n      var scroll_1 = this.scroll;\n      // enter threshold boundary\n      var enteredThresholdBoundary = this.thresholdBoundary !== 1 /* INSIDE */ && this.locateInsideThresholdBoundary();\n      // leave threshold boundary\n      var leftThresholdBoundary = this.thresholdBoundary !== 2 /* OUTSIDE */ && !this.locateInsideThresholdBoundary();\n      if (enteredThresholdBoundary) {\n        this.setThresholdBoundary(1 /* INSIDE */);\n        scroll_1.trigger(ENTER_THRESHOLD_EVENT);\n      }\n      if (leftThresholdBoundary) {\n        this.setThresholdBoundary(2 /* OUTSIDE */);\n        scroll_1.trigger(LEAVE_THRESHOLD_EVENT);\n      }\n    }\n  };\n  PullDown.prototype.locateInsideThresholdBoundary = function () {\n    return this.scroll.y <= this.options.threshold;\n  };\n  PullDown.prototype.unwatch = function () {\n    var scroll = this.scroll;\n    var scroller = scroll.scroller;\n    this.watching = false;\n    scroller.hooks.off(scroller.hooks.eventTypes.end, this.checkPullDown);\n    scroll.off(scroll.eventTypes.scrollStart, this.resetStateBeforeScrollStart);\n    scroll.off(scroll.eventTypes.scroll, this.checkLocationOfThresholdBoundary);\n    if (this.hasMouseWheelPlugin()) {\n      scroll.off(scroll.eventTypes.mousewheelStart, this.resetStateBeforeScrollStart);\n    }\n  };\n  PullDown.prototype.checkPullDown = function () {\n    var _a = this.options,\n      threshold = _a.threshold,\n      stop = _a.stop;\n    // check if a real pull down action\n    if (this.scroll.y < threshold) {\n      return false;\n    }\n    if (this.pulling === 1 /* MOVING */) {\n      this.modifyBehaviorYBoundary(stop);\n      this.setPulling(2 /* FETCHING */);\n      this.scroll.trigger(PULLING_DOWN_EVENT);\n    }\n    this.scroll.scrollTo(this.scroll.x, stop, this.scroll.options.bounceTime, ease.bounce);\n    return this.isFetchingStatus();\n  };\n  PullDown.prototype.isFetchingStatus = function () {\n    return this.pulling === 2 /* FETCHING */;\n  };\n\n  PullDown.prototype.modifyBehaviorYBoundary = function (stopDistance) {\n    var scrollBehaviorY = this.scroll.scroller.scrollBehaviorY;\n    // manually modify minScrollPos for a hang animation\n    // to prevent from resetPosition\n    this.cachedOriginanMinScrollY = scrollBehaviorY.minScrollPos;\n    this.currentMinScrollY = stopDistance;\n    scrollBehaviorY.computeBoundary();\n  };\n  PullDown.prototype.finishPullDown = function () {\n    if (this.isFetchingStatus()) {\n      var scrollBehaviorY = this.scroll.scroller.scrollBehaviorY;\n      // restore minScrollY since the hang animation has ended\n      this.currentMinScrollY = this.cachedOriginanMinScrollY;\n      scrollBehaviorY.computeBoundary();\n      this.setPulling(0 /* DEFAULT */);\n      this.scroll.resetPosition(this.scroll.options.bounceTime, ease.bounce);\n    }\n  };\n  // allow 'true' type is compat for beta version implements\n  PullDown.prototype.openPullDown = function (config) {\n    if (config === void 0) {\n      config = {};\n    }\n    this.handleOptions(config);\n    if (!this.watching) {\n      this.watch();\n    }\n  };\n  PullDown.prototype.closePullDown = function () {\n    this.unwatch();\n  };\n  PullDown.prototype.autoPullDownRefresh = function () {\n    var _a = this.options,\n      threshold = _a.threshold,\n      stop = _a.stop;\n    if (this.isFetchingStatus() || !this.watching) {\n      return;\n    }\n    this.modifyBehaviorYBoundary(stop);\n    this.scroll.trigger(this.scroll.eventTypes.scrollStart);\n    this.scroll.scrollTo(this.scroll.x, threshold);\n    this.setPulling(2 /* FETCHING */);\n    this.scroll.trigger(PULLING_DOWN_EVENT);\n    this.scroll.scrollTo(this.scroll.x, stop, this.scroll.options.bounceTime, ease.bounce);\n  };\n  PullDown.pluginName = 'pullDownRefresh';\n  return PullDown;\n}();\nvar sourcePrefix$5 = 'plugins.pullUpLoad';\nvar propertiesMap$5 = [{\n  key: 'finishPullUp',\n  name: 'finishPullUp'\n}, {\n  key: 'openPullUp',\n  name: 'openPullUp'\n}, {\n  key: 'closePullUp',\n  name: 'closePullUp'\n}, {\n  key: 'autoPullUpLoad',\n  name: 'autoPullUpLoad'\n}];\nvar propertiesConfig$5 = propertiesMap$5.map(function (item) {\n  return {\n    key: item.key,\n    sourceKey: sourcePrefix$5 + \".\" + item.name\n  };\n});\nvar PULL_UP_HOOKS_NAME = 'pullingUp';\nvar PullUp = /** @class */function () {\n  function PullUp(scroll) {\n    this.scroll = scroll;\n    this.pulling = false;\n    this.watching = false;\n    this.init();\n  }\n  PullUp.prototype.init = function () {\n    this.handleBScroll();\n    this.handleOptions(this.scroll.options.pullUpLoad);\n    this.handleHooks();\n    this.watch();\n  };\n  PullUp.prototype.handleBScroll = function () {\n    this.scroll.registerType([PULL_UP_HOOKS_NAME]);\n    this.scroll.proxy(propertiesConfig$5);\n  };\n  PullUp.prototype.handleOptions = function (userOptions) {\n    if (userOptions === void 0) {\n      userOptions = {};\n    }\n    userOptions = userOptions === true ? {} : userOptions;\n    var defaultOptions = {\n      threshold: 0\n    };\n    this.options = extend(defaultOptions, userOptions);\n    this.scroll.options.probeType = 3 /* Realtime */;\n  };\n\n  PullUp.prototype.handleHooks = function () {\n    var _this = this;\n    this.hooksFn = [];\n    var scrollBehaviorY = this.scroll.scroller.scrollBehaviorY;\n    this.registerHooks(this.scroll.hooks, this.scroll.hooks.eventTypes.contentChanged, function () {\n      _this.finishPullUp();\n    });\n    this.registerHooks(scrollBehaviorY.hooks, scrollBehaviorY.hooks.eventTypes.computeBoundary, function (boundary) {\n      // content is smaller than wrapper\n      if (boundary.maxScrollPos > 0) {\n        // allow scrolling when content is not full of wrapper\n        boundary.maxScrollPos = -1;\n      }\n    });\n  };\n  PullUp.prototype.registerHooks = function (hooks, name, handler) {\n    hooks.on(name, handler, this);\n    this.hooksFn.push([hooks, name, handler]);\n  };\n  PullUp.prototype.watch = function () {\n    if (this.watching) {\n      return;\n    }\n    this.watching = true;\n    this.registerHooks(this.scroll, this.scroll.eventTypes.scroll, this.checkPullUp);\n  };\n  PullUp.prototype.unwatch = function () {\n    this.watching = false;\n    this.scroll.off(this.scroll.eventTypes.scroll, this.checkPullUp);\n  };\n  PullUp.prototype.checkPullUp = function (pos) {\n    var _this = this;\n    var threshold = this.options.threshold;\n    if (this.scroll.movingDirectionY === 1 /* Positive */ && pos.y <= this.scroll.maxScrollY + threshold) {\n      this.pulling = true;\n      // must reset pulling after scrollEnd\n      this.scroll.once(this.scroll.eventTypes.scrollEnd, function () {\n        _this.pulling = false;\n      });\n      this.unwatch();\n      this.scroll.trigger(PULL_UP_HOOKS_NAME);\n    }\n  };\n  PullUp.prototype.finishPullUp = function () {\n    var _this = this;\n    // reset Direction, fix #936\n    this.scroll.scroller.scrollBehaviorY.setMovingDirection(0 /* Default */);\n    if (this.pulling) {\n      this.scroll.once(this.scroll.eventTypes.scrollEnd, function () {\n        _this.watch();\n      });\n    } else {\n      this.watch();\n    }\n  };\n  // allow 'true' type is compat for beta version implements\n  PullUp.prototype.openPullUp = function (config) {\n    if (config === void 0) {\n      config = {};\n    }\n    this.handleOptions(config);\n    this.watch();\n  };\n  PullUp.prototype.closePullUp = function () {\n    this.unwatch();\n  };\n  PullUp.prototype.autoPullUpLoad = function () {\n    var threshold = this.options.threshold;\n    var scrollBehaviorY = this.scroll.scroller.scrollBehaviorY;\n    if (this.pulling || !this.watching) {\n      return;\n    }\n    // simulate a pullUp action\n    var NEGATIVE_VALUE = -1;\n    var outOfBoundaryPos = scrollBehaviorY.maxScrollPos + threshold + NEGATIVE_VALUE;\n    this.scroll.scroller.scrollBehaviorY.setMovingDirection(NEGATIVE_VALUE);\n    this.scroll.scrollTo(this.scroll.x, outOfBoundaryPos, this.scroll.options.bounceTime);\n  };\n  PullUp.pluginName = 'pullUpLoad';\n  return PullUp;\n}();\nvar EventHandler = /** @class */function () {\n  function EventHandler(indicator, options) {\n    this.indicator = indicator;\n    this.options = options;\n    this.hooks = new EventEmitter(['touchStart', 'touchMove', 'touchEnd']);\n    this.registerEvents();\n  }\n  EventHandler.prototype.registerEvents = function () {\n    var _a = this.options,\n      disableMouse = _a.disableMouse,\n      disableTouch = _a.disableTouch;\n    var startEvents = [];\n    var moveEvents = [];\n    var endEvents = [];\n    if (!disableMouse) {\n      startEvents.push({\n        name: 'mousedown',\n        handler: this.start.bind(this)\n      });\n      moveEvents.push({\n        name: 'mousemove',\n        handler: this.move.bind(this)\n      });\n      endEvents.push({\n        name: 'mouseup',\n        handler: this.end.bind(this)\n      });\n    }\n    if (!disableTouch) {\n      startEvents.push({\n        name: 'touchstart',\n        handler: this.start.bind(this)\n      });\n      moveEvents.push({\n        name: 'touchmove',\n        handler: this.move.bind(this)\n      });\n      endEvents.push({\n        name: 'touchend',\n        handler: this.end.bind(this)\n      }, {\n        name: 'touchcancel',\n        handler: this.end.bind(this)\n      });\n    }\n    this.startEventRegister = new EventRegister(this.indicator.indicatorEl, startEvents);\n    this.moveEventRegister = new EventRegister(window, moveEvents);\n    this.endEventRegister = new EventRegister(window, endEvents);\n  };\n  EventHandler.prototype.BScrollIsDisabled = function () {\n    return !this.indicator.scroll.enabled;\n  };\n  EventHandler.prototype.start = function (e) {\n    if (this.BScrollIsDisabled()) {\n      return;\n    }\n    var point = e.touches ? e.touches[0] : e;\n    maybePrevent(e);\n    e.stopPropagation();\n    this.initiated = true;\n    this.lastPoint = point[this.indicator.keysMap.point];\n    this.hooks.trigger(this.hooks.eventTypes.touchStart);\n  };\n  EventHandler.prototype.move = function (e) {\n    if (!this.initiated) {\n      return;\n    }\n    var point = e.touches ? e.touches[0] : e;\n    var pointPos = point[this.indicator.keysMap.point];\n    maybePrevent(e);\n    e.stopPropagation();\n    var delta = pointPos - this.lastPoint;\n    this.lastPoint = pointPos;\n    this.hooks.trigger(this.hooks.eventTypes.touchMove, delta);\n  };\n  EventHandler.prototype.end = function (e) {\n    if (!this.initiated) {\n      return;\n    }\n    this.initiated = false;\n    maybePrevent(e);\n    e.stopPropagation();\n    this.hooks.trigger(this.hooks.eventTypes.touchEnd);\n  };\n  EventHandler.prototype.destroy = function () {\n    this.startEventRegister.destroy();\n    this.moveEventRegister.destroy();\n    this.endEventRegister.destroy();\n  };\n  return EventHandler;\n}();\nvar Indicator$1 = /** @class */function () {\n  function Indicator(scroll, options) {\n    this.scroll = scroll;\n    this.options = options;\n    this.hooksFn = [];\n    this.wrapper = options.wrapper;\n    this.direction = options.direction;\n    this.indicatorEl = this.wrapper.children[0];\n    this.keysMap = this.getKeysMap();\n    this.handleFade();\n    this.handleHooks();\n  }\n  Indicator.prototype.handleFade = function () {\n    if (this.options.fade) {\n      this.wrapper.style.opacity = '0';\n    }\n  };\n  Indicator.prototype.handleHooks = function () {\n    var _this = this;\n    var _a = this.options,\n      fade = _a.fade,\n      interactive = _a.interactive,\n      scrollbarTrackClickable = _a.scrollbarTrackClickable;\n    var scroll = this.scroll;\n    var scrollHooks = scroll.hooks;\n    var translaterHooks = scroll.scroller.translater.hooks;\n    var animaterHooks = scroll.scroller.animater.hooks;\n    this.registerHooks(scrollHooks, scrollHooks.eventTypes.refresh, this.refresh);\n    this.registerHooks(translaterHooks, translaterHooks.eventTypes.translate, function (pos) {\n      var hasScrollKey = _this.keysMap.hasScroll;\n      if (_this.scroll[hasScrollKey]) {\n        _this.updatePosition(pos);\n      }\n    });\n    this.registerHooks(animaterHooks, animaterHooks.eventTypes.time, this.transitionTime);\n    this.registerHooks(animaterHooks, animaterHooks.eventTypes.timeFunction, this.transitionTimingFunction);\n    if (fade) {\n      this.registerHooks(scroll, scroll.eventTypes.scrollEnd, function () {\n        _this.fade();\n      });\n      this.registerHooks(scroll, scroll.eventTypes.scrollStart, function () {\n        _this.fade(true);\n      });\n      // for mousewheel event\n      if (scroll.eventTypes.mousewheelStart && scroll.eventTypes.mousewheelEnd) {\n        this.registerHooks(scroll, scroll.eventTypes.mousewheelStart, function () {\n          _this.fade(true);\n        });\n        this.registerHooks(scroll, scroll.eventTypes.mousewheelMove, function () {\n          _this.fade(true);\n        });\n        this.registerHooks(scroll, scroll.eventTypes.mousewheelEnd, function () {\n          _this.fade();\n        });\n      }\n    }\n    if (interactive) {\n      var _b = this.scroll.options,\n        disableMouse = _b.disableMouse,\n        disableTouch = _b.disableTouch;\n      this.eventHandler = new EventHandler(this, {\n        disableMouse: disableMouse,\n        disableTouch: disableTouch\n      });\n      var eventHandlerHooks = this.eventHandler.hooks;\n      this.registerHooks(eventHandlerHooks, eventHandlerHooks.eventTypes.touchStart, this.startHandler);\n      this.registerHooks(eventHandlerHooks, eventHandlerHooks.eventTypes.touchMove, this.moveHandler);\n      this.registerHooks(eventHandlerHooks, eventHandlerHooks.eventTypes.touchEnd, this.endHandler);\n    }\n    if (scrollbarTrackClickable) {\n      this.bindClick();\n    }\n  };\n  Indicator.prototype.registerHooks = function (hooks, name, handler) {\n    hooks.on(name, handler, this);\n    this.hooksFn.push([hooks, name, handler]);\n  };\n  Indicator.prototype.bindClick = function () {\n    var wrapper = this.wrapper;\n    this.clickEventRegister = new EventRegister(wrapper, [{\n      name: 'click',\n      handler: this.handleClick.bind(this)\n    }]);\n  };\n  Indicator.prototype.handleClick = function (e) {\n    var newPos = this.calculateclickOffsetPos(e);\n    var _a = this.scroll,\n      x = _a.x,\n      y = _a.y;\n    x = this.direction === \"horizontal\" /* Horizontal */ ? newPos : x;\n    y = this.direction === \"vertical\" /* Vertical */ ? newPos : y;\n    this.scroll.scrollTo(x, y, this.options.scrollbarTrackOffsetTime);\n  };\n  Indicator.prototype.calculateclickOffsetPos = function (e) {\n    var _a = this.keysMap,\n      poinKey = _a.point,\n      domRectKey = _a.domRect;\n    var scrollbarTrackOffsetType = this.options.scrollbarTrackOffsetType;\n    var clickPointOffset = e[poinKey] - this.wrapperRect[domRectKey];\n    var scrollToWhere = clickPointOffset < this.currentPos ? -1 /* Up */ : 1 /* Down */;\n    var delta = 0;\n    var currentPos = this.currentPos;\n    if (scrollbarTrackOffsetType === \"step\" /* Step */) {\n      delta = this.scrollInfo.baseSize * scrollToWhere;\n    } else {\n      delta = 0;\n      currentPos = clickPointOffset;\n    }\n    return this.newPos(currentPos, delta, this.scrollInfo);\n  };\n  Indicator.prototype.getKeysMap = function () {\n    if (this.direction === \"vertical\" /* Vertical */) {\n      return {\n        hasScroll: 'hasVerticalScroll',\n        size: 'height',\n        wrapperSize: 'clientHeight',\n        scrollerSize: 'scrollerHeight',\n        maxScrollPos: 'maxScrollY',\n        pos: 'y',\n        point: 'pageY',\n        translateProperty: 'translateY',\n        domRect: 'top'\n      };\n    }\n    return {\n      hasScroll: 'hasHorizontalScroll',\n      size: 'width',\n      wrapperSize: 'clientWidth',\n      scrollerSize: 'scrollerWidth',\n      maxScrollPos: 'maxScrollX',\n      pos: 'x',\n      point: 'pageX',\n      translateProperty: 'translateX',\n      domRect: 'left'\n    };\n  };\n  Indicator.prototype.fade = function (visible) {\n    var _a = this.options,\n      fadeInTime = _a.fadeInTime,\n      fadeOutTime = _a.fadeOutTime;\n    var time = visible ? fadeInTime : fadeOutTime;\n    var wrapper = this.wrapper;\n    wrapper.style[style.transitionDuration] = time + 'ms';\n    wrapper.style.opacity = visible ? '1' : '0';\n  };\n  Indicator.prototype.refresh = function () {\n    var hasScrollKey = this.keysMap.hasScroll;\n    var scroll = this.scroll;\n    var x = scroll.x,\n      y = scroll.y;\n    this.wrapperRect = this.wrapper.getBoundingClientRect();\n    if (this.canScroll(scroll[hasScrollKey])) {\n      var _a = this.keysMap,\n        wrapperSizeKey = _a.wrapperSize,\n        scrollerSizeKey = _a.scrollerSize,\n        maxScrollPosKey = _a.maxScrollPos;\n      this.scrollInfo = this.refreshScrollInfo(this.wrapper[wrapperSizeKey], scroll[scrollerSizeKey], scroll[maxScrollPosKey], this.indicatorEl[wrapperSizeKey]);\n      this.updatePosition({\n        x: x,\n        y: y\n      });\n    }\n  };\n  Indicator.prototype.transitionTime = function (time) {\n    if (time === void 0) {\n      time = 0;\n    }\n    this.indicatorEl.style[style.transitionDuration] = time + 'ms';\n  };\n  Indicator.prototype.transitionTimingFunction = function (easing) {\n    this.indicatorEl.style[style.transitionTimingFunction] = easing;\n  };\n  Indicator.prototype.canScroll = function (hasScroll) {\n    this.wrapper.style.display = hasScroll ? 'block' : 'none';\n    return hasScroll;\n  };\n  Indicator.prototype.refreshScrollInfo = function (wrapperSize, scrollerSize, maxScrollPos, indicatorElSize) {\n    var baseSize = Math.max(Math.round(wrapperSize * wrapperSize / (scrollerSize || wrapperSize || 1)), this.options.minSize);\n    if (this.options.isCustom) {\n      baseSize = indicatorElSize;\n    }\n    var maxIndicatorScrollPos = wrapperSize - baseSize;\n    // sizeRatio is negative\n    var sizeRatio = maxIndicatorScrollPos / maxScrollPos;\n    return {\n      baseSize: baseSize,\n      maxScrollPos: maxIndicatorScrollPos,\n      minScrollPos: 0,\n      sizeRatio: sizeRatio\n    };\n  };\n  Indicator.prototype.updatePosition = function (point) {\n    var _a = this.caculatePosAndSize(point, this.scrollInfo),\n      pos = _a.pos,\n      size = _a.size;\n    this.refreshStyle(size, pos);\n    this.currentPos = pos;\n  };\n  Indicator.prototype.caculatePosAndSize = function (point, scrollInfo) {\n    var posKey = this.keysMap.pos;\n    var sizeRatio = scrollInfo.sizeRatio,\n      baseSize = scrollInfo.baseSize,\n      maxScrollPos = scrollInfo.maxScrollPos,\n      minScrollPos = scrollInfo.minScrollPos;\n    var minSize = this.options.minSize;\n    var pos = Math.round(sizeRatio * point[posKey]);\n    var size;\n    // when out of boundary, slow down size reduction\n    if (pos < minScrollPos) {\n      size = Math.max(baseSize + pos * 3, minSize);\n      pos = minScrollPos;\n    } else if (pos > maxScrollPos) {\n      size = Math.max(baseSize - (pos - maxScrollPos) * 3, minSize);\n      pos = maxScrollPos + baseSize - size;\n    } else {\n      size = baseSize;\n    }\n    return {\n      pos: pos,\n      size: size\n    };\n  };\n  Indicator.prototype.refreshStyle = function (size, pos) {\n    var _a = this.keysMap,\n      translatePropertyKey = _a.translateProperty,\n      sizeKey = _a.size;\n    var translateZ = this.scroll.options.translateZ;\n    this.indicatorEl.style[sizeKey] = size + \"px\";\n    this.indicatorEl.style[style.transform] = translatePropertyKey + \"(\" + pos + \"px)\" + translateZ;\n  };\n  Indicator.prototype.startHandler = function () {\n    this.moved = false;\n    this.startTime = getNow();\n    this.transitionTime();\n    this.scroll.scroller.hooks.trigger(this.scroll.scroller.hooks.eventTypes.beforeScrollStart);\n  };\n  Indicator.prototype.moveHandler = function (delta) {\n    if (!this.moved && !this.indicatorNotMoved(delta)) {\n      this.moved = true;\n      this.scroll.scroller.hooks.trigger(this.scroll.scroller.hooks.eventTypes.scrollStart);\n    }\n    if (this.moved) {\n      var newPos = this.newPos(this.currentPos, delta, this.scrollInfo);\n      this.syncBScroll(newPos);\n    }\n  };\n  Indicator.prototype.endHandler = function () {\n    if (this.moved) {\n      var _a = this.scroll,\n        x = _a.x,\n        y = _a.y;\n      this.scroll.scroller.hooks.trigger(this.scroll.scroller.hooks.eventTypes.scrollEnd, {\n        x: x,\n        y: y\n      });\n    }\n  };\n  Indicator.prototype.indicatorNotMoved = function (delta) {\n    var currentPos = this.currentPos;\n    var _a = this.scrollInfo,\n      maxScrollPos = _a.maxScrollPos,\n      minScrollPos = _a.minScrollPos;\n    var notMoved = currentPos === minScrollPos && delta <= 0 || currentPos === maxScrollPos && delta >= 0;\n    return notMoved;\n  };\n  Indicator.prototype.syncBScroll = function (newPos) {\n    var timestamp = getNow();\n    var _a = this.scroll,\n      x = _a.x,\n      y = _a.y,\n      options = _a.options,\n      scroller = _a.scroller,\n      maxScrollY = _a.maxScrollY,\n      minScrollY = _a.minScrollY,\n      maxScrollX = _a.maxScrollX,\n      minScrollX = _a.minScrollX;\n    var probeType = options.probeType,\n      momentumLimitTime = options.momentumLimitTime;\n    var position = {\n      x: x,\n      y: y\n    };\n    if (this.direction === \"vertical\" /* Vertical */) {\n      position.y = between(newPos, maxScrollY, minScrollY);\n    } else {\n      position.x = between(newPos, maxScrollX, minScrollX);\n    }\n    scroller.translater.translate(position);\n    // dispatch scroll in interval time\n    if (timestamp - this.startTime > momentumLimitTime) {\n      this.startTime = timestamp;\n      if (probeType === 1 /* Throttle */) {\n        scroller.hooks.trigger(scroller.hooks.eventTypes.scroll, position);\n      }\n    }\n    // dispatch scroll all the time\n    if (probeType > 1 /* Throttle */) {\n      scroller.hooks.trigger(scroller.hooks.eventTypes.scroll, position);\n    }\n  };\n  Indicator.prototype.newPos = function (currentPos, delta, scrollInfo) {\n    var maxScrollPos = scrollInfo.maxScrollPos,\n      sizeRatio = scrollInfo.sizeRatio,\n      minScrollPos = scrollInfo.minScrollPos;\n    var newPos = currentPos + delta;\n    newPos = between(newPos, minScrollPos, maxScrollPos);\n    return Math.round(newPos / sizeRatio);\n  };\n  Indicator.prototype.destroy = function () {\n    var _a = this.options,\n      interactive = _a.interactive,\n      scrollbarTrackClickable = _a.scrollbarTrackClickable,\n      isCustom = _a.isCustom;\n    if (interactive) {\n      this.eventHandler.destroy();\n    }\n    if (scrollbarTrackClickable) {\n      this.clickEventRegister.destroy();\n    }\n    if (!isCustom) {\n      this.wrapper.parentNode.removeChild(this.wrapper);\n    }\n    this.hooksFn.forEach(function (item) {\n      var hooks = item[0];\n      var hooksName = item[1];\n      var handlerFn = item[2];\n      hooks.off(hooksName, handlerFn);\n    });\n    this.hooksFn.length = 0;\n  };\n  return Indicator;\n}();\nvar ScrollBar = /** @class */function () {\n  function ScrollBar(scroll) {\n    this.scroll = scroll;\n    this.handleOptions();\n    this.createIndicators();\n    this.handleHooks();\n  }\n  ScrollBar.prototype.handleHooks = function () {\n    var _this = this;\n    var scroll = this.scroll;\n    scroll.hooks.on(scroll.hooks.eventTypes.destroy, function () {\n      for (var _i = 0, _a = _this.indicators; _i < _a.length; _i++) {\n        var indicator = _a[_i];\n        indicator.destroy();\n      }\n    });\n  };\n  ScrollBar.prototype.handleOptions = function () {\n    var userOptions = this.scroll.options.scrollbar === true ? {} : this.scroll.options.scrollbar;\n    var defaultOptions = {\n      fade: true,\n      fadeInTime: 250,\n      fadeOutTime: 500,\n      interactive: false,\n      customElements: [],\n      minSize: 8,\n      scrollbarTrackClickable: false,\n      scrollbarTrackOffsetType: \"step\" /* Step */,\n      scrollbarTrackOffsetTime: 300\n    };\n    this.options = extend(defaultOptions, userOptions);\n  };\n  ScrollBar.prototype.createIndicators = function () {\n    var indicatorOptions;\n    var scroll = this.scroll;\n    var indicators = [];\n    var scrollDirectionConfigKeys = ['scrollX', 'scrollY'];\n    var indicatorDirections = [\"horizontal\" /* Horizontal */, \"vertical\" /* Vertical */];\n\n    var customScrollbarEls = this.options.customElements;\n    for (var i = 0; i < scrollDirectionConfigKeys.length; i++) {\n      var key = scrollDirectionConfigKeys[i];\n      // wanna scroll in specified direction\n      if (scroll.options[key]) {\n        var customElement = customScrollbarEls.shift();\n        var direction = indicatorDirections[i];\n        var isCustom = false;\n        var scrollbarWrapper = customElement ? customElement : this.createScrollbarElement(direction);\n        // internal scrollbar\n        if (scrollbarWrapper !== customElement) {\n          scroll.wrapper.appendChild(scrollbarWrapper);\n        } else {\n          // custom scrollbar passed by users\n          isCustom = true;\n        }\n        indicatorOptions = _assign(_assign({\n          wrapper: scrollbarWrapper,\n          direction: direction\n        }, this.options), {\n          isCustom: isCustom\n        });\n        indicators.push(new Indicator$1(scroll, indicatorOptions));\n      }\n    }\n    this.indicators = indicators;\n  };\n  ScrollBar.prototype.createScrollbarElement = function (direction, scrollbarTrackClickable) {\n    if (scrollbarTrackClickable === void 0) {\n      scrollbarTrackClickable = this.options.scrollbarTrackClickable;\n    }\n    var scrollbarWrapperEl = document.createElement('div');\n    var scrollbarIndicatorEl = document.createElement('div');\n    scrollbarWrapperEl.style.cssText = 'position:absolute;z-index:9999;overflow:hidden;';\n    scrollbarIndicatorEl.style.cssText = 'box-sizing:border-box;position:absolute;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);border-radius:3px;';\n    scrollbarIndicatorEl.className = 'bscroll-indicator';\n    if (direction === \"horizontal\" /* Horizontal */) {\n      scrollbarWrapperEl.style.cssText += 'height:7px;left:2px;right:2px;bottom:0;';\n      scrollbarIndicatorEl.style.height = '100%';\n      scrollbarWrapperEl.className = 'bscroll-horizontal-scrollbar';\n    } else {\n      scrollbarWrapperEl.style.cssText += 'width:7px;bottom:2px;top:2px;right:1px;';\n      scrollbarIndicatorEl.style.width = '100%';\n      scrollbarWrapperEl.className = 'bscroll-vertical-scrollbar';\n    }\n    if (!scrollbarTrackClickable) {\n      scrollbarWrapperEl.style.cssText += 'pointer-events:none;';\n    }\n    scrollbarWrapperEl.appendChild(scrollbarIndicatorEl);\n    return scrollbarWrapperEl;\n  };\n  ScrollBar.pluginName = 'scrollbar';\n  return ScrollBar;\n}();\nvar BASE_PAGE = {\n  pageX: 0,\n  pageY: 0,\n  x: 0,\n  y: 0\n};\nvar DEFAULT_PAGE_STATS = {\n  x: 0,\n  y: 0,\n  width: 0,\n  height: 0,\n  cx: 0,\n  cy: 0\n};\nvar PagesMatrix = /** @class */function () {\n  function PagesMatrix(scroll) {\n    this.scroll = scroll;\n    this.init();\n  }\n  PagesMatrix.prototype.init = function () {\n    var scroller = this.scroll.scroller;\n    var scrollBehaviorX = scroller.scrollBehaviorX,\n      scrollBehaviorY = scroller.scrollBehaviorY;\n    this.wrapperWidth = scrollBehaviorX.wrapperSize;\n    this.wrapperHeight = scrollBehaviorY.wrapperSize;\n    this.scrollerHeight = scrollBehaviorY.contentSize;\n    this.scrollerWidth = scrollBehaviorX.contentSize;\n    this.pages = this.buildPagesMatrix(this.wrapperWidth, this.wrapperHeight);\n    this.pageLengthOfX = this.pages ? this.pages.length : 0;\n    this.pageLengthOfY = this.pages && this.pages[0] ? this.pages[0].length : 0;\n  };\n  PagesMatrix.prototype.getPageStats = function (pageX, pageY) {\n    // Returns the default Stats when no Stats are retrieved\n    // Scene: When the `content` element is an empty bounding box, the return value of the `width/height` function of el.getBoundingClientRect is 0 and pages will be calculated as an empty array.\n    // https://developer.mozilla.org/en-US/docs/Web/API/Element/getBoundingClientRect\n    return this.pages[pageX] && this.pages[pageX][pageY] ? this.pages[pageX][pageY] : DEFAULT_PAGE_STATS;\n  };\n  PagesMatrix.prototype.getNearestPageIndex = function (x, y) {\n    var pageX = 0;\n    var pageY = 0;\n    var l = this.pages.length;\n    for (; pageX < l - 1; pageX++) {\n      if (x >= this.pages[pageX][0].cx) {\n        break;\n      }\n    }\n    l = this.pages[pageX] ? this.pages[pageX].length : 0;\n    for (; pageY < l - 1; pageY++) {\n      if (y >= this.pages[0][pageY].cy) {\n        break;\n      }\n    }\n    return {\n      pageX: pageX,\n      pageY: pageY\n    };\n  };\n  // (n x 1) matrix for horizontal scroll or\n  // (1 * n) matrix for vertical scroll\n  PagesMatrix.prototype.buildPagesMatrix = function (stepX, stepY) {\n    var pages = [];\n    var x = 0;\n    var y;\n    var cx;\n    var cy;\n    var i = 0;\n    var l;\n    var maxScrollPosX = this.scroll.scroller.scrollBehaviorX.maxScrollPos;\n    var maxScrollPosY = this.scroll.scroller.scrollBehaviorY.maxScrollPos;\n    cx = Math.round(stepX / 2);\n    cy = Math.round(stepY / 2);\n    while (x > -this.scrollerWidth) {\n      pages[i] = [];\n      l = 0;\n      y = 0;\n      while (y > -this.scrollerHeight) {\n        pages[i][l] = {\n          x: Math.max(x, maxScrollPosX),\n          y: Math.max(y, maxScrollPosY),\n          width: stepX,\n          height: stepY,\n          cx: x - cx,\n          cy: y - cy\n        };\n        y -= stepY;\n        l++;\n      }\n      x -= stepX;\n      i++;\n    }\n    return pages;\n  };\n  return PagesMatrix;\n}();\nvar SlidePages = /** @class */function () {\n  function SlidePages(scroll, slideOptions) {\n    this.scroll = scroll;\n    this.slideOptions = slideOptions;\n    this.slideX = false;\n    this.slideY = false;\n    this.currentPage = extend({}, BASE_PAGE);\n  }\n  SlidePages.prototype.refresh = function () {\n    this.pagesMatrix = new PagesMatrix(this.scroll);\n    this.checkSlideLoop();\n    this.currentPage = this.getAdjustedCurrentPage();\n  };\n  SlidePages.prototype.getAdjustedCurrentPage = function () {\n    var _a = this.currentPage,\n      pageX = _a.pageX,\n      pageY = _a.pageY;\n    // page index should be handled\n    // because page counts may reduce\n    pageX = Math.min(pageX, this.pagesMatrix.pageLengthOfX - 1);\n    pageY = Math.min(pageY, this.pagesMatrix.pageLengthOfY - 1);\n    // loop scene should also be respected\n    // because clonedNode will cause pageLength increasing\n    if (this.loopX) {\n      pageX = Math.min(pageX, this.pagesMatrix.pageLengthOfX - 2);\n    }\n    if (this.loopY) {\n      pageY = Math.min(pageY, this.pagesMatrix.pageLengthOfY - 2);\n    }\n    var _b = this.pagesMatrix.getPageStats(pageX, pageY),\n      x = _b.x,\n      y = _b.y;\n    return {\n      pageX: pageX,\n      pageY: pageY,\n      x: x,\n      y: y\n    };\n  };\n  SlidePages.prototype.setCurrentPage = function (newPage) {\n    this.currentPage = newPage;\n  };\n  SlidePages.prototype.getInternalPage = function (pageX, pageY) {\n    if (pageX >= this.pagesMatrix.pageLengthOfX) {\n      pageX = this.pagesMatrix.pageLengthOfX - 1;\n    } else if (pageX < 0) {\n      pageX = 0;\n    }\n    if (pageY >= this.pagesMatrix.pageLengthOfY) {\n      pageY = this.pagesMatrix.pageLengthOfY - 1;\n    } else if (pageY < 0) {\n      pageY = 0;\n    }\n    var _a = this.pagesMatrix.getPageStats(pageX, pageY),\n      x = _a.x,\n      y = _a.y;\n    return {\n      pageX: pageX,\n      pageY: pageY,\n      x: x,\n      y: y\n    };\n  };\n  SlidePages.prototype.getInitialPage = function (showFirstPage, firstInitialised) {\n    if (showFirstPage === void 0) {\n      showFirstPage = false;\n    }\n    if (firstInitialised === void 0) {\n      firstInitialised = false;\n    }\n    var _a = this.slideOptions,\n      startPageXIndex = _a.startPageXIndex,\n      startPageYIndex = _a.startPageYIndex;\n    var firstPageX = this.loopX ? 1 : 0;\n    var firstPageY = this.loopY ? 1 : 0;\n    var pageX = showFirstPage ? firstPageX : this.currentPage.pageX;\n    var pageY = showFirstPage ? firstPageY : this.currentPage.pageY;\n    if (firstInitialised) {\n      pageX = this.loopX ? startPageXIndex + 1 : startPageXIndex;\n      pageY = this.loopY ? startPageYIndex + 1 : startPageYIndex;\n    } else {\n      pageX = showFirstPage ? firstPageX : this.currentPage.pageX;\n      pageY = showFirstPage ? firstPageY : this.currentPage.pageY;\n    }\n    var _b = this.pagesMatrix.getPageStats(pageX, pageY),\n      x = _b.x,\n      y = _b.y;\n    return {\n      pageX: pageX,\n      pageY: pageY,\n      x: x,\n      y: y\n    };\n  };\n  SlidePages.prototype.getExposedPage = function (page) {\n    var exposedPage = extend({}, page);\n    // only pageX or pageY need fix\n    if (this.loopX) {\n      exposedPage.pageX = this.fixedPage(exposedPage.pageX, this.pagesMatrix.pageLengthOfX - 2);\n    }\n    if (this.loopY) {\n      exposedPage.pageY = this.fixedPage(exposedPage.pageY, this.pagesMatrix.pageLengthOfY - 2);\n    }\n    return exposedPage;\n  };\n  SlidePages.prototype.getExposedPageByPageIndex = function (pageIndexX, pageIndexY) {\n    var page = {\n      pageX: pageIndexX,\n      pageY: pageIndexY\n    };\n    if (this.loopX) {\n      page.pageX = pageIndexX + 1;\n    }\n    if (this.loopY) {\n      page.pageY = pageIndexY + 1;\n    }\n    var _a = this.pagesMatrix.getPageStats(page.pageX, page.pageY),\n      x = _a.x,\n      y = _a.y;\n    return {\n      x: x,\n      y: y,\n      pageX: pageIndexX,\n      pageY: pageIndexY\n    };\n  };\n  SlidePages.prototype.getWillChangedPage = function (page) {\n    page = extend({}, page);\n    // Page need fix\n    if (this.loopX) {\n      page.pageX = this.fixedPage(page.pageX, this.pagesMatrix.pageLengthOfX - 2);\n      page.x = this.pagesMatrix.getPageStats(page.pageX + 1, 0).x;\n    }\n    if (this.loopY) {\n      page.pageY = this.fixedPage(page.pageY, this.pagesMatrix.pageLengthOfY - 2);\n      page.y = this.pagesMatrix.getPageStats(0, page.pageY + 1).y;\n    }\n    return page;\n  };\n  SlidePages.prototype.fixedPage = function (page, realPageLen) {\n    var pageIndex = [];\n    for (var i = 0; i < realPageLen; i++) {\n      pageIndex.push(i);\n    }\n    pageIndex.unshift(realPageLen - 1);\n    pageIndex.push(0);\n    return pageIndex[page];\n  };\n  SlidePages.prototype.getPageStats = function () {\n    return this.pagesMatrix.getPageStats(this.currentPage.pageX, this.currentPage.pageY);\n  };\n  SlidePages.prototype.getValidPageIndex = function (x, y) {\n    var lastX = this.pagesMatrix.pageLengthOfX - 1;\n    var lastY = this.pagesMatrix.pageLengthOfY - 1;\n    var firstX = 0;\n    var firstY = 0;\n    if (this.loopX) {\n      x += 1;\n      firstX = firstX + 1;\n      lastX = lastX - 1;\n    }\n    if (this.loopY) {\n      y += 1;\n      firstY = firstY + 1;\n      lastY = lastY - 1;\n    }\n    x = between(x, firstX, lastX);\n    y = between(y, firstY, lastY);\n    return {\n      pageX: x,\n      pageY: y\n    };\n  };\n  SlidePages.prototype.nextPageIndex = function () {\n    return this.getPageIndexByDirection(\"positive\" /* Positive */);\n  };\n\n  SlidePages.prototype.prevPageIndex = function () {\n    return this.getPageIndexByDirection(\"negative\" /* Negative */);\n  };\n\n  SlidePages.prototype.getNearestPage = function (x, y) {\n    var pageIndex = this.pagesMatrix.getNearestPageIndex(x, y);\n    var pageX = pageIndex.pageX,\n      pageY = pageIndex.pageY;\n    var newX = this.pagesMatrix.getPageStats(pageX, 0).x;\n    var newY = this.pagesMatrix.getPageStats(0, pageY).y;\n    return {\n      x: newX,\n      y: newY,\n      pageX: pageX,\n      pageY: pageY\n    };\n  };\n  SlidePages.prototype.getPageByDirection = function (page, directionX, directionY) {\n    var pageX = page.pageX,\n      pageY = page.pageY;\n    if (pageX === this.currentPage.pageX) {\n      pageX = between(pageX + directionX, 0, this.pagesMatrix.pageLengthOfX - 1);\n    }\n    if (pageY === this.currentPage.pageY) {\n      pageY = between(pageY + directionY, 0, this.pagesMatrix.pageLengthOfY - 1);\n    }\n    var x = this.pagesMatrix.getPageStats(pageX, 0).x;\n    var y = this.pagesMatrix.getPageStats(0, pageY).y;\n    return {\n      x: x,\n      y: y,\n      pageX: pageX,\n      pageY: pageY\n    };\n  };\n  SlidePages.prototype.resetLoopPage = function () {\n    if (this.loopX) {\n      if (this.currentPage.pageX === 0) {\n        return {\n          pageX: this.pagesMatrix.pageLengthOfX - 2,\n          pageY: this.currentPage.pageY\n        };\n      }\n      if (this.currentPage.pageX === this.pagesMatrix.pageLengthOfX - 1) {\n        return {\n          pageX: 1,\n          pageY: this.currentPage.pageY\n        };\n      }\n    }\n    if (this.loopY) {\n      if (this.currentPage.pageY === 0) {\n        return {\n          pageX: this.currentPage.pageX,\n          pageY: this.pagesMatrix.pageLengthOfY - 2\n        };\n      }\n      if (this.currentPage.pageY === this.pagesMatrix.pageLengthOfY - 1) {\n        return {\n          pageX: this.currentPage.pageX,\n          pageY: 1\n        };\n      }\n    }\n  };\n  SlidePages.prototype.getPageIndexByDirection = function (direction) {\n    var x = this.currentPage.pageX;\n    var y = this.currentPage.pageY;\n    if (this.slideX) {\n      x = direction === \"negative\" /* Negative */ ? x - 1 : x + 1;\n    }\n    if (this.slideY) {\n      y = direction === \"negative\" /* Negative */ ? y - 1 : y + 1;\n    }\n    return {\n      pageX: x,\n      pageY: y\n    };\n  };\n  SlidePages.prototype.checkSlideLoop = function () {\n    this.wannaLoop = this.slideOptions.loop;\n    if (this.pagesMatrix.pageLengthOfX > 1) {\n      this.slideX = true;\n    } else {\n      this.slideX = false;\n    }\n    if (this.pagesMatrix.pages[0] && this.pagesMatrix.pageLengthOfY > 1) {\n      this.slideY = true;\n    } else {\n      this.slideY = false;\n    }\n    this.loopX = this.wannaLoop && this.slideX;\n    this.loopY = this.wannaLoop && this.slideY;\n    if (this.slideX && this.slideY) {\n      warn('slide does not support two direction at the same time.');\n    }\n  };\n  return SlidePages;\n}();\nvar sourcePrefix$4 = 'plugins.slide';\nvar propertiesMap$4 = [{\n  key: 'next',\n  name: 'next'\n}, {\n  key: 'prev',\n  name: 'prev'\n}, {\n  key: 'goToPage',\n  name: 'goToPage'\n}, {\n  key: 'getCurrentPage',\n  name: 'getCurrentPage'\n}, {\n  key: 'startPlay',\n  name: 'startPlay'\n}, {\n  key: 'pausePlay',\n  name: 'pausePlay'\n}];\nvar propertiesConfig$4 = propertiesMap$4.map(function (item) {\n  return {\n    key: item.key,\n    sourceKey: sourcePrefix$4 + \".\" + item.name\n  };\n});\nvar samePage = function samePage(p1, p2) {\n  return p1.pageX === p2.pageX && p1.pageY === p2.pageY;\n};\nvar Slide = /** @class */function () {\n  function Slide(scroll) {\n    this.scroll = scroll;\n    this.cachedClonedPageDOM = [];\n    this.resetLooping = false;\n    this.autoplayTimer = 0;\n    if (!this.satisfyInitialization()) {\n      return;\n    }\n    this.init();\n  }\n  Slide.prototype.satisfyInitialization = function () {\n    if (this.scroll.scroller.content.children.length <= 0) {\n      warn(\"slide need at least one slide page to be initialised.\" + \"please check your DOM layout.\");\n      return false;\n    }\n    return true;\n  };\n  Slide.prototype.init = function () {\n    this.willChangeToPage = extend({}, BASE_PAGE);\n    this.handleBScroll();\n    this.handleOptions();\n    this.handleHooks();\n    this.createPages();\n  };\n  Slide.prototype.createPages = function () {\n    this.pages = new SlidePages(this.scroll, this.options);\n  };\n  Slide.prototype.handleBScroll = function () {\n    this.scroll.registerType(['slideWillChange', 'slidePageChanged']);\n    this.scroll.proxy(propertiesConfig$4);\n  };\n  Slide.prototype.handleOptions = function () {\n    var userOptions = this.scroll.options.slide === true ? {} : this.scroll.options.slide;\n    var defaultOptions = {\n      loop: true,\n      threshold: 0.1,\n      speed: 400,\n      easing: ease.bounce,\n      listenFlick: true,\n      autoplay: true,\n      interval: 3000,\n      startPageXIndex: 0,\n      startPageYIndex: 0\n    };\n    this.options = extend(defaultOptions, userOptions);\n  };\n  Slide.prototype.handleLoop = function (prevSlideContent) {\n    var loop = this.options.loop;\n    var slideContent = this.scroll.scroller.content;\n    var currentSlidePagesLength = slideContent.children.length;\n    // only should respect loop scene\n    if (loop) {\n      if (slideContent !== prevSlideContent) {\n        this.resetLoopChangedStatus();\n        this.removeClonedSlidePage(prevSlideContent);\n        currentSlidePagesLength > 1 && this.cloneFirstAndLastSlidePage(slideContent);\n      } else {\n        // many pages reduce to one page\n        if (currentSlidePagesLength === 3 && this.initialised) {\n          this.removeClonedSlidePage(slideContent);\n          this.moreToOnePageInLoop = true;\n          this.oneToMorePagesInLoop = false;\n        } else if (currentSlidePagesLength > 1) {\n          // one page increases to many page\n          if (this.initialised && this.cachedClonedPageDOM.length === 0) {\n            this.oneToMorePagesInLoop = true;\n            this.moreToOnePageInLoop = false;\n          } else {\n            this.removeClonedSlidePage(slideContent);\n            this.resetLoopChangedStatus();\n          }\n          this.cloneFirstAndLastSlidePage(slideContent);\n        } else {\n          this.resetLoopChangedStatus();\n        }\n      }\n    }\n  };\n  Slide.prototype.resetLoopChangedStatus = function () {\n    this.moreToOnePageInLoop = false;\n    this.oneToMorePagesInLoop = false;\n  };\n  Slide.prototype.handleHooks = function () {\n    var _this = this;\n    var scrollHooks = this.scroll.hooks;\n    var scrollerHooks = this.scroll.scroller.hooks;\n    var listenFlick = this.options.listenFlick;\n    this.prevContent = this.scroll.scroller.content;\n    this.hooksFn = [];\n    // scroll\n    this.registerHooks(this.scroll, this.scroll.eventTypes.beforeScrollStart, this.pausePlay);\n    this.registerHooks(this.scroll, this.scroll.eventTypes.scrollEnd, this.modifyCurrentPage);\n    this.registerHooks(this.scroll, this.scroll.eventTypes.scrollEnd, this.startPlay);\n    // for mousewheel event\n    if (this.scroll.eventTypes.mousewheelMove) {\n      this.registerHooks(this.scroll, this.scroll.eventTypes.mousewheelMove, function () {\n        // prevent default action of mousewheelMove\n        return true;\n      });\n      this.registerHooks(this.scroll, this.scroll.eventTypes.mousewheelEnd, function (delta) {\n        if (delta.directionX === 1 /* Positive */ || delta.directionY === 1 /* Positive */) {\n          _this.next();\n        }\n        if (delta.directionX === -1 /* Negative */ || delta.directionY === -1 /* Negative */) {\n          _this.prev();\n        }\n      });\n    }\n    // scrollHooks\n    this.registerHooks(scrollHooks, scrollHooks.eventTypes.refresh, this.refreshHandler);\n    this.registerHooks(scrollHooks, scrollHooks.eventTypes.destroy, this.destroy);\n    // scroller\n    this.registerHooks(scrollerHooks, scrollerHooks.eventTypes.beforeRefresh, function () {\n      _this.handleLoop(_this.prevContent);\n      _this.setSlideInlineStyle();\n    });\n    this.registerHooks(scrollerHooks, scrollerHooks.eventTypes.momentum, this.modifyScrollMetaHandler);\n    this.registerHooks(scrollerHooks, scrollerHooks.eventTypes.scroll, this.scrollHandler);\n    // a click operation will clearTimer, so restart a new one\n    this.registerHooks(scrollerHooks, scrollerHooks.eventTypes.checkClick, this.startPlay);\n    if (listenFlick) {\n      this.registerHooks(scrollerHooks, scrollerHooks.eventTypes.flick, this.flickHandler);\n    }\n  };\n  Slide.prototype.startPlay = function () {\n    var _this = this;\n    var _a = this.options,\n      interval = _a.interval,\n      autoplay = _a.autoplay;\n    if (autoplay) {\n      clearTimeout(this.autoplayTimer);\n      this.autoplayTimer = window.setTimeout(function () {\n        _this.next();\n      }, interval);\n    }\n  };\n  Slide.prototype.pausePlay = function () {\n    if (this.options.autoplay) {\n      clearTimeout(this.autoplayTimer);\n    }\n  };\n  Slide.prototype.setSlideInlineStyle = function () {\n    var styleConfigurations = [{\n      direction: 'scrollX',\n      sizeType: 'offsetWidth',\n      styleType: 'width'\n    }, {\n      direction: 'scrollY',\n      sizeType: 'offsetHeight',\n      styleType: 'height'\n    }];\n    var _a = this.scroll.scroller,\n      slideContent = _a.content,\n      slideWrapper = _a.wrapper;\n    var scrollOptions = this.scroll.options;\n    styleConfigurations.forEach(function (_a) {\n      var direction = _a.direction,\n        sizeType = _a.sizeType,\n        styleType = _a.styleType;\n      // wanna scroll in this direction\n      if (scrollOptions[direction]) {\n        var size = slideWrapper[sizeType];\n        var children = slideContent.children;\n        var length_1 = children.length;\n        for (var i = 0; i < length_1; i++) {\n          var slidePageDOM = children[i];\n          slidePageDOM.style[styleType] = size + 'px';\n        }\n        slideContent.style[styleType] = size * length_1 + 'px';\n      }\n    });\n  };\n  Slide.prototype.next = function (time, easing) {\n    var _a = this.pages.nextPageIndex(),\n      pageX = _a.pageX,\n      pageY = _a.pageY;\n    this.goTo(pageX, pageY, time, easing);\n  };\n  Slide.prototype.prev = function (time, easing) {\n    var _a = this.pages.prevPageIndex(),\n      pageX = _a.pageX,\n      pageY = _a.pageY;\n    this.goTo(pageX, pageY, time, easing);\n  };\n  Slide.prototype.goToPage = function (pageX, pageY, time, easing) {\n    var pageIndex = this.pages.getValidPageIndex(pageX, pageY);\n    this.goTo(pageIndex.pageX, pageIndex.pageY, time, easing);\n  };\n  Slide.prototype.getCurrentPage = function () {\n    return this.exposedPage || this.pages.getInitialPage(false, true);\n  };\n  Slide.prototype.setCurrentPage = function (page) {\n    this.pages.setCurrentPage(page);\n    this.exposedPage = this.pages.getExposedPage(page);\n  };\n  Slide.prototype.nearestPage = function (x, y) {\n    var _a = this.scroll.scroller,\n      scrollBehaviorX = _a.scrollBehaviorX,\n      scrollBehaviorY = _a.scrollBehaviorY;\n    var maxScrollPosX = scrollBehaviorX.maxScrollPos,\n      minScrollPosX = scrollBehaviorX.minScrollPos;\n    var maxScrollPosY = scrollBehaviorY.maxScrollPos,\n      minScrollPosY = scrollBehaviorY.minScrollPos;\n    return this.pages.getNearestPage(between(x, maxScrollPosX, minScrollPosX), between(y, maxScrollPosY, minScrollPosY));\n  };\n  Slide.prototype.satisfyThreshold = function (x, y) {\n    var _a = this.scroll.scroller,\n      scrollBehaviorX = _a.scrollBehaviorX,\n      scrollBehaviorY = _a.scrollBehaviorY;\n    var satisfied = true;\n    if (Math.abs(x - scrollBehaviorX.absStartPos) <= this.thresholdX && Math.abs(y - scrollBehaviorY.absStartPos) <= this.thresholdY) {\n      satisfied = false;\n    }\n    return satisfied;\n  };\n  Slide.prototype.refreshHandler = function (content) {\n    var _this = this;\n    if (!this.satisfyInitialization()) {\n      return;\n    }\n    this.pages.refresh();\n    this.computeThreshold();\n    var contentChanged = this.contentChanged = this.prevContent !== content;\n    if (contentChanged) {\n      this.prevContent = content;\n    }\n    var initPage = this.pages.getInitialPage(this.oneToMorePagesInLoop || this.moreToOnePageInLoop, contentChanged || !this.initialised);\n    if (this.initialised) {\n      this.goTo(initPage.pageX, initPage.pageY, 0);\n    } else {\n      this.registerHooks(this.scroll.hooks, this.scroll.hooks.eventTypes.beforeInitialScrollTo, function (position) {\n        _this.initialised = true;\n        position.x = initPage.x;\n        position.y = initPage.y;\n      });\n    }\n    this.startPlay();\n  };\n  Slide.prototype.computeThreshold = function () {\n    var threshold = this.options.threshold;\n    // Integer\n    if (threshold % 1 === 0) {\n      this.thresholdX = threshold;\n      this.thresholdY = threshold;\n    } else {\n      // decimal\n      var _a = this.pages.getPageStats(),\n        width = _a.width,\n        height = _a.height;\n      this.thresholdX = Math.round(width * threshold);\n      this.thresholdY = Math.round(height * threshold);\n    }\n  };\n  Slide.prototype.cloneFirstAndLastSlidePage = function (slideContent) {\n    var children = slideContent.children;\n    var preprendDOM = children[children.length - 1].cloneNode(true);\n    var appendDOM = children[0].cloneNode(true);\n    prepend(preprendDOM, slideContent);\n    slideContent.appendChild(appendDOM);\n    this.cachedClonedPageDOM = [preprendDOM, appendDOM];\n  };\n  Slide.prototype.removeClonedSlidePage = function (slideContent) {\n    // maybe slideContent has removed from DOM Tree\n    var slidePages = slideContent && slideContent.children || [];\n    if (slidePages.length) {\n      this.cachedClonedPageDOM.forEach(function (el) {\n        removeChild(slideContent, el);\n      });\n    }\n    this.cachedClonedPageDOM = [];\n  };\n  Slide.prototype.modifyCurrentPage = function (point) {\n    var _a = this.getCurrentPage(),\n      prevExposedPageX = _a.pageX,\n      prevExposedPageY = _a.pageY;\n    var newPage = this.nearestPage(point.x, point.y);\n    this.setCurrentPage(newPage);\n    /* istanbul ignore if */\n    if (this.contentChanged) {\n      this.contentChanged = false;\n      return true;\n    }\n    var _b = this.getCurrentPage(),\n      currentExposedPageX = _b.pageX,\n      currentExposedPageY = _b.pageY;\n    this.pageWillChangeTo(newPage);\n    // loop is true, and one page becomes many pages when call bs.refresh\n    if (this.oneToMorePagesInLoop) {\n      this.oneToMorePagesInLoop = false;\n      return true;\n    }\n    // loop is true, and many page becomes one page when call bs.refresh\n    // if prevPage > 0, dispatch slidePageChanged and scrollEnd events\n    /* istanbul ignore if */\n    if (this.moreToOnePageInLoop && prevExposedPageX === 0 && prevExposedPageY === 0) {\n      this.moreToOnePageInLoop = false;\n      return true;\n    }\n    if (prevExposedPageX !== currentExposedPageX || prevExposedPageY !== currentExposedPageY) {\n      // only trust pageX & pageY when loop is true\n      var page = this.pages.getExposedPageByPageIndex(currentExposedPageX, currentExposedPageY);\n      this.scroll.trigger(this.scroll.eventTypes.slidePageChanged, page);\n    }\n    // triggered by resetLoop\n    if (this.resetLooping) {\n      this.resetLooping = false;\n      return;\n    }\n    var changePage = this.pages.resetLoopPage();\n    if (changePage) {\n      this.resetLooping = true;\n      this.goTo(changePage.pageX, changePage.pageY, 0);\n      // stop user's scrollEnd\n      // since it is a seamless scroll\n      return true;\n    }\n  };\n  Slide.prototype.goTo = function (pageX, pageY, time, easing) {\n    var newPage = this.pages.getInternalPage(pageX, pageY);\n    var scrollEasing = easing || this.options.easing || ease.bounce;\n    var x = newPage.x,\n      y = newPage.y;\n    var deltaX = x - this.scroll.scroller.scrollBehaviorX.currentPos;\n    var deltaY = y - this.scroll.scroller.scrollBehaviorY.currentPos;\n    /* istanbul ignore if */\n    if (!deltaX && !deltaY) {\n      this.scroll.scroller.togglePointerEvents(true);\n      return;\n    }\n    time = time === undefined ? this.getEaseTime(deltaX, deltaY) : time;\n    this.scroll.scroller.scrollTo(x, y, time, scrollEasing);\n  };\n  Slide.prototype.flickHandler = function () {\n    var _a = this.scroll.scroller,\n      scrollBehaviorX = _a.scrollBehaviorX,\n      scrollBehaviorY = _a.scrollBehaviorY;\n    var currentPosX = scrollBehaviorX.currentPos,\n      startPosX = scrollBehaviorX.startPos,\n      directionX = scrollBehaviorX.direction;\n    var currentPosY = scrollBehaviorY.currentPos,\n      startPosY = scrollBehaviorY.startPos,\n      directionY = scrollBehaviorY.direction;\n    var _b = this.pages.currentPage,\n      pageX = _b.pageX,\n      pageY = _b.pageY;\n    var time = this.getEaseTime(currentPosX - startPosX, currentPosY - startPosY);\n    this.goTo(pageX + directionX, pageY + directionY, time);\n  };\n  Slide.prototype.getEaseTime = function (deltaX, deltaY) {\n    return this.options.speed || Math.max(Math.max(Math.min(Math.abs(deltaX), 1000), Math.min(Math.abs(deltaY), 1000)), 300);\n  };\n  Slide.prototype.modifyScrollMetaHandler = function (scrollMeta) {\n    var _a = this.scroll.scroller,\n      scrollBehaviorX = _a.scrollBehaviorX,\n      scrollBehaviorY = _a.scrollBehaviorY,\n      animater = _a.animater;\n    var newX = scrollMeta.newX;\n    var newY = scrollMeta.newY;\n    var newPage = this.satisfyThreshold(newX, newY) || animater.forceStopped ? this.pages.getPageByDirection(this.nearestPage(newX, newY), scrollBehaviorX.direction, scrollBehaviorY.direction) : this.pages.currentPage;\n    scrollMeta.time = this.getEaseTime(scrollMeta.newX - newPage.x, scrollMeta.newY - newPage.y);\n    scrollMeta.newX = newPage.x;\n    scrollMeta.newY = newPage.y;\n    scrollMeta.easing = this.options.easing || ease.bounce;\n  };\n  Slide.prototype.scrollHandler = function (_a) {\n    var x = _a.x,\n      y = _a.y;\n    if (this.satisfyThreshold(x, y)) {\n      var newPage = this.nearestPage(x, y);\n      this.pageWillChangeTo(newPage);\n    }\n  };\n  Slide.prototype.pageWillChangeTo = function (newPage) {\n    var changeToPage = this.pages.getWillChangedPage(newPage);\n    if (!samePage(this.willChangeToPage, changeToPage)) {\n      this.willChangeToPage = changeToPage;\n      this.scroll.trigger(this.scroll.eventTypes.slideWillChange, this.willChangeToPage);\n    }\n  };\n  Slide.prototype.registerHooks = function (hooks, name, handler) {\n    hooks.on(name, handler, this);\n    this.hooksFn.push([hooks, name, handler]);\n  };\n  Slide.prototype.destroy = function () {\n    var slideContent = this.scroll.scroller.content;\n    var _a = this.options,\n      loop = _a.loop,\n      autoplay = _a.autoplay;\n    if (loop) {\n      this.removeClonedSlidePage(slideContent);\n    }\n    if (autoplay) {\n      clearTimeout(this.autoplayTimer);\n    }\n    this.hooksFn.forEach(function (item) {\n      var hooks = item[0];\n      var hooksName = item[1];\n      var handlerFn = item[2];\n      if (hooks.eventTypes[hooksName]) {\n        hooks.off(hooksName, handlerFn);\n      }\n    });\n    this.hooksFn.length = 0;\n  };\n  Slide.pluginName = 'slide';\n  return Slide;\n}();\nvar sourcePrefix$3 = 'plugins.wheel';\nvar propertiesMap$3 = [{\n  key: 'wheelTo',\n  name: 'wheelTo'\n}, {\n  key: 'getSelectedIndex',\n  name: 'getSelectedIndex'\n}, {\n  key: 'restorePosition',\n  name: 'restorePosition'\n}];\nvar propertiesConfig$3 = propertiesMap$3.map(function (item) {\n  return {\n    key: item.key,\n    sourceKey: sourcePrefix$3 + \".\" + item.name\n  };\n});\nvar WHEEL_INDEX_CHANGED_EVENT_NAME = 'wheelIndexChanged';\nvar CONSTANTS = {\n  rate: 4\n};\nvar Wheel = /** @class */function () {\n  function Wheel(scroll) {\n    this.scroll = scroll;\n    this.init();\n  }\n  Wheel.prototype.init = function () {\n    this.handleBScroll();\n    this.handleOptions();\n    this.handleHooks();\n    // init boundary for Wheel\n    this.refreshBoundary();\n    this.setSelectedIndex(this.options.selectedIndex);\n  };\n  Wheel.prototype.handleBScroll = function () {\n    this.scroll.proxy(propertiesConfig$3);\n    this.scroll.registerType([WHEEL_INDEX_CHANGED_EVENT_NAME]);\n  };\n  Wheel.prototype.handleOptions = function () {\n    var userOptions = this.scroll.options.wheel === true ? {} : this.scroll.options.wheel;\n    var defaultOptions = {\n      wheelWrapperClass: 'wheel-scroll',\n      wheelItemClass: 'wheel-item',\n      rotate: 25,\n      adjustTime: 400,\n      selectedIndex: 0,\n      wheelDisabledItemClass: 'wheel-disabled-item'\n    };\n    this.options = extend(defaultOptions, userOptions);\n  };\n  Wheel.prototype.handleHooks = function () {\n    var _this = this;\n    var scroll = this.scroll;\n    var scroller = this.scroll.scroller;\n    var actionsHandler = scroller.actionsHandler,\n      scrollBehaviorX = scroller.scrollBehaviorX,\n      scrollBehaviorY = scroller.scrollBehaviorY,\n      animater = scroller.animater;\n    var prevContent = scroller.content;\n    // BScroll\n    scroll.on(scroll.eventTypes.scrollEnd, function (position) {\n      var index = _this.findNearestValidWheel(position.y).index;\n      if (scroller.animater.forceStopped && !_this.isAdjustingPosition) {\n        _this.target = _this.items[index];\n        // since stopped from an animation.\n        // prevent user's scrollEnd callback triggered twice\n        return true;\n      } else {\n        _this.setSelectedIndex(index);\n        if (_this.isAdjustingPosition) {\n          _this.isAdjustingPosition = false;\n        }\n      }\n    });\n    // BScroll.hooks\n    this.scroll.hooks.on(this.scroll.hooks.eventTypes.refresh, function (content) {\n      if (content !== prevContent) {\n        prevContent = content;\n        _this.setSelectedIndex(_this.options.selectedIndex, true);\n      }\n      // rotate all wheel-items\n      // because position may not change\n      _this.rotateX(_this.scroll.y);\n      // check we are stop at a disable item or not\n      _this.wheelTo(_this.selectedIndex, 0);\n    });\n    this.scroll.hooks.on(this.scroll.hooks.eventTypes.beforeInitialScrollTo, function (position) {\n      // selectedIndex has higher priority than bs.options.startY\n      position.x = 0;\n      position.y = -(_this.selectedIndex * _this.itemHeight);\n    });\n    // Scroller\n    scroller.hooks.on(scroller.hooks.eventTypes.checkClick, function () {\n      var index = HTMLCollectionToArray(_this.items).indexOf(_this.target);\n      if (index === -1) return true;\n      _this.wheelTo(index, _this.options.adjustTime, ease.swipe);\n      return true;\n    });\n    scroller.hooks.on(scroller.hooks.eventTypes.scrollTo, function (endPoint) {\n      endPoint.y = _this.findNearestValidWheel(endPoint.y).y;\n    });\n    // when content is scrolling\n    // click wheel-item DOM repeatedly and crazily will cause scrollEnd not triggered\n    // so reset forceStopped\n    scroller.hooks.on(scroller.hooks.eventTypes.minDistanceScroll, function () {\n      var animater = scroller.animater;\n      if (animater.forceStopped === true) {\n        animater.forceStopped = false;\n      }\n    });\n    scroller.hooks.on(scroller.hooks.eventTypes.scrollToElement, function (el, pos) {\n      if (!hasClass(el, _this.options.wheelItemClass)) {\n        return true;\n      } else {\n        pos.top = _this.findNearestValidWheel(pos.top).y;\n      }\n    });\n    // ActionsHandler\n    actionsHandler.hooks.on(actionsHandler.hooks.eventTypes.beforeStart, function (e) {\n      _this.target = e.target;\n    });\n    // ScrollBehaviorX\n    // Wheel has no x direction now\n    scrollBehaviorX.hooks.on(scrollBehaviorX.hooks.eventTypes.computeBoundary, function (boundary) {\n      boundary.maxScrollPos = 0;\n      boundary.minScrollPos = 0;\n    });\n    // ScrollBehaviorY\n    scrollBehaviorY.hooks.on(scrollBehaviorY.hooks.eventTypes.computeBoundary, function (boundary) {\n      _this.items = _this.scroll.scroller.content.children;\n      _this.checkWheelAllDisabled();\n      _this.itemHeight = _this.items.length > 0 ? scrollBehaviorY.contentSize / _this.items.length : 0;\n      boundary.maxScrollPos = -_this.itemHeight * (_this.items.length - 1);\n      boundary.minScrollPos = 0;\n    });\n    scrollBehaviorY.hooks.on(scrollBehaviorY.hooks.eventTypes.momentum, function (momentumInfo) {\n      momentumInfo.rate = CONSTANTS.rate;\n      momentumInfo.destination = _this.findNearestValidWheel(momentumInfo.destination).y;\n    });\n    scrollBehaviorY.hooks.on(scrollBehaviorY.hooks.eventTypes.end, function (momentumInfo) {\n      var validWheel = _this.findNearestValidWheel(scrollBehaviorY.currentPos);\n      momentumInfo.destination = validWheel.y;\n      momentumInfo.duration = _this.options.adjustTime;\n    });\n    // Animater\n    animater.hooks.on(animater.hooks.eventTypes.time, function (time) {\n      _this.transitionDuration(time);\n    });\n    animater.hooks.on(animater.hooks.eventTypes.timeFunction, function (easing) {\n      _this.timeFunction(easing);\n    });\n    // bs.stop() to make wheel stop at a correct position when pending\n    animater.hooks.on(animater.hooks.eventTypes.callStop, function () {\n      var index = _this.findNearestValidWheel(_this.scroll.y).index;\n      _this.isAdjustingPosition = true;\n      _this.wheelTo(index, 0);\n    });\n    // Translater\n    animater.translater.hooks.on(animater.translater.hooks.eventTypes.translate, function (endPoint) {\n      _this.rotateX(endPoint.y);\n    });\n  };\n  Wheel.prototype.refreshBoundary = function () {\n    var _a = this.scroll.scroller,\n      scrollBehaviorX = _a.scrollBehaviorX,\n      scrollBehaviorY = _a.scrollBehaviorY,\n      content = _a.content;\n    scrollBehaviorX.refresh(content);\n    scrollBehaviorY.refresh(content);\n  };\n  Wheel.prototype.setSelectedIndex = function (index, contentChanged) {\n    if (contentChanged === void 0) {\n      contentChanged = false;\n    }\n    var prevSelectedIndex = this.selectedIndex;\n    this.selectedIndex = index;\n    // if content DOM changed, should not trigger event\n    if (prevSelectedIndex !== index && !contentChanged) {\n      this.scroll.trigger(WHEEL_INDEX_CHANGED_EVENT_NAME, index);\n    }\n  };\n  Wheel.prototype.getSelectedIndex = function () {\n    return this.selectedIndex;\n  };\n  Wheel.prototype.wheelTo = function (index, time, ease) {\n    if (index === void 0) {\n      index = 0;\n    }\n    if (time === void 0) {\n      time = 0;\n    }\n    var y = -index * this.itemHeight;\n    this.scroll.scrollTo(0, y, time, ease);\n  };\n  Wheel.prototype.restorePosition = function () {\n    // bs is scrolling\n    var isPending = this.scroll.pending;\n    if (isPending) {\n      var selectedIndex = this.getSelectedIndex();\n      this.scroll.scroller.animater.clearTimer();\n      this.wheelTo(selectedIndex, 0);\n    }\n  };\n  Wheel.prototype.transitionDuration = function (time) {\n    for (var i = 0; i < this.items.length; i++) {\n      this.items[i].style[style.transitionDuration] = time + 'ms';\n    }\n  };\n  Wheel.prototype.timeFunction = function (easing) {\n    for (var i = 0; i < this.items.length; i++) {\n      this.items[i].style[style.transitionTimingFunction] = easing;\n    }\n  };\n  Wheel.prototype.rotateX = function (y) {\n    var _a = this.options.rotate,\n      rotate = _a === void 0 ? 25 : _a;\n    for (var i = 0; i < this.items.length; i++) {\n      var deg = rotate * (y / this.itemHeight + i);\n      // Too small value is invalid in some phones, issue 1026\n      var SafeDeg = deg.toFixed(3);\n      this.items[i].style[style.transform] = \"rotateX(\" + SafeDeg + \"deg)\";\n    }\n  };\n  Wheel.prototype.findNearestValidWheel = function (y) {\n    y = y > 0 ? 0 : y < this.scroll.maxScrollY ? this.scroll.maxScrollY : y;\n    var currentIndex = Math.abs(Math.round(-y / this.itemHeight));\n    var cacheIndex = currentIndex;\n    var items = this.items;\n    var wheelDisabledItemClassName = this.options.wheelDisabledItemClass;\n    // implement web native select element\n    // first, check whether there is a enable item whose index is smaller than currentIndex\n    // then, check whether there is a enable item whose index is bigger than currentIndex\n    // otherwise, there are all disabled items, just keep currentIndex unchange\n    while (currentIndex >= 0) {\n      if (!hasClass(items[currentIndex], wheelDisabledItemClassName)) {\n        break;\n      }\n      currentIndex--;\n    }\n    if (currentIndex < 0) {\n      currentIndex = cacheIndex;\n      while (currentIndex <= items.length - 1) {\n        if (!hasClass(items[currentIndex], wheelDisabledItemClassName)) {\n          break;\n        }\n        currentIndex++;\n      }\n    }\n    // keep it unchange when all the items are disabled\n    if (currentIndex === items.length) {\n      currentIndex = cacheIndex;\n    }\n    // when all the items are disabled, selectedIndex should always be -1\n    return {\n      index: this.wheelItemsAllDisabled ? -1 : currentIndex,\n      y: -currentIndex * this.itemHeight\n    };\n  };\n  Wheel.prototype.checkWheelAllDisabled = function () {\n    var wheelDisabledItemClassName = this.options.wheelDisabledItemClass;\n    var items = this.items;\n    this.wheelItemsAllDisabled = true;\n    for (var i = 0; i < items.length; i++) {\n      if (!hasClass(items[i], wheelDisabledItemClassName)) {\n        this.wheelItemsAllDisabled = false;\n        break;\n      }\n    }\n  };\n  Wheel.pluginName = 'wheel';\n  return Wheel;\n}();\nvar sourcePrefix$2 = 'plugins.zoom';\nvar propertiesMap$2 = [{\n  key: 'zoomTo',\n  name: 'zoomTo'\n}];\nvar propertiesConfig$2 = propertiesMap$2.map(function (item) {\n  return {\n    key: item.key,\n    sourceKey: sourcePrefix$2 + \".\" + item.name\n  };\n});\nvar TWO_FINGERS = 2;\nvar RAW_SCALE = 1;\nvar Zoom = /** @class */function () {\n  function Zoom(scroll) {\n    this.scroll = scroll;\n    this.scale = RAW_SCALE;\n    this.prevScale = 1;\n    this.init();\n  }\n  Zoom.prototype.init = function () {\n    this.handleBScroll();\n    this.handleOptions();\n    this.handleHooks();\n    this.tryInitialZoomTo(this.zoomOpt);\n  };\n  Zoom.prototype.zoomTo = function (scale, x, y, bounceTime) {\n    var _a = this.resolveOrigin(x, y),\n      originX = _a.originX,\n      originY = _a.originY;\n    var origin = {\n      x: originX,\n      y: originY,\n      baseScale: this.scale\n    };\n    this._doZoomTo(scale, origin, bounceTime, true);\n  };\n  Zoom.prototype.handleBScroll = function () {\n    this.scroll.proxy(propertiesConfig$2);\n    this.scroll.registerType(['beforeZoomStart', 'zoomStart', 'zooming', 'zoomEnd']);\n  };\n  Zoom.prototype.handleOptions = function () {\n    var userOptions = this.scroll.options.zoom === true ? {} : this.scroll.options.zoom;\n    var defaultOptions = {\n      start: 1,\n      min: 1,\n      max: 4,\n      initialOrigin: [0, 0],\n      minimalZoomDistance: 5,\n      bounceTime: 800\n    };\n    this.zoomOpt = extend(defaultOptions, userOptions);\n  };\n  Zoom.prototype.handleHooks = function () {\n    var _this = this;\n    var scroll = this.scroll;\n    var scroller = this.scroll.scroller;\n    this.wrapper = this.scroll.scroller.wrapper;\n    this.setTransformOrigin(this.scroll.scroller.content);\n    var scrollBehaviorX = scroller.scrollBehaviorX;\n    var scrollBehaviorY = scroller.scrollBehaviorY;\n    this.hooksFn = [];\n    // BScroll\n    this.registerHooks(scroll.hooks, scroll.hooks.eventTypes.contentChanged, function (content) {\n      _this.setTransformOrigin(content);\n      _this.scale = RAW_SCALE;\n      _this.tryInitialZoomTo(_this.zoomOpt);\n    });\n    this.registerHooks(scroll.hooks, scroll.hooks.eventTypes.beforeInitialScrollTo, function () {\n      // if perform a zoom action, we should prevent initial scroll when initialised\n      if (_this.zoomOpt.start !== RAW_SCALE) {\n        return true;\n      }\n    });\n    // enlarge boundary\n    this.registerHooks(scrollBehaviorX.hooks, scrollBehaviorX.hooks.eventTypes.beforeComputeBoundary, function () {\n      // content may change, don't cache it's size\n      var contentSize = getRect(_this.scroll.scroller.content);\n      scrollBehaviorX.contentSize = Math.floor(contentSize.width * _this.scale);\n    });\n    this.registerHooks(scrollBehaviorY.hooks, scrollBehaviorY.hooks.eventTypes.beforeComputeBoundary, function () {\n      // content may change, don't cache it's size\n      var contentSize = getRect(_this.scroll.scroller.content);\n      scrollBehaviorY.contentSize = Math.floor(contentSize.height * _this.scale);\n    });\n    // touch event\n    this.registerHooks(scroller.actions.hooks, scroller.actions.hooks.eventTypes.start, function (e) {\n      var numberOfFingers = e.touches && e.touches.length || 0;\n      _this.fingersOperation(numberOfFingers);\n      if (numberOfFingers === TWO_FINGERS) {\n        _this.zoomStart(e);\n      }\n    });\n    this.registerHooks(scroller.actions.hooks, scroller.actions.hooks.eventTypes.beforeMove, function (e) {\n      var numberOfFingers = e.touches && e.touches.length || 0;\n      _this.fingersOperation(numberOfFingers);\n      if (numberOfFingers === TWO_FINGERS) {\n        _this.zoom(e);\n        return true;\n      }\n    });\n    this.registerHooks(scroller.actions.hooks, scroller.actions.hooks.eventTypes.beforeEnd, function (e) {\n      var numberOfFingers = _this.fingersOperation();\n      if (numberOfFingers === TWO_FINGERS) {\n        _this.zoomEnd();\n        return true;\n      }\n    });\n    this.registerHooks(scroller.translater.hooks, scroller.translater.hooks.eventTypes.beforeTranslate, function (transformStyle, point) {\n      var scale = point.scale ? point.scale : _this.prevScale;\n      _this.prevScale = scale;\n      transformStyle.push(\"scale(\" + scale + \")\");\n    });\n    this.registerHooks(scroller.hooks, scroller.hooks.eventTypes.scrollEnd, function () {\n      if (_this.fingersOperation() === TWO_FINGERS) {\n        _this.scroll.trigger(_this.scroll.eventTypes.zoomEnd, {\n          scale: _this.scale\n        });\n      }\n    });\n    this.registerHooks(this.scroll.hooks, 'destroy', this.destroy);\n  };\n  Zoom.prototype.setTransformOrigin = function (content) {\n    content.style[style.transformOrigin] = '0 0';\n  };\n  Zoom.prototype.tryInitialZoomTo = function (options) {\n    var start = options.start,\n      initialOrigin = options.initialOrigin;\n    var _a = this.scroll.scroller,\n      scrollBehaviorX = _a.scrollBehaviorX,\n      scrollBehaviorY = _a.scrollBehaviorY;\n    if (start !== RAW_SCALE) {\n      // Movable plugin may wanna modify minScrollPos or maxScrollPos\n      // so we force Movable to caculate them\n      this.resetBoundaries([scrollBehaviorX, scrollBehaviorY]);\n      this.zoomTo(start, initialOrigin[0], initialOrigin[1], 0);\n    }\n  };\n  // getter or setter operation\n  Zoom.prototype.fingersOperation = function (amounts) {\n    if (typeof amounts === 'number') {\n      this.numberOfFingers = amounts;\n    } else {\n      return this.numberOfFingers;\n    }\n  };\n  Zoom.prototype._doZoomTo = function (scale, origin, time, useCurrentPos) {\n    var _this = this;\n    if (time === void 0) {\n      time = this.zoomOpt.bounceTime;\n    }\n    if (useCurrentPos === void 0) {\n      useCurrentPos = false;\n    }\n    var _a = this.zoomOpt,\n      min = _a.min,\n      max = _a.max;\n    var fromScale = this.scale;\n    var toScale = between(scale, min, max);\n    (function () {\n      if (time === 0) {\n        _this.scroll.trigger(_this.scroll.eventTypes.zooming, {\n          scale: toScale\n        });\n        return;\n      }\n      if (time > 0) {\n        var timer_1;\n        var startTime_1 = getNow();\n        var endTime_1 = startTime_1 + time;\n        var scheduler_1 = function scheduler_1() {\n          var now = getNow();\n          if (now >= endTime_1) {\n            _this.scroll.trigger(_this.scroll.eventTypes.zooming, {\n              scale: toScale\n            });\n            cancelAnimationFrame(timer_1);\n            return;\n          }\n          var ratio = ease.bounce.fn((now - startTime_1) / time);\n          var currentScale = ratio * (toScale - fromScale) + fromScale;\n          _this.scroll.trigger(_this.scroll.eventTypes.zooming, {\n            scale: currentScale\n          });\n          timer_1 = requestAnimationFrame(scheduler_1);\n        };\n        // start scheduler job\n        scheduler_1();\n      }\n    })();\n    // suppose you are zooming by two fingers\n    this.fingersOperation(2);\n    this._zoomTo(toScale, fromScale, origin, time, useCurrentPos);\n  };\n  Zoom.prototype._zoomTo = function (toScale, fromScale, origin, time, useCurrentPos) {\n    if (useCurrentPos === void 0) {\n      useCurrentPos = false;\n    }\n    var ratio = toScale / origin.baseScale;\n    this.setScale(toScale);\n    var scroller = this.scroll.scroller;\n    var scrollBehaviorX = scroller.scrollBehaviorX,\n      scrollBehaviorY = scroller.scrollBehaviorY;\n    this.resetBoundaries([scrollBehaviorX, scrollBehaviorY]);\n    // position is restrained in boundary\n    var newX = this.getNewPos(origin.x, ratio, scrollBehaviorX, true, useCurrentPos);\n    var newY = this.getNewPos(origin.y, ratio, scrollBehaviorY, true, useCurrentPos);\n    if (scrollBehaviorX.currentPos !== Math.round(newX) || scrollBehaviorY.currentPos !== Math.round(newY) || toScale !== fromScale) {\n      scroller.scrollTo(newX, newY, time, ease.bounce, {\n        start: {\n          scale: fromScale\n        },\n        end: {\n          scale: toScale\n        }\n      });\n    }\n  };\n  Zoom.prototype.resolveOrigin = function (x, y) {\n    var _a = this.scroll.scroller,\n      scrollBehaviorX = _a.scrollBehaviorX,\n      scrollBehaviorY = _a.scrollBehaviorY;\n    var resolveFormula = {\n      left: function left() {\n        return 0;\n      },\n      top: function top() {\n        return 0;\n      },\n      right: function right() {\n        return scrollBehaviorX.contentSize;\n      },\n      bottom: function bottom() {\n        return scrollBehaviorY.contentSize;\n      },\n      center: function center(index) {\n        var baseSize = index === 0 ? scrollBehaviorX.contentSize : scrollBehaviorY.contentSize;\n        return baseSize / 2;\n      }\n    };\n    return {\n      originX: typeof x === 'number' ? x : resolveFormula[x](0),\n      originY: typeof y === 'number' ? y : resolveFormula[y](1)\n    };\n  };\n  Zoom.prototype.zoomStart = function (e) {\n    var firstFinger = e.touches[0];\n    var secondFinger = e.touches[1];\n    this.startDistance = this.getFingerDistance(e);\n    this.startScale = this.scale;\n    var _a = offsetToBody(this.wrapper),\n      left = _a.left,\n      top = _a.top;\n    this.origin = {\n      x: Math.abs(firstFinger.pageX + secondFinger.pageX) / 2 + left - this.scroll.x,\n      y: Math.abs(firstFinger.pageY + secondFinger.pageY) / 2 + top - this.scroll.y,\n      baseScale: this.startScale\n    };\n    this.scroll.trigger(this.scroll.eventTypes.beforeZoomStart);\n  };\n  Zoom.prototype.zoom = function (e) {\n    var currentDistance = this.getFingerDistance(e);\n    // at least minimalZoomDistance pixels for the zoom to initiate\n    if (!this.zoomed && Math.abs(currentDistance - this.startDistance) < this.zoomOpt.minimalZoomDistance) {\n      return;\n    }\n    // when out of boundary , perform a damping algorithm\n    var endScale = this.dampingScale(currentDistance / this.startDistance * this.startScale);\n    var ratio = endScale / this.startScale;\n    this.setScale(endScale);\n    if (!this.zoomed) {\n      this.zoomed = true;\n      this.scroll.trigger(this.scroll.eventTypes.zoomStart);\n    }\n    var scroller = this.scroll.scroller;\n    var scrollBehaviorX = scroller.scrollBehaviorX,\n      scrollBehaviorY = scroller.scrollBehaviorY;\n    var x = this.getNewPos(this.origin.x, ratio, scrollBehaviorX, false, false);\n    var y = this.getNewPos(this.origin.y, ratio, scrollBehaviorY, false, false);\n    this.scroll.trigger(this.scroll.eventTypes.zooming, {\n      scale: this.scale\n    });\n    scroller.translater.translate({\n      x: x,\n      y: y,\n      scale: endScale\n    });\n  };\n  Zoom.prototype.zoomEnd = function () {\n    if (!this.zoomed) return;\n    // if out of boundary, do rebound!\n    if (this.shouldRebound()) {\n      this._doZoomTo(this.scale, this.origin, this.zoomOpt.bounceTime);\n      return;\n    }\n    this.scroll.trigger(this.scroll.eventTypes.zoomEnd, {\n      scale: this.scale\n    });\n  };\n  Zoom.prototype.getFingerDistance = function (e) {\n    var firstFinger = e.touches[0];\n    var secondFinger = e.touches[1];\n    var deltaX = Math.abs(firstFinger.pageX - secondFinger.pageX);\n    var deltaY = Math.abs(firstFinger.pageY - secondFinger.pageY);\n    return getDistance(deltaX, deltaY);\n  };\n  Zoom.prototype.shouldRebound = function () {\n    var _a = this.zoomOpt,\n      min = _a.min,\n      max = _a.max;\n    var currentScale = this.scale;\n    // scale exceeded!\n    if (currentScale !== between(currentScale, min, max)) {\n      return true;\n    }\n    var _b = this.scroll.scroller,\n      scrollBehaviorX = _b.scrollBehaviorX,\n      scrollBehaviorY = _b.scrollBehaviorY;\n    // enlarge boundaries manually when zoom is end\n    this.resetBoundaries([scrollBehaviorX, scrollBehaviorY]);\n    var xInBoundary = scrollBehaviorX.checkInBoundary().inBoundary;\n    var yInBoundary = scrollBehaviorX.checkInBoundary().inBoundary;\n    return !(xInBoundary && yInBoundary);\n  };\n  Zoom.prototype.dampingScale = function (scale) {\n    var _a = this.zoomOpt,\n      min = _a.min,\n      max = _a.max;\n    if (scale < min) {\n      scale = 0.5 * min * Math.pow(2.0, scale / min);\n    } else if (scale > max) {\n      scale = 2.0 * max * Math.pow(0.5, max / scale);\n    }\n    return scale;\n  };\n  Zoom.prototype.setScale = function (scale) {\n    this.scale = scale;\n  };\n  Zoom.prototype.resetBoundaries = function (scrollBehaviorPairs) {\n    scrollBehaviorPairs.forEach(function (behavior) {\n      return behavior.computeBoundary();\n    });\n  };\n  Zoom.prototype.getNewPos = function (origin, lastScale, scrollBehavior, shouldInBoundary, useCurrentPos) {\n    if (useCurrentPos === void 0) {\n      useCurrentPos = false;\n    }\n    var newPos = origin - origin * lastScale + (useCurrentPos ? scrollBehavior.currentPos : scrollBehavior.startPos);\n    if (shouldInBoundary) {\n      newPos = between(newPos, scrollBehavior.maxScrollPos, scrollBehavior.minScrollPos);\n    }\n    // maxScrollPos or minScrollPos maybe a negative or positive digital\n    return newPos > 0 ? Math.floor(newPos) : Math.ceil(newPos);\n  };\n  Zoom.prototype.registerHooks = function (hooks, name, handler) {\n    hooks.on(name, handler, this);\n    this.hooksFn.push([hooks, name, handler]);\n  };\n  Zoom.prototype.destroy = function () {\n    this.hooksFn.forEach(function (item) {\n      var hooks = item[0];\n      var hooksName = item[1];\n      var handlerFn = item[2];\n      hooks.off(hooksName, handlerFn);\n    });\n    this.hooksFn.length = 0;\n  };\n  Zoom.pluginName = 'zoom';\n  return Zoom;\n}();\nvar BScrollFamily = /** @class */function () {\n  function BScrollFamily(scroll) {\n    this.ancestors = [];\n    this.descendants = [];\n    this.hooksManager = [];\n    this.analyzed = false;\n    this.selfScroll = scroll;\n  }\n  BScrollFamily.create = function (scroll) {\n    return new BScrollFamily(scroll);\n  };\n  BScrollFamily.prototype.hasAncestors = function (bscrollFamily) {\n    var index = findIndex(this.ancestors, function (_a) {\n      var item = _a[0];\n      return item === bscrollFamily;\n    });\n    return index > -1;\n  };\n  BScrollFamily.prototype.hasDescendants = function (bscrollFamily) {\n    var index = findIndex(this.descendants, function (_a) {\n      var item = _a[0];\n      return item === bscrollFamily;\n    });\n    return index > -1;\n  };\n  BScrollFamily.prototype.addAncestor = function (bscrollFamily, distance) {\n    var ancestors = this.ancestors;\n    ancestors.push([bscrollFamily, distance]);\n    // by ascend\n    ancestors.sort(function (a, b) {\n      return a[1] - b[1];\n    });\n  };\n  BScrollFamily.prototype.addDescendant = function (bscrollFamily, distance) {\n    var descendants = this.descendants;\n    descendants.push([bscrollFamily, distance]);\n    // by ascend\n    descendants.sort(function (a, b) {\n      return a[1] - b[1];\n    });\n  };\n  BScrollFamily.prototype.removeAncestor = function (bscrollFamily) {\n    var ancestors = this.ancestors;\n    if (ancestors.length) {\n      var index = findIndex(this.ancestors, function (_a) {\n        var item = _a[0];\n        return item === bscrollFamily;\n      });\n      if (index > -1) {\n        return ancestors.splice(index, 1);\n      }\n    }\n  };\n  BScrollFamily.prototype.removeDescendant = function (bscrollFamily) {\n    var descendants = this.descendants;\n    if (descendants.length) {\n      var index = findIndex(this.descendants, function (_a) {\n        var item = _a[0];\n        return item === bscrollFamily;\n      });\n      if (index > -1) {\n        return descendants.splice(index, 1);\n      }\n    }\n  };\n  BScrollFamily.prototype.registerHooks = function (hook, eventType, handler) {\n    hook.on(eventType, handler);\n    this.hooksManager.push([hook, eventType, handler]);\n  };\n  BScrollFamily.prototype.setAnalyzed = function (flag) {\n    if (flag === void 0) {\n      flag = false;\n    }\n    this.analyzed = flag;\n  };\n  BScrollFamily.prototype.purge = function () {\n    var _this = this;\n    // remove self from graph\n    this.ancestors.forEach(function (_a) {\n      var bscrollFamily = _a[0];\n      bscrollFamily.removeDescendant(_this);\n    });\n    this.descendants.forEach(function (_a) {\n      var bscrollFamily = _a[0];\n      bscrollFamily.removeAncestor(_this);\n    });\n    // remove all hook handlers\n    this.hooksManager.forEach(function (_a) {\n      var hooks = _a[0],\n        eventType = _a[1],\n        handler = _a[2];\n      hooks.off(eventType, handler);\n    });\n    this.hooksManager = [];\n  };\n  return BScrollFamily;\n}();\nvar sourcePrefix$1 = 'plugins.nestedScroll';\nvar propertiesMap$1 = [{\n  key: 'purgeNestedScroll',\n  name: 'purgeNestedScroll'\n}];\nvar propertiesConfig$1 = propertiesMap$1.map(function (item) {\n  return {\n    key: item.key,\n    sourceKey: sourcePrefix$1 + \".\" + item.name\n  };\n});\nvar DEFAUL_GROUP_ID = 'INTERNAL_NESTED_SCROLL';\nvar forceScrollStopHandler = function forceScrollStopHandler(scrolls) {\n  scrolls.forEach(function (scroll) {\n    if (scroll.pending) {\n      scroll.stop();\n      scroll.resetPosition();\n    }\n  });\n};\nvar enableScrollHander = function enableScrollHander(scrolls) {\n  scrolls.forEach(function (scroll) {\n    scroll.enable();\n  });\n};\nvar disableScrollHander = function disableScrollHander(scrolls, currentScroll) {\n  scrolls.forEach(function (scroll) {\n    if (scroll.hasHorizontalScroll === currentScroll.hasHorizontalScroll || scroll.hasVerticalScroll === currentScroll.hasVerticalScroll) {\n      scroll.disable();\n    }\n  });\n};\nvar syncTouchstartData = function syncTouchstartData(scrolls) {\n  scrolls.forEach(function (scroll) {\n    var _a = scroll.scroller,\n      actions = _a.actions,\n      scrollBehaviorX = _a.scrollBehaviorX,\n      scrollBehaviorY = _a.scrollBehaviorY;\n    // prevent click triggering many times\n    actions.fingerMoved = true;\n    actions.contentMoved = false;\n    actions.directionLockAction.reset();\n    scrollBehaviorX.start();\n    scrollBehaviorY.start();\n    scrollBehaviorX.resetStartPos();\n    scrollBehaviorY.resetStartPos();\n    actions.startTime = +new Date();\n  });\n};\nvar isOutOfBoundary = function isOutOfBoundary(scroll) {\n  var hasHorizontalScroll = scroll.hasHorizontalScroll,\n    hasVerticalScroll = scroll.hasVerticalScroll,\n    x = scroll.x,\n    y = scroll.y,\n    minScrollX = scroll.minScrollX,\n    maxScrollX = scroll.maxScrollX,\n    minScrollY = scroll.minScrollY,\n    maxScrollY = scroll.maxScrollY,\n    movingDirectionX = scroll.movingDirectionX,\n    movingDirectionY = scroll.movingDirectionY;\n  var ret = false;\n  var outOfLeftBoundary = x >= minScrollX && movingDirectionX === -1 /* Negative */;\n  var outOfRightBoundary = x <= maxScrollX && movingDirectionX === 1 /* Positive */;\n  var outOfTopBoundary = y >= minScrollY && movingDirectionY === -1 /* Negative */;\n  var outOfBottomBoundary = y <= maxScrollY && movingDirectionY === 1 /* Positive */;\n  if (hasVerticalScroll) {\n    ret = outOfTopBoundary || outOfBottomBoundary;\n  } else if (hasHorizontalScroll) {\n    ret = outOfLeftBoundary || outOfRightBoundary;\n  }\n  return ret;\n};\nvar isResettingPosition = function isResettingPosition(scroll) {\n  var hasHorizontalScroll = scroll.hasHorizontalScroll,\n    hasVerticalScroll = scroll.hasVerticalScroll,\n    x = scroll.x,\n    y = scroll.y,\n    minScrollX = scroll.minScrollX,\n    maxScrollX = scroll.maxScrollX,\n    minScrollY = scroll.minScrollY,\n    maxScrollY = scroll.maxScrollY;\n  var ret = false;\n  var outOfLeftBoundary = x > minScrollX;\n  var outOfRightBoundary = x < maxScrollX;\n  var outOfTopBoundary = y > minScrollY;\n  var outOfBottomBoundary = y < maxScrollY;\n  if (hasVerticalScroll) {\n    ret = outOfTopBoundary || outOfBottomBoundary;\n  } else if (hasHorizontalScroll) {\n    ret = outOfLeftBoundary || outOfRightBoundary;\n  }\n  return ret;\n};\nvar resetPositionHandler = function resetPositionHandler(scroll) {\n  scroll.scroller.reflow();\n  scroll.resetPosition(0 /* Immediately */);\n};\n\nvar calculateDistance = function calculateDistance(childNode, parentNode) {\n  var distance = 0;\n  var parent = childNode.parentNode;\n  while (parent && parent !== parentNode) {\n    distance++;\n    parent = parent.parentNode;\n  }\n  return distance;\n};\nvar NestedScroll = /** @class */function () {\n  function NestedScroll(scroll) {\n    var groupId = this.handleOptions(scroll);\n    var instance = NestedScroll.instancesMap[groupId];\n    if (!instance) {\n      instance = NestedScroll.instancesMap[groupId] = this;\n      instance.store = [];\n      instance.hooksFn = [];\n    }\n    instance.init(scroll);\n    return instance;\n  }\n  NestedScroll.getAllNestedScrolls = function () {\n    var instancesMap = NestedScroll.instancesMap;\n    return Object.keys(instancesMap).map(function (key) {\n      return instancesMap[key];\n    });\n  };\n  NestedScroll.purgeAllNestedScrolls = function () {\n    var nestedScrolls = NestedScroll.getAllNestedScrolls();\n    nestedScrolls.forEach(function (ns) {\n      return ns.purgeNestedScroll();\n    });\n  };\n  NestedScroll.prototype.handleOptions = function (scroll) {\n    var userOptions = scroll.options.nestedScroll === true ? {} : scroll.options.nestedScroll;\n    var defaultOptions = {\n      groupId: DEFAUL_GROUP_ID\n    };\n    this.options = extend(defaultOptions, userOptions);\n    var groupIdType = typeof this.options.groupId;\n    if (groupIdType !== 'string' && groupIdType !== 'number') {\n      warn('groupId must be string or number for NestedScroll plugin');\n    }\n    return this.options.groupId;\n  };\n  NestedScroll.prototype.init = function (scroll) {\n    scroll.proxy(propertiesConfig$1);\n    this.addBScroll(scroll);\n    this.buildBScrollGraph();\n    this.analyzeBScrollGraph();\n    this.ensureEventInvokeSequence();\n    this.handleHooks(scroll);\n  };\n  NestedScroll.prototype.handleHooks = function (scroll) {\n    var _this = this;\n    this.registerHooks(scroll.hooks, scroll.hooks.eventTypes.destroy, function () {\n      _this.deleteScroll(scroll);\n    });\n  };\n  NestedScroll.prototype.deleteScroll = function (scroll) {\n    var wrapper = scroll.wrapper;\n    wrapper.isBScrollContainer = undefined;\n    var store = this.store;\n    var hooksFn = this.hooksFn;\n    var i = findIndex(store, function (bscrollFamily) {\n      return bscrollFamily.selfScroll === scroll;\n    });\n    if (i > -1) {\n      var bscrollFamily = store[i];\n      bscrollFamily.purge();\n      store.splice(i, 1);\n    }\n    var k = findIndex(hooksFn, function (_a) {\n      var hooks = _a[0];\n      return hooks === scroll.hooks;\n    });\n    if (k > -1) {\n      var _a = hooksFn[k],\n        hooks = _a[0],\n        eventType = _a[1],\n        handler = _a[2];\n      hooks.off(eventType, handler);\n      hooksFn.splice(k, 1);\n    }\n  };\n  NestedScroll.prototype.addBScroll = function (scroll) {\n    this.store.push(BScrollFamily.create(scroll));\n  };\n  NestedScroll.prototype.buildBScrollGraph = function () {\n    var store = this.store;\n    var bf1;\n    var bf2;\n    var wrapper1;\n    var wrapper2;\n    var len = this.store.length;\n    // build graph\n    for (var i = 0; i < len; i++) {\n      bf1 = store[i];\n      wrapper1 = bf1.selfScroll.wrapper;\n      for (var j = 0; j < len; j++) {\n        bf2 = store[j];\n        wrapper2 = bf2.selfScroll.wrapper;\n        // same bs\n        if (bf1 === bf2) continue;\n        if (!wrapper1.contains(wrapper2)) continue;\n        // bs1 contains bs2\n        var distance = calculateDistance(wrapper2, wrapper1);\n        if (!bf1.hasDescendants(bf2)) {\n          bf1.addDescendant(bf2, distance);\n        }\n        if (!bf2.hasAncestors(bf1)) {\n          bf2.addAncestor(bf1, distance);\n        }\n      }\n    }\n  };\n  NestedScroll.prototype.analyzeBScrollGraph = function () {\n    this.store.forEach(function (bscrollFamily) {\n      if (bscrollFamily.analyzed) {\n        return;\n      }\n      var ancestors = bscrollFamily.ancestors,\n        descendants = bscrollFamily.descendants,\n        currentScroll = bscrollFamily.selfScroll;\n      var beforeScrollStartHandler = function beforeScrollStartHandler() {\n        // always get the latest scroll\n        var ancestorScrolls = ancestors.map(function (_a) {\n          var bscrollFamily = _a[0];\n          return bscrollFamily.selfScroll;\n        });\n        var descendantScrolls = descendants.map(function (_a) {\n          var bscrollFamily = _a[0];\n          return bscrollFamily.selfScroll;\n        });\n        forceScrollStopHandler(__spreadArrays(ancestorScrolls, descendantScrolls));\n        if (isResettingPosition(currentScroll)) {\n          resetPositionHandler(currentScroll);\n        }\n        syncTouchstartData(ancestorScrolls);\n        disableScrollHander(ancestorScrolls, currentScroll);\n      };\n      var touchEndHandler = function touchEndHandler() {\n        var ancestorScrolls = ancestors.map(function (_a) {\n          var bscrollFamily = _a[0];\n          return bscrollFamily.selfScroll;\n        });\n        var descendantScrolls = descendants.map(function (_a) {\n          var bscrollFamily = _a[0];\n          return bscrollFamily.selfScroll;\n        });\n        enableScrollHander(__spreadArrays(ancestorScrolls, descendantScrolls));\n      };\n      bscrollFamily.registerHooks(currentScroll, currentScroll.eventTypes.beforeScrollStart, beforeScrollStartHandler);\n      bscrollFamily.registerHooks(currentScroll, currentScroll.eventTypes.touchEnd, touchEndHandler);\n      var selfActionsHooks = currentScroll.scroller.actions.hooks;\n      bscrollFamily.registerHooks(selfActionsHooks, selfActionsHooks.eventTypes.detectMovingDirection, function () {\n        var ancestorScrolls = ancestors.map(function (_a) {\n          var bscrollFamily = _a[0];\n          return bscrollFamily.selfScroll;\n        });\n        var parentScroll = ancestorScrolls[0];\n        var otherAncestorScrolls = ancestorScrolls.slice(1);\n        var contentMoved = currentScroll.scroller.actions.contentMoved;\n        var isTopScroll = ancestorScrolls.length === 0;\n        if (contentMoved) {\n          disableScrollHander(ancestorScrolls, currentScroll);\n        } else if (!isTopScroll) {\n          if (isOutOfBoundary(currentScroll)) {\n            disableScrollHander([currentScroll], currentScroll);\n            if (parentScroll) {\n              enableScrollHander([parentScroll]);\n            }\n            disableScrollHander(otherAncestorScrolls, currentScroll);\n            return true;\n          }\n        }\n      });\n      bscrollFamily.setAnalyzed(true);\n    });\n  };\n  // make sure touchmove|touchend invoke from child to parent\n  NestedScroll.prototype.ensureEventInvokeSequence = function () {\n    var copied = this.store.slice();\n    var sequencedScroll = copied.sort(function (a, b) {\n      return a.descendants.length - b.descendants.length;\n    });\n    sequencedScroll.forEach(function (bscrollFamily) {\n      var scroll = bscrollFamily.selfScroll;\n      scroll.scroller.actionsHandler.rebindDOMEvents();\n    });\n  };\n  NestedScroll.prototype.registerHooks = function (hooks, name, handler) {\n    hooks.on(name, handler, this);\n    this.hooksFn.push([hooks, name, handler]);\n  };\n  NestedScroll.prototype.purgeNestedScroll = function () {\n    var groupId = this.options.groupId;\n    this.store.forEach(function (bscrollFamily) {\n      bscrollFamily.purge();\n    });\n    this.store = [];\n    this.hooksFn.forEach(function (_a) {\n      var hooks = _a[0],\n        eventType = _a[1],\n        handler = _a[2];\n      hooks.off(eventType, handler);\n    });\n    this.hooksFn = [];\n    delete NestedScroll.instancesMap[groupId];\n  };\n  NestedScroll.pluginName = 'nestedScroll';\n  NestedScroll.instancesMap = {};\n  return NestedScroll;\n}();\nvar PRE_NUM = 10;\nvar POST_NUM = 30;\nvar IndexCalculator = /** @class */function () {\n  function IndexCalculator(wrapperHeight, tombstoneHeight) {\n    this.wrapperHeight = wrapperHeight;\n    this.tombstoneHeight = tombstoneHeight;\n    this.lastDirection = 1 /* DOWN */;\n    this.lastPos = 0;\n  }\n  IndexCalculator.prototype.calculate = function (pos, list) {\n    var offset = pos - this.lastPos;\n    this.lastPos = pos;\n    var direction = this.getDirection(offset);\n    // important! start index is much more important than end index.\n    var start = this.calculateIndex(0, pos, list);\n    var end = this.calculateIndex(start, pos + this.wrapperHeight, list);\n    if (direction === 1 /* DOWN */) {\n      start -= PRE_NUM;\n      end += POST_NUM;\n    } else {\n      start -= POST_NUM;\n      end += PRE_NUM;\n    }\n    if (start < 0) {\n      start = 0;\n    }\n    return {\n      start: start,\n      end: end\n    };\n  };\n  IndexCalculator.prototype.getDirection = function (offset) {\n    var direction;\n    if (offset > 0) {\n      direction = 1 /* DOWN */;\n    } else if (offset < 0) {\n      direction = 0 /* UP */;\n    } else {\n      return this.lastDirection;\n    }\n    this.lastDirection = direction;\n    return direction;\n  };\n  IndexCalculator.prototype.calculateIndex = function (start, offset, list) {\n    if (offset <= 0) {\n      return start;\n    }\n    var i = start;\n    var startPos = list[i] && list[i].pos !== -1 ? list[i].pos : 0;\n    var lastPos = startPos;\n    var tombstone = 0;\n    while (i < list.length && list[i].pos < offset) {\n      lastPos = list[i].pos;\n      i++;\n    }\n    if (i === list.length) {\n      tombstone = Math.floor((offset - lastPos) / this.tombstoneHeight);\n    }\n    i += tombstone;\n    return i;\n  };\n  IndexCalculator.prototype.resetState = function () {\n    this.lastDirection = 1 /* DOWN */;\n    this.lastPos = 0;\n  };\n  return IndexCalculator;\n}();\nvar ListItem = /** @class */function () {\n  function ListItem() {\n    this.data = null;\n    this.dom = null;\n    this.tombstone = null;\n    this.width = 0;\n    this.height = 0;\n    this.pos = 0;\n  }\n  return ListItem;\n}();\nvar DataManager = /** @class */function () {\n  function DataManager(list, fetchFn, onFetchFinish) {\n    this.fetchFn = fetchFn;\n    this.onFetchFinish = onFetchFinish;\n    this.loadedNum = 0;\n    this.fetching = false;\n    this.hasMore = true;\n    this.list = list || [];\n  }\n  DataManager.prototype.update = function (end) {\n    return __awaiter(this, void 0, void 0, function () {\n      var len;\n      return __generator(this, function (_a) {\n        if (!this.hasMore) {\n          end = Math.min(end, this.list.length);\n        }\n        // add data placeholder\n        if (end > this.list.length) {\n          len = end - this.list.length;\n          this.addEmptyData(len);\n        }\n        // tslint:disable-next-line: no-floating-promises\n        return [2 /*return*/, this.checkToFetch(end)];\n      });\n    });\n  };\n  DataManager.prototype.add = function (data) {\n    for (var i = 0; i < data.length; i++) {\n      if (!this.list[this.loadedNum]) {\n        this.list[this.loadedNum] = {\n          data: data[i]\n        };\n      } else {\n        this.list[this.loadedNum] = _assign(_assign({}, this.list[this.loadedNum]), {\n          data: data[i]\n        });\n      }\n      this.loadedNum++;\n    }\n    return this.list;\n  };\n  DataManager.prototype.addEmptyData = function (len) {\n    for (var i = 0; i < len; i++) {\n      this.list.push(new ListItem());\n    }\n    return this.list;\n  };\n  DataManager.prototype.fetch = function (len) {\n    return __awaiter(this, void 0, void 0, function () {\n      var data;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            if (this.fetching) {\n              return [2 /*return*/, []];\n            }\n            this.fetching = true;\n            return [4 /*yield*/, this.fetchFn(len)];\n          case 1:\n            data = _a.sent();\n            this.fetching = false;\n            return [2 /*return*/, data];\n        }\n      });\n    });\n  };\n  DataManager.prototype.checkToFetch = function (end) {\n    return __awaiter(this, void 0, void 0, function () {\n      var min, newData, currentEnd;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            if (!this.hasMore) {\n              return [2 /*return*/];\n            }\n\n            if (end <= this.loadedNum) {\n              return [2 /*return*/];\n            }\n\n            min = end - this.loadedNum;\n            return [4 /*yield*/, this.fetch(min)];\n          case 1:\n            newData = _a.sent();\n            if (newData instanceof Array && newData.length) {\n              this.add(newData);\n              currentEnd = this.onFetchFinish(this.list, true);\n              return [2 /*return*/, this.checkToFetch(currentEnd)];\n            } else if (typeof newData === 'boolean' && newData === false) {\n              this.hasMore = false;\n              this.list.splice(this.loadedNum);\n              this.onFetchFinish(this.list, false);\n            }\n            return [2 /*return*/];\n        }\n      });\n    });\n  };\n\n  DataManager.prototype.getList = function () {\n    return this.list;\n  };\n  DataManager.prototype.resetState = function () {\n    this.loadedNum = 0;\n    this.fetching = false;\n    this.hasMore = true;\n    this.list = [];\n  };\n  return DataManager;\n}();\nvar Tombstone = /** @class */function () {\n  function Tombstone(create) {\n    this.create = create;\n    this.cached = [];\n    this.width = 0;\n    this.height = 0;\n    this.initialed = false;\n    this.getSize();\n  }\n  Tombstone.isTombstone = function (el) {\n    if (el && el.classList) {\n      return el.classList.contains('tombstone');\n    }\n    return false;\n  };\n  Tombstone.prototype.getSize = function () {\n    if (!this.initialed) {\n      var tombstone = this.create();\n      tombstone.style.position = 'absolute';\n      document.body.appendChild(tombstone);\n      tombstone.style.display = '';\n      this.height = tombstone.offsetHeight;\n      this.width = tombstone.offsetWidth;\n      document.body.removeChild(tombstone);\n      this.cached.push(tombstone);\n    }\n  };\n  Tombstone.prototype.getOne = function () {\n    var tombstone = this.cached.pop();\n    if (tombstone) {\n      var tombstoneStyle = tombstone.style;\n      tombstoneStyle.display = '';\n      tombstoneStyle.opacity = '1';\n      tombstoneStyle[style.transform] = '';\n      tombstoneStyle[style.transition] = '';\n      return tombstone;\n    }\n    return this.create();\n  };\n  Tombstone.prototype.recycle = function (tombstones) {\n    for (var _i = 0, tombstones_1 = tombstones; _i < tombstones_1.length; _i++) {\n      var tombstone = tombstones_1[_i];\n      tombstone.style.display = 'none';\n      this.cached.push(tombstone);\n    }\n    return this.cached;\n  };\n  Tombstone.prototype.recycleOne = function (tombstone) {\n    this.cached.push(tombstone);\n    return this.cached;\n  };\n  return Tombstone;\n}();\nvar ANIMATION_DURATION_MS = 200;\nvar DomManager = /** @class */function () {\n  function DomManager(content, renderFn, tombstone) {\n    this.renderFn = renderFn;\n    this.tombstone = tombstone;\n    this.unusedDom = [];\n    this.timers = [];\n    this.setContent(content);\n  }\n  DomManager.prototype.update = function (list, start, end) {\n    if (start >= list.length) {\n      start = list.length - 1;\n    }\n    if (end > list.length) {\n      end = list.length;\n    }\n    this.collectUnusedDom(list, start, end);\n    this.createDom(list, start, end);\n    this.cacheHeight(list, start, end);\n    var _a = this.positionDom(list, start, end),\n      startPos = _a.startPos,\n      startDelta = _a.startDelta,\n      endPos = _a.endPos;\n    return {\n      start: start,\n      startPos: startPos,\n      startDelta: startDelta,\n      end: end,\n      endPos: endPos\n    };\n  };\n  DomManager.prototype.collectUnusedDom = function (list, start, end) {\n    // TODO optimise\n    for (var i = 0; i < list.length; i++) {\n      if (i === start) {\n        i = end - 1;\n        continue;\n      }\n      if (list[i].dom) {\n        var dom = list[i].dom;\n        if (Tombstone.isTombstone(dom)) {\n          this.tombstone.recycleOne(dom);\n          dom.style.display = 'none';\n        } else {\n          this.unusedDom.push(dom);\n        }\n        list[i].dom = null;\n      }\n    }\n    return list;\n  };\n  DomManager.prototype.createDom = function (list, start, end) {\n    for (var i = start; i < end; i++) {\n      var dom = list[i].dom;\n      var data = list[i].data;\n      if (dom) {\n        if (Tombstone.isTombstone(dom) && data) {\n          list[i].tombstone = dom;\n          list[i].dom = null;\n        } else {\n          continue;\n        }\n      }\n      dom = data ? this.renderFn(data, this.unusedDom.pop()) : this.tombstone.getOne();\n      dom.style.position = 'absolute';\n      list[i].dom = dom;\n      list[i].pos = -1;\n      this.content.appendChild(dom);\n    }\n  };\n  DomManager.prototype.cacheHeight = function (list, start, end) {\n    for (var i = start; i < end; i++) {\n      if (list[i].data && !list[i].height) {\n        list[i].height = list[i].dom.offsetHeight;\n      }\n    }\n  };\n  DomManager.prototype.positionDom = function (list, start, end) {\n    var _this = this;\n    var tombstoneEles = [];\n    var _a = this.getStartPos(list, start, end),\n      startPos = _a.start,\n      startDelta = _a.delta;\n    var pos = startPos;\n    for (var i = start; i < end; i++) {\n      var tombstone = list[i].tombstone;\n      if (tombstone) {\n        var tombstoneStyle = tombstone.style;\n        tombstoneStyle[style.transition] = cssVendor + \"transform \" + ANIMATION_DURATION_MS + \"ms, opacity \" + ANIMATION_DURATION_MS + \"ms\";\n        tombstoneStyle[style.transform] = \"translateY(\" + pos + \"px)\";\n        tombstoneStyle.opacity = '0';\n        list[i].tombstone = null;\n        tombstoneEles.push(tombstone);\n      }\n      if (list[i].dom && list[i].pos !== pos) {\n        list[i].dom.style[style.transform] = \"translateY(\" + pos + \"px)\";\n        list[i].pos = pos;\n      }\n      pos += list[i].height || this.tombstone.height;\n    }\n    var timerId = window.setTimeout(function () {\n      _this.tombstone.recycle(tombstoneEles);\n    }, ANIMATION_DURATION_MS);\n    this.timers.push(timerId);\n    return {\n      startPos: startPos,\n      startDelta: startDelta,\n      endPos: pos\n    };\n  };\n  DomManager.prototype.getStartPos = function (list, start, end) {\n    if (list[start] && list[start].pos !== -1) {\n      return {\n        start: list[start].pos,\n        delta: 0\n      };\n    }\n    // TODO optimise\n    var pos = list[0].pos === -1 ? 0 : list[0].pos;\n    for (var i_1 = 0; i_1 < start; i_1++) {\n      pos += list[i_1].height || this.tombstone.height;\n    }\n    var originPos = pos;\n    var i;\n    for (i = start; i < end; i++) {\n      if (!Tombstone.isTombstone(list[i].dom) && list[i].pos !== -1) {\n        pos = list[i].pos;\n        break;\n      }\n    }\n    var x = i;\n    if (x < end) {\n      while (x > start) {\n        pos -= list[x - 1].height;\n        x--;\n      }\n    }\n    var delta = originPos - pos;\n    return {\n      start: pos,\n      delta: delta\n    };\n  };\n  DomManager.prototype.removeTombstone = function () {\n    var tombstones = this.content.querySelectorAll('.tombstone');\n    for (var i = tombstones.length - 1; i >= 0; i--) {\n      this.content.removeChild(tombstones[i]);\n    }\n  };\n  DomManager.prototype.setContent = function (content) {\n    if (content !== this.content) {\n      this.content = content;\n    }\n  };\n  DomManager.prototype.destroy = function () {\n    this.removeTombstone();\n    this.timers.forEach(function (id) {\n      clearTimeout(id);\n    });\n  };\n  DomManager.prototype.resetState = function () {\n    this.destroy();\n    this.timers = [];\n    this.unusedDom = [];\n  };\n  return DomManager;\n}();\nvar EXTRA_SCROLL_Y = -2000;\nvar InfinityScroll = /** @class */function () {\n  function InfinityScroll(scroll) {\n    this.scroll = scroll;\n    this.start = 0;\n    this.end = 0;\n    this.init();\n  }\n  InfinityScroll.prototype.init = function () {\n    var _this = this;\n    this.handleOptions();\n    var _a = this.options,\n      fetchFn = _a.fetch,\n      renderFn = _a.render,\n      createTombstoneFn = _a.createTombstone;\n    this.tombstone = new Tombstone(createTombstoneFn);\n    this.indexCalculator = new IndexCalculator(this.scroll.scroller.scrollBehaviorY.wrapperSize, this.tombstone.height);\n    this.domManager = new DomManager(this.scroll.scroller.content, renderFn, this.tombstone);\n    this.dataManager = new DataManager([], fetchFn, this.onFetchFinish.bind(this));\n    this.scroll.on(this.scroll.eventTypes.destroy, this.destroy, this);\n    this.scroll.on(this.scroll.eventTypes.scroll, this.update, this);\n    this.scroll.on(this.scroll.eventTypes.contentChanged, function (content) {\n      _this.domManager.setContent(content);\n      _this.indexCalculator.resetState();\n      _this.domManager.resetState();\n      _this.dataManager.resetState();\n      _this.update({\n        y: 0\n      });\n    });\n    var scrollBehaviorY = this.scroll.scroller.scrollBehaviorY;\n    scrollBehaviorY.hooks.on(scrollBehaviorY.hooks.eventTypes.computeBoundary, this.modifyBoundary, this);\n    this.update({\n      y: 0\n    });\n  };\n  InfinityScroll.prototype.modifyBoundary = function (boundary) {\n    // manually set position to allow scroll\n    boundary.maxScrollPos = EXTRA_SCROLL_Y;\n  };\n  InfinityScroll.prototype.handleOptions = function () {\n    // narrow down type to an object\n    var infinityOptions = this.scroll.options.infinity;\n    if (infinityOptions) {\n      if (typeof infinityOptions.fetch !== 'function') {\n        warn('Infinity plugin need fetch Function to new data.');\n      }\n      if (typeof infinityOptions.render !== 'function') {\n        warn('Infinity plugin need render Function to render each item.');\n      }\n      if (typeof infinityOptions.render !== 'function') {\n        warn('Infinity plugin need createTombstone Function to create tombstone.');\n      }\n      this.options = infinityOptions;\n    }\n    this.scroll.options.probeType = 3 /* Realtime */;\n  };\n\n  InfinityScroll.prototype.update = function (pos) {\n    var position = Math.round(-pos.y);\n    // important! calculate start/end index to render\n    var _a = this.indexCalculator.calculate(position, this.dataManager.getList()),\n      start = _a.start,\n      end = _a.end;\n    this.start = start;\n    this.end = end;\n    // tslint:disable-next-line: no-floating-promises\n    this.dataManager.update(end);\n    this.updateDom(this.dataManager.getList());\n  };\n  InfinityScroll.prototype.onFetchFinish = function (list, hasMore) {\n    var end = this.updateDom(list).end;\n    if (!hasMore) {\n      this.domManager.removeTombstone();\n      this.scroll.scroller.animater.stop();\n      this.scroll.resetPosition();\n    }\n    // tslint:disable-next-line: no-floating-promises\n    return end;\n  };\n  InfinityScroll.prototype.updateDom = function (list) {\n    var _a = this.domManager.update(list, this.start, this.end),\n      end = _a.end,\n      startPos = _a.startPos,\n      endPos = _a.endPos,\n      startDelta = _a.startDelta;\n    if (startDelta) {\n      this.scroll.minScrollY = startDelta;\n    }\n    if (endPos > this.scroll.maxScrollY) {\n      this.scroll.maxScrollY = -(endPos - this.scroll.scroller.scrollBehaviorY.wrapperSize);\n    }\n    return {\n      end: end,\n      startPos: startPos,\n      endPos: endPos\n    };\n  };\n  InfinityScroll.prototype.destroy = function () {\n    var _a = this.scroll.scroller,\n      content = _a.content,\n      scrollBehaviorY = _a.scrollBehaviorY;\n    while (content.firstChild) {\n      content.removeChild(content.firstChild);\n    }\n    this.domManager.destroy();\n    this.scroll.off('scroll', this.update);\n    this.scroll.off('destroy', this.destroy);\n    scrollBehaviorY.hooks.off(scrollBehaviorY.hooks.eventTypes.computeBoundary);\n  };\n  InfinityScroll.pluginName = 'infinity';\n  return InfinityScroll;\n}();\nvar sourcePrefix = 'plugins.movable';\nvar propertiesMap = [{\n  key: 'putAt',\n  name: 'putAt'\n}];\nvar propertiesConfig = propertiesMap.map(function (item) {\n  return {\n    key: item.key,\n    sourceKey: sourcePrefix + \".\" + item.name\n  };\n});\nvar Movable = /** @class */function () {\n  function Movable(scroll) {\n    this.scroll = scroll;\n    this.handleBScroll();\n    this.handleHooks();\n  }\n  Movable.prototype.handleBScroll = function () {\n    this.scroll.proxy(propertiesConfig);\n  };\n  Movable.prototype.handleHooks = function () {\n    var _this = this;\n    this.hooksFn = [];\n    var _a = this.scroll.scroller,\n      scrollBehaviorX = _a.scrollBehaviorX,\n      scrollBehaviorY = _a.scrollBehaviorY;\n    var computeBoundary = function computeBoundary(boundary, behavior) {\n      if (boundary.maxScrollPos > 0) {\n        // content is smaller than wrapper\n        boundary.minScrollPos = behavior.wrapperSize - behavior.contentSize;\n        boundary.maxScrollPos = 0;\n      }\n    };\n    this.registerHooks(scrollBehaviorX.hooks, scrollBehaviorX.hooks.eventTypes.ignoreHasScroll, function () {\n      return true;\n    });\n    this.registerHooks(scrollBehaviorX.hooks, scrollBehaviorX.hooks.eventTypes.computeBoundary, function (boundary) {\n      computeBoundary(boundary, scrollBehaviorX);\n    });\n    this.registerHooks(scrollBehaviorY.hooks, scrollBehaviorY.hooks.eventTypes.ignoreHasScroll, function () {\n      return true;\n    });\n    this.registerHooks(scrollBehaviorY.hooks, scrollBehaviorY.hooks.eventTypes.computeBoundary, function (boundary) {\n      computeBoundary(boundary, scrollBehaviorY);\n    });\n    this.registerHooks(this.scroll.hooks, this.scroll.hooks.eventTypes.destroy, function () {\n      _this.destroy();\n    });\n  };\n  Movable.prototype.putAt = function (x, y, time, easing) {\n    if (time === void 0) {\n      time = this.scroll.options.bounceTime;\n    }\n    if (easing === void 0) {\n      easing = ease.bounce;\n    }\n    var position = this.resolvePostion(x, y);\n    this.scroll.scrollTo(position.x, position.y, time, easing);\n  };\n  Movable.prototype.resolvePostion = function (x, y) {\n    var _a = this.scroll.scroller,\n      scrollBehaviorX = _a.scrollBehaviorX,\n      scrollBehaviorY = _a.scrollBehaviorY;\n    var resolveFormula = {\n      left: function left() {\n        return 0;\n      },\n      top: function top() {\n        return 0;\n      },\n      right: function right() {\n        return scrollBehaviorX.minScrollPos;\n      },\n      bottom: function bottom() {\n        return scrollBehaviorY.minScrollPos;\n      },\n      center: function center(index) {\n        var baseSize = index === 0 ? scrollBehaviorX.minScrollPos : scrollBehaviorY.minScrollPos;\n        return baseSize / 2;\n      }\n    };\n    return {\n      x: typeof x === 'number' ? x : resolveFormula[x](0),\n      y: typeof y === 'number' ? y : resolveFormula[y](1)\n    };\n  };\n  Movable.prototype.destroy = function () {\n    this.hooksFn.forEach(function (item) {\n      var hooks = item[0];\n      var hooksName = item[1];\n      var handlerFn = item[2];\n      hooks.off(hooksName, handlerFn);\n    });\n    this.hooksFn.length = 0;\n  };\n  Movable.prototype.registerHooks = function (hooks, name, handler) {\n    hooks.on(name, handler, this);\n    this.hooksFn.push([hooks, name, handler]);\n  };\n  Movable.pluginName = 'movable';\n  Movable.applyOrder = \"pre\" /* Pre */;\n  return Movable;\n}();\nvar isImageTag = function isImageTag(el) {\n  return el.tagName.toLowerCase() === 'img';\n};\nvar ObserveImage = /** @class */function () {\n  function ObserveImage(scroll) {\n    this.scroll = scroll;\n    this.refreshTimer = 0;\n    this.init();\n  }\n  ObserveImage.prototype.init = function () {\n    this.handleOptions(this.scroll.options.observeImage);\n    this.bindEventsToWrapper();\n  };\n  ObserveImage.prototype.handleOptions = function (userOptions) {\n    if (userOptions === void 0) {\n      userOptions = {};\n    }\n    userOptions = userOptions === true ? {} : userOptions;\n    var defaultOptions = {\n      debounceTime: 100\n    };\n    this.options = extend(defaultOptions, userOptions);\n  };\n  ObserveImage.prototype.bindEventsToWrapper = function () {\n    var wrapper = this.scroll.scroller.wrapper;\n    this.imageLoadEventRegister = new EventRegister(wrapper, [{\n      name: 'load',\n      handler: this.load.bind(this),\n      capture: true\n    }]);\n    this.imageErrorEventRegister = new EventRegister(wrapper, [{\n      name: 'error',\n      handler: this.load.bind(this),\n      capture: true\n    }]);\n  };\n  ObserveImage.prototype.load = function (e) {\n    var _this = this;\n    var target = e.target;\n    var debounceTime = this.options.debounceTime;\n    if (target && isImageTag(target)) {\n      if (debounceTime === 0) {\n        this.scroll.refresh();\n      } else {\n        clearTimeout(this.refreshTimer);\n        this.refreshTimer = window.setTimeout(function () {\n          _this.scroll.refresh();\n        }, this.options.debounceTime);\n      }\n    }\n  };\n  ObserveImage.pluginName = 'observeImage';\n  return ObserveImage;\n}();\nvar resolveRatioOption = function resolveRatioOption(ratioConfig) {\n  var ret = {\n    ratioX: 0,\n    ratioY: 0\n  };\n  /* istanbul ignore if  */\n  if (!ratioConfig) {\n    return ret;\n  }\n  if (typeof ratioConfig === 'number') {\n    ret.ratioX = ret.ratioY = ratioConfig;\n  } else if (typeof ratioConfig === 'object' && ratioConfig) {\n    ret.ratioX = ratioConfig.x || 0;\n    ret.ratioY = ratioConfig.y || 0;\n  }\n  return ret;\n};\nvar handleBubbleAndCancelable = function handleBubbleAndCancelable(e) {\n  maybePrevent(e);\n  e.stopPropagation();\n};\nvar Indicator = /** @class */function () {\n  function Indicator(scroll, options) {\n    this.scroll = scroll;\n    this.options = options;\n    this.currentPos = {\n      x: 0,\n      y: 0\n    };\n    this.hooksFn = [];\n    this.handleDOM();\n    this.handleHooks();\n    this.handleInteractive();\n  }\n  Indicator.prototype.handleDOM = function () {\n    var _a = this.options,\n      relationElement = _a.relationElement,\n      _b = _a.relationElementHandleElementIndex,\n      relationElementHandleElementIndex = _b === void 0 ? 0 : _b;\n    this.wrapper = relationElement;\n    this.indicatorEl = this.wrapper.children[relationElementHandleElementIndex];\n  };\n  Indicator.prototype.handleHooks = function () {\n    var _this = this;\n    var scroll = this.scroll;\n    var scrollHooks = scroll.hooks;\n    var translaterHooks = scroll.scroller.translater.hooks;\n    var animaterHooks = scroll.scroller.animater.hooks;\n    this.registerHooks(scrollHooks, scrollHooks.eventTypes.refresh, this.refresh);\n    this.registerHooks(translaterHooks, translaterHooks.eventTypes.translate, function (pos) {\n      _this.updatePosition(pos);\n    });\n    this.registerHooks(animaterHooks, animaterHooks.eventTypes.time, this.transitionTime);\n    this.registerHooks(animaterHooks, animaterHooks.eventTypes.timeFunction, this.transitionTimingFunction);\n  };\n  Indicator.prototype.transitionTime = function (time) {\n    if (time === void 0) {\n      time = 0;\n    }\n    this.indicatorEl.style[style.transitionDuration] = time + 'ms';\n  };\n  Indicator.prototype.transitionTimingFunction = function (easing) {\n    this.indicatorEl.style[style.transitionTimingFunction] = easing;\n  };\n  Indicator.prototype.handleInteractive = function () {\n    if (this.options.interactive !== false) {\n      this.registerEvents();\n    }\n  };\n  Indicator.prototype.registerHooks = function (hooks, name, handler) {\n    hooks.on(name, handler, this);\n    this.hooksFn.push([hooks, name, handler]);\n  };\n  Indicator.prototype.registerEvents = function () {\n    var _a = this.scroll.options,\n      disableMouse = _a.disableMouse,\n      disableTouch = _a.disableTouch;\n    var startEvents = [];\n    var moveEvents = [];\n    var endEvents = [];\n    if (!disableMouse) {\n      startEvents.push({\n        name: 'mousedown',\n        handler: this.start.bind(this)\n      });\n      moveEvents.push({\n        name: 'mousemove',\n        handler: this.move.bind(this)\n      });\n      endEvents.push({\n        name: 'mouseup',\n        handler: this.end.bind(this)\n      });\n    }\n    if (!disableTouch) {\n      startEvents.push({\n        name: 'touchstart',\n        handler: this.start.bind(this)\n      });\n      moveEvents.push({\n        name: 'touchmove',\n        handler: this.move.bind(this)\n      });\n      endEvents.push({\n        name: 'touchend',\n        handler: this.end.bind(this)\n      }, {\n        name: 'touchcancel',\n        handler: this.end.bind(this)\n      });\n    }\n    this.startEventRegister = new EventRegister(this.indicatorEl, startEvents);\n    this.moveEventRegister = new EventRegister(window, moveEvents);\n    this.endEventRegister = new EventRegister(window, endEvents);\n  };\n  Indicator.prototype.refresh = function () {\n    var _a = this.scroll,\n      x = _a.x,\n      y = _a.y,\n      hasHorizontalScroll = _a.hasHorizontalScroll,\n      hasVerticalScroll = _a.hasVerticalScroll,\n      maxBScrollX = _a.maxScrollX,\n      maxBScrollY = _a.maxScrollY;\n    var _b = resolveRatioOption(this.options.ratio),\n      ratioX = _b.ratioX,\n      ratioY = _b.ratioY;\n    var _c = getClientSize(this.wrapper),\n      wrapperWidth = _c.width,\n      wrapperHeight = _c.height;\n    var _d = getRect(this.indicatorEl),\n      indicatorWidth = _d.width,\n      indicatorHeight = _d.height;\n    if (hasHorizontalScroll) {\n      this.maxScrollX = wrapperWidth - indicatorWidth;\n      this.translateXSign = this.maxScrollX > 0 ? -1 /* Positive */ : 1 /* NotPositive */;\n      this.minScrollX = 0;\n      // ensure positive\n      this.ratioX = ratioX ? ratioX : Math.abs(this.maxScrollX / maxBScrollX);\n    }\n    if (hasVerticalScroll) {\n      this.maxScrollY = wrapperHeight - indicatorHeight;\n      this.translateYSign = this.maxScrollY > 0 ? -1 /* Positive */ : 1 /* NotPositive */;\n      this.minScrollY = 0;\n      this.ratioY = ratioY ? ratioY : Math.abs(this.maxScrollY / maxBScrollY);\n    }\n    this.updatePosition({\n      x: x,\n      y: y\n    });\n  };\n  Indicator.prototype.start = function (e) {\n    if (this.BScrollIsDisabled()) {\n      return;\n    }\n    var point = e.touches ? e.touches[0] : e;\n    handleBubbleAndCancelable(e);\n    this.initiated = true;\n    this.moved = false;\n    this.lastPointX = point.pageX;\n    this.lastPointY = point.pageY;\n    this.startTime = getNow();\n    this.scroll.scroller.hooks.trigger(this.scroll.scroller.hooks.eventTypes.beforeScrollStart);\n  };\n  Indicator.prototype.BScrollIsDisabled = function () {\n    return !this.scroll.enabled;\n  };\n  Indicator.prototype.move = function (e) {\n    if (!this.initiated) {\n      return;\n    }\n    var point = e.touches ? e.touches[0] : e;\n    var pointX = point.pageX;\n    var pointY = point.pageY;\n    handleBubbleAndCancelable(e);\n    var deltaX = pointX - this.lastPointX;\n    var deltaY = pointY - this.lastPointY;\n    this.lastPointX = pointX;\n    this.lastPointY = pointY;\n    if (!this.moved && !this.indicatorNotMoved(deltaX, deltaY)) {\n      this.moved = true;\n      this.scroll.scroller.hooks.trigger(this.scroll.scroller.hooks.eventTypes.scrollStart);\n    }\n    if (this.moved) {\n      var newPos = this.getBScrollPosByRatio(this.currentPos, deltaX, deltaY);\n      this.syncBScroll(newPos);\n    }\n  };\n  Indicator.prototype.end = function (e) {\n    if (!this.initiated) {\n      return;\n    }\n    this.initiated = false;\n    handleBubbleAndCancelable(e);\n    if (this.moved) {\n      var _a = this.scroll,\n        x = _a.x,\n        y = _a.y;\n      this.scroll.scroller.hooks.trigger(this.scroll.scroller.hooks.eventTypes.scrollEnd, {\n        x: x,\n        y: y\n      });\n    }\n  };\n  Indicator.prototype.getBScrollPosByRatio = function (currentPos, deltaX, deltaY) {\n    var currentX = currentPos.x,\n      currentY = currentPos.y;\n    var _a = this.scroll,\n      hasHorizontalScroll = _a.hasHorizontalScroll,\n      hasVerticalScroll = _a.hasVerticalScroll,\n      BScrollMinScrollX = _a.minScrollX,\n      BScrollMaxScrollX = _a.maxScrollX,\n      BScrollMinScrollY = _a.minScrollY,\n      BScrollMaxScrollY = _a.maxScrollY;\n    var _b = this.scroll,\n      x = _b.x,\n      y = _b.y;\n    if (hasHorizontalScroll) {\n      var newPosX = between(currentX + deltaX, Math.min(this.minScrollX, this.maxScrollX), Math.max(this.minScrollX, this.maxScrollX));\n      var roundX = Math.round(newPosX / this.ratioX * this.translateXSign);\n      x = between(roundX, BScrollMaxScrollX, BScrollMinScrollX);\n    }\n    if (hasVerticalScroll) {\n      var newPosY = between(currentY + deltaY, Math.min(this.minScrollY, this.maxScrollY), Math.max(this.minScrollY, this.maxScrollY));\n      var roundY = Math.round(newPosY / this.ratioY * this.translateYSign);\n      y = between(roundY, BScrollMaxScrollY, BScrollMinScrollY);\n    }\n    return {\n      x: x,\n      y: y\n    };\n  };\n  Indicator.prototype.indicatorNotMoved = function (deltaX, deltaY) {\n    var _a = this.currentPos,\n      x = _a.x,\n      y = _a.y;\n    var xNotMoved = x === this.minScrollX && deltaX <= 0 || x === this.maxScrollX && deltaX >= 0;\n    var yNotMoved = y === this.minScrollY && deltaY <= 0 || y === this.maxScrollY && deltaY >= 0;\n    return xNotMoved && yNotMoved;\n  };\n  Indicator.prototype.syncBScroll = function (newPos) {\n    var timestamp = getNow();\n    var _a = this.scroll,\n      options = _a.options,\n      scroller = _a.scroller;\n    var probeType = options.probeType,\n      momentumLimitTime = options.momentumLimitTime;\n    scroller.translater.translate(newPos);\n    // dispatch scroll in interval time\n    if (timestamp - this.startTime > momentumLimitTime) {\n      this.startTime = timestamp;\n      if (probeType === 1 /* Throttle */) {\n        scroller.hooks.trigger(scroller.hooks.eventTypes.scroll, newPos);\n      }\n    }\n    // dispatch scroll all the time\n    if (probeType > 1 /* Throttle */) {\n      scroller.hooks.trigger(scroller.hooks.eventTypes.scroll, newPos);\n    }\n  };\n  Indicator.prototype.updatePosition = function (BScrollPos) {\n    var newIndicatorPos = this.getIndicatorPosByRatio(BScrollPos);\n    this.applyTransformProperty(newIndicatorPos);\n    this.currentPos = _assign({}, newIndicatorPos);\n  };\n  Indicator.prototype.applyTransformProperty = function (pos) {\n    var translateZ = this.scroll.options.translateZ;\n    var transformProperties = [\"translateX(\" + pos.x + \"px)\", \"translateY(\" + pos.y + \"px)\", \"\" + translateZ];\n    this.indicatorEl.style[style.transform] = transformProperties.join(' ');\n  };\n  Indicator.prototype.getIndicatorPosByRatio = function (BScrollPos) {\n    var x = BScrollPos.x,\n      y = BScrollPos.y;\n    var _a = this.scroll,\n      hasHorizontalScroll = _a.hasHorizontalScroll,\n      hasVerticalScroll = _a.hasVerticalScroll;\n    var position = _assign({}, this.currentPos);\n    if (hasHorizontalScroll) {\n      var roundX = Math.round(this.ratioX * x * this.translateXSign);\n      // maybe maxScrollX is negative\n      position.x = between(roundX, Math.min(this.minScrollX, this.maxScrollX), Math.max(this.minScrollX, this.maxScrollX));\n    }\n    if (hasVerticalScroll) {\n      var roundY = Math.round(this.ratioY * y * this.translateYSign);\n      // maybe maxScrollY is negative\n      position.y = between(roundY, Math.min(this.minScrollY, this.maxScrollY), Math.max(this.minScrollY, this.maxScrollY));\n    }\n    return position;\n  };\n  Indicator.prototype.destroy = function () {\n    if (this.options.interactive !== false) {\n      this.startEventRegister.destroy();\n      this.moveEventRegister.destroy();\n      this.endEventRegister.destroy();\n    }\n    this.hooksFn.forEach(function (item) {\n      var hooks = item[0];\n      var hooksName = item[1];\n      var handlerFn = item[2];\n      hooks.off(hooksName, handlerFn);\n    });\n    this.hooksFn.length = 0;\n  };\n  return Indicator;\n}();\nvar Indicators = /** @class */function () {\n  function Indicators(scroll) {\n    this.scroll = scroll;\n    this.options = [];\n    this.indicators = [];\n    this.handleOptions();\n    this.handleHooks();\n  }\n  Indicators.prototype.handleOptions = function () {\n    var UserIndicatorsOptions = this.scroll.options.indicators;\n    assert(Array.isArray(UserIndicatorsOptions), \"'indicators' must be an array.\");\n    for (var _i = 0, UserIndicatorsOptions_1 = UserIndicatorsOptions; _i < UserIndicatorsOptions_1.length; _i++) {\n      var indicatorOptions = UserIndicatorsOptions_1[_i];\n      assert(!!indicatorOptions.relationElement, \"'relationElement' must be a HTMLElement.\");\n      this.createIndicators(indicatorOptions);\n    }\n  };\n  Indicators.prototype.createIndicators = function (options) {\n    this.indicators.push(new Indicator(this.scroll, options));\n  };\n  Indicators.prototype.handleHooks = function () {\n    var _this = this;\n    var scrollHooks = this.scroll.hooks;\n    scrollHooks.on(scrollHooks.eventTypes.destroy, function () {\n      for (var _i = 0, _a = _this.indicators; _i < _a.length; _i++) {\n        var indicator = _a[_i];\n        indicator.destroy();\n      }\n      _this.indicators = [];\n    });\n  };\n  Indicators.pluginName = 'indicators';\n  return Indicators;\n}();\nBScroll.use(MouseWheel).use(ObserveDOM).use(PullDown).use(PullUp).use(ScrollBar).use(Slide).use(Wheel).use(Zoom).use(NestedScroll).use(InfinityScroll).use(Movable).use(ObserveImage).use(Indicators);\nexport { Behavior, CustomOptions, Indicators, InfinityScroll, MouseWheel, Movable, NestedScroll, ObserveDOM as ObserveDom, ObserveImage, PullDown as PullDownRefresh, PullUp as PullUpLoad, ScrollBar, Slide, Wheel, Zoom, createBScroll, BScroll as default };"],"sourceRoot":""}