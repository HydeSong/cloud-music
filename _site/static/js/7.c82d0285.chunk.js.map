{"version":3,"sources":["baseUI/header/index.js","application/Album/style.js","application/Album/index.js","api/utils.js","baseUI/loading/index.js","baseUI/loading-v2/index.js","baseUI/scroll/index.js"],"names":["HeaderContainer","styled","div","_templateObject","_taggedTemplateLiteral","style","Header","React","forwardRef","props","ref","handleClick","title","isMarquee","createElement","className","onClick","defaultProps","memo","Container","TopDesc","_templateObject2","background","Menu","_templateObject3","SongList","_templateObject4","SongItem","ul","_templateObject5","noWrap","connect","state","currentAlbum","getIn","enterLoading","dispatch","getAlbumDataDispatch","id","changeEnterLoading","getAlbumList","_useState","useState","_useState2","_slicedToArray","showStatus","setShowStatus","_useState3","_useState4","setTitle","_useState5","_useState6","setIsMarquee","headerEl","useRef","currentAlbumImmutable","match","params","useEffect","toJS","handleBack","useCallback","handleScroll","pos","minScrollY","HEADER_HEIGHT","percent","Math","abs","y","headerDom","current","backgroundColor","opacity","min","name","CSSTransition","in","timeout","classNames","appear","unmountOnExit","onExited","history","goBack","isEmptyObject","Scroll","bounceTop","onScroll","coverImgUrl","src","alt","getCount","subscribedCount","creator","avatarUrl","nickname","tracks","length","map","item","index","key","getName","ar","al","Loading","count","floor","debounce","func","delay","timer","_this","_len","arguments","args","Array","_key","clearTimeout","setTimeout","apply","filterIndex","rankList","i","list","str","obj","Object","keys","loading","keyframes","LoadingWrapper","show","display","dance","ScrollContainer","PullUpLoading","PullDownLoading","bScroll","setBScroll","scrollContaninerRef","direction","click","refresh","bounceBottom","pullUp","pullDown","pullUpLoading","pullDownLoading","pullUpDebounce","useMemo","pullDownDebounce","scroll","BScroll","scrollX","scrollY","probeType","bounce","top","bottom","on","off","maxScrollY","useImperativeHandle","scrollTo","getBScroll","PullUpdisplayStyle","PullDowndisplayStyle","children","LoadingV2"],"mappings":"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","file":"static/js/7.c82d0285.chunk.js","sourcesContent":["import React from 'react';\r\nimport styled from 'styled-components';\r\nimport style from '../../assets/global-style';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst HeaderContainer = styled.div`\r\n  position: fixed;\r\n  padding: 5px 10px;\r\n  padding-top: 0;\r\n  height: 40px;\r\n  width: 100%;\r\n  z-index: 100;\r\n  display: flex;\r\n  line-height: 40px;\r\n  color: ${style['font-color-light']};\r\n  .back{\r\n    margin-right: 5px;\r\n    font-size: 20px;\r\n    width: 20px;\r\n  }\r\n  >h1{\r\n    font-size: ${style['font-size-l']};\r\n    font-weight: 700;\r\n  }\r\n`;\r\n// 处理函数组件拿不到ref的问题,所以用forwardRef\r\nconst Header = React.forwardRef ((props, ref) => {\r\n  const {handleClick, title, isMarquee} = props;\r\n  return (\r\n    <HeaderContainer ref={ref}>\r\n      <i className=\"iconfont back\" onClick={handleClick}>&#xe655;</i>\r\n      {// eslint-disable-next-line\r\n      isMarquee ? <marquee><h1>{title}</h1></marquee> : <h1>{title}</h1>}\r\n    </HeaderContainer>\r\n  );\r\n});\r\n\r\nHeader.defaultProps = {\r\n  handleClick: () => {},\r\n  title: '标题',\r\n  isMarquee: false,\r\n};\r\n\r\nHeader.propTypes = {\r\n  handleClick: PropTypes.func,\r\n  title: PropTypes.string,\r\n  isMarquee: PropTypes.bool,\r\n};\r\n\r\nexport default React.memo (Header);\r\n","import styled from 'styled-components';\r\nimport style from '../../assets/global-style';\r\n\r\nexport const Container = styled.div`\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  z-index: 1000;\r\n  background: #fff;\r\n  transform-origin: right bottom;\r\n  &.fly-enter, &.fly-appear{\r\n    transform: rotateZ(30deg) translate3d(100%, 0, 0);\r\n  }\r\n  &.fly-enter-active, &.fly-appear-active{\r\n    transition: transform .3s;\r\n    transform: rotateZ(0deg) translate3d(0, 0, 0);\r\n  }\r\n  &.fly-exit{\r\n    transform: rotateZ(0deg) translate3d(0, 0, 0);\r\n  }\r\n  &.fly-exit-active{\r\n    transition: transform .3s;\r\n    transform: rotateZ(30deg) translate3d(100%, 0, 0);\r\n  }\r\n`;\r\n\r\nexport const TopDesc = styled.div`\r\n  background-size: 100%;\r\n  padding: 5px 20px;\r\n  padding-bottom: 50px;\r\n  margin-bottom: 20px;\r\n  display: flex;\r\n  justify-content: space-around;\r\n  align-items: center;\r\n  box-sizing: border-box;\r\n  width: 100%;\r\n  height: 275px;\r\n  position: relative;\r\n  .background{\r\n    z-index: -1;\r\n    background: url(${props => props.background}) no-repeat;\r\n    background-position: 0 0;\r\n    background-size: 100% 100%;\r\n    position: absolute;\r\n    width: 100%;\r\n    height: 100%;\r\n    filter: blur(20px);\r\n    .filter{\r\n      position: absolute;\r\n      z-index: 10;\r\n      top: 0; left: 0;\r\n      width: 100%;\r\n      height: 100%;\r\n      background: rgba(7, 17, 27, 0.2);\r\n    }\r\n  }\r\n  .img_wrapper{\r\n    width: 120px;\r\n    height: 120px;\r\n    position: relative;         \r\n    .decorate {\r\n      position: absolute;\r\n      top: 0;\r\n      width: 100%;\r\n      height: 35px;\r\n      border-radius: 3px;\r\n      background: linear-gradient(hsla(0,0%,43%,.4),hsla(0,0%,100%,0));\r\n    }\r\n    .play_count {\r\n      position: absolute;\r\n      right: 2px;\r\n      top: 2px;\r\n      font-size: ${style['font-size-s']};\r\n      line-height: 15px;\r\n      color: ${style['font-color-light']};\r\n      .play{\r\n        vertical-align: top;\r\n      }\r\n    }\r\n    img{\r\n      width: 120px;\r\n      height: 120px;\r\n      border-radius:3px;\r\n    }\r\n  }\r\n  .desc_wrapper {\r\n    flex: 1;\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: space-around;\r\n    height: 120px;\r\n    padding: 0 10px;\r\n    .title{\r\n      max-height: 70px;\r\n      color: ${style['font-color-light']};\r\n      font-weight: 700;\r\n      line-height: 1.5;\r\n      font-size: ${style['font-size-l']};\r\n    }\r\n    .person{\r\n      display: flex;\r\n      .avatar{\r\n        width: 20px;\r\n        height: 20px;\r\n        margin-right: 5px;\r\n        img{\r\n          width: 100%;\r\n          height: 100%;\r\n          border-radius: 50%;\r\n        }\r\n      }\r\n      .name {\r\n        line-height: 20px;\r\n        font-size: ${style['font-size-m']};\r\n        color: ${style['font-color-desc-v2']};\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const Menu = styled.div`\r\n  position: relative;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  box-sizing: border-box;\r\n  padding: 0 30px 20px 30px;\r\n  margin: -100px 0 0 0;\r\n  >div {\r\n    display: flex;\r\n    flex-direction: column;\r\n    line-height: 20px;\r\n    text-align: center;\r\n    font-size: ${style['font-size-s']};\r\n    color: #3b1f1f;\r\n    color: ${style['font-color-light']};\r\n    z-index:1000;\r\n    font-weight: 500;\r\n    .iconfont {\r\n      font-size: 20px;\r\n    }\r\n  }\r\n`;\r\n\r\nexport const SongList = styled.div`\r\n  border-radius: 10px;\r\n  opacity: 0.98;\r\n  background: ${style['highlight-background-color']};\r\n  .first_line{\r\n    box-sizing: border-box;\r\n    padding: 10px 0;\r\n    margin-left: 10px;\r\n    position: relative;\r\n    justify-content: space-between;\r\n    border-bottom: 1px solid ${style['border-color']};\r\n    .play_all{\r\n      display: inline-block;\r\n      line-height: 24px;\r\n      color: ${style['font-color-desc']};\r\n      .iconfont {\r\n        font-size: 24px;\r\n        margin-right: 10px;\r\n        vertical-align: top;\r\n      }\r\n      .sum{\r\n        font-size: ${style['font-size-s']};\r\n        color: ${style['font-color-desc-v2']};\r\n      }\r\n      >span{\r\n        vertical-align: top;\r\n      }\r\n    }\r\n    .add_list,.isCollected {\r\n      display: flex;\r\n      align-items: center;\r\n      position: absolute;\r\n      right: 0; top :0px; bottom: 0;\r\n      width: 130px;\r\n      line-height: 34px;\r\n      background: ${style['theme-color']};\r\n      color: ${style['font-color-light']};\r\n      font-size: 0;\r\n      border-radius: 3px;\r\n      vertical-align: top;\r\n      .iconfont {\r\n        vertical-align: top;\r\n        font-size: 10px;\r\n        margin: 0 5px 0 10px;\r\n      }\r\n      span{\r\n        font-size: 14px;\r\n        line-height: 34px;\r\n      }\r\n    }\r\n    .isCollected{\r\n      display: flex;\r\n      background: ${style['background-color']};\r\n      color: ${style['font-color-desc']};\r\n    }\r\n}\r\n`;\r\nexport const SongItem = styled.ul`\r\n  >li{\r\n    display: flex;\r\n    height: 60px;\r\n    align-items: center;  \r\n    .index{\r\n      flex-basis: 60px;\r\n      width: 60px;\r\n      height: 60px;\r\n      line-height: 60px;\r\n      text-align: center;\r\n    }\r\n    .info{\r\n      box-sizing: border-box;\r\n      flex: 1;\r\n      display: flex;\r\n      height: 100%;\r\n      padding: 5px 0;\r\n      flex-direction: column;\r\n      justify-content: space-around;\r\n      border-bottom: 1px solid ${style['border-color']};\r\n      ${style.noWrap ()}\r\n      >span{\r\n        ${style.noWrap ()}\r\n      }\r\n      >span:first-child{\r\n        color: ${style['font-color-desc']};\r\n      }\r\n      >span:last-child{\r\n        font-size: ${style['font-size-s']};\r\n        color: #bba8a8;\r\n      }\r\n    }\r\n  }\r\n`;\r\n","import React, {useState, useCallback, useRef, useEffect} from 'react';\r\nimport {Container, TopDesc, Menu, SongList, SongItem} from './style';\r\nimport {CSSTransition} from 'react-transition-group';\r\nimport Header from './../../baseUI/header/index';\r\nimport Scroll from '../../baseUI/scroll/index';\r\nimport {getCount, isEmptyObject} from '../../api/utils';\r\nimport {getName} from './../../api/utils';\r\nimport {HEADER_HEIGHT} from './../../api/config';\r\nimport style from '../../assets/global-style';\r\nimport {connect} from 'react-redux';\r\nimport {getAlbumList, changeEnterLoading} from './store/actionCreators';\r\nimport Loading from '../../baseUI/loading/index';\r\n\r\nfunction Album (props) {\r\n  const [showStatus, setShowStatus] = useState (true);\r\n  const [title, setTitle] = useState ('歌单');\r\n  const [isMarquee, setIsMarquee] = useState (false); //是否跑马灯\r\n\r\n  const headerEl = useRef ();\r\n\r\n  const {currentAlbum: currentAlbumImmutable, enterLoading} = props;\r\n  const {getAlbumDataDispatch} = props;\r\n\r\n  const id = props.match.params.id;\r\n\r\n  useEffect (\r\n    () => {\r\n      getAlbumDataDispatch (id);\r\n    },\r\n    [getAlbumDataDispatch, id]\r\n  );\r\n\r\n  let currentAlbum = currentAlbumImmutable.toJS ();\r\n\r\n  const handleBack = useCallback (() => {\r\n    setShowStatus (false);\r\n  }, []);\r\n\r\n  const handleScroll = useCallback (\r\n    pos => {\r\n      let minScrollY = -HEADER_HEIGHT;\r\n      let percent = Math.abs (pos.y / minScrollY);\r\n      let headerDom = headerEl.current;\r\n      //滑过顶部的高度开始变化\r\n      if (pos.y < minScrollY) {\r\n        headerDom.style.backgroundColor = style['theme-color'];\r\n        headerDom.style.opacity = Math.min (1, (percent - 1) / 2);\r\n        setTitle (currentAlbum.name);\r\n        setIsMarquee (true);\r\n      } else {\r\n        headerDom.style.backgroundColor = '';\r\n        headerDom.style.opacity = 1;\r\n        setTitle ('歌单');\r\n        setIsMarquee (false);\r\n      }\r\n    },\r\n    [currentAlbum]\r\n  );\r\n\r\n  const renderTopDesc = () => {\r\n    return (\r\n      <TopDesc background={currentAlbum.coverImgUrl}>\r\n        <div className=\"background\">\r\n          <div className=\"filter\" />\r\n        </div>\r\n        <div className=\"img_wrapper\">\r\n          <div className=\"decorate\" />\r\n          <img src={currentAlbum.coverImgUrl} alt=\"\" />\r\n          <div className=\"play_count\">\r\n            <i className=\"iconfont play\">&#xe885;</i>\r\n            <span className=\"count\">\r\n              {getCount (currentAlbum.subscribedCount)}\r\n            </span>\r\n          </div>\r\n        </div>\r\n        <div className=\"desc_wrapper\">\r\n          <div className=\"title\">{currentAlbum.name}</div>\r\n          <div className=\"person\">\r\n            <div className=\"avatar\">\r\n              <img src={currentAlbum.creator.avatarUrl} alt=\"\" />\r\n            </div>\r\n            <div className=\"name\">{currentAlbum.creator.nickname}</div>\r\n          </div>\r\n        </div>\r\n      </TopDesc>\r\n    );\r\n  };\r\n\r\n  const renderMenu = () => {\r\n    return (\r\n      <Menu>\r\n        <div>\r\n          <i className=\"iconfont\">&#xe6ad;</i>\r\n          评论\r\n        </div>\r\n        <div>\r\n          <i className=\"iconfont\">&#xe86f;</i>\r\n          点赞\r\n        </div>\r\n        <div>\r\n          <i className=\"iconfont\">&#xe62d;</i>\r\n          收藏\r\n        </div>\r\n        <div>\r\n          <i className=\"iconfont\">&#xe606;</i>\r\n          更多\r\n        </div>\r\n      </Menu>\r\n    );\r\n  };\r\n\r\n  const renderSongList = () => {\r\n    return (\r\n      <SongList>\r\n        <div className=\"first_line\">\r\n          <div className=\"play_all\">\r\n            <i className=\"iconfont\">&#xe6e3;</i>\r\n            <span>\r\n              播放全部 <span className=\"sum\">(共{currentAlbum.tracks.length}首)</span>\r\n            </span>\r\n          </div>\r\n          <div className=\"add_list\">\r\n            <i className=\"iconfont\">&#xe62d;</i>\r\n            <span>收藏({getCount (currentAlbum.subscribedCount)})</span>\r\n          </div>\r\n        </div>\r\n        <SongItem>\r\n          {currentAlbum.tracks.map ((item, index) => {\r\n            return (\r\n              <li key={index}>\r\n                <span className=\"index\">{index + 1}</span>\r\n                <div className=\"info\">\r\n                  <span>{item.name}</span>\r\n                  <span>\r\n                    {getName (item.ar)} - {item.al.name}\r\n                  </span>\r\n                </div>\r\n              </li>\r\n            );\r\n          })}\r\n        </SongItem>\r\n      </SongList>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <CSSTransition\r\n      in={showStatus}\r\n      timeout={300}\r\n      classNames=\"fly\"\r\n      appear={true}\r\n      unmountOnExit\r\n      onExited={props.history.goBack}\r\n    >\r\n      <Container>\r\n        <Header\r\n          ref={headerEl}\r\n          title={title}\r\n          handleClick={handleBack}\r\n          isMarquee={isMarquee}\r\n        />\r\n        {!isEmptyObject (currentAlbum)\r\n          ? <Scroll bounceTop={false} onScroll={handleScroll}>\r\n              <div>\r\n                {renderTopDesc ()}\r\n                {renderMenu ()}\r\n                {renderSongList ()}\r\n              </div>\r\n            </Scroll>\r\n          : null}\r\n        {enterLoading ? <Loading /> : null}\r\n      </Container>\r\n    </CSSTransition>\r\n  );\r\n}\r\n\r\n// 映射Redux全局的state到组件的props上\r\nconst mapStateToProps = state => ({\r\n  currentAlbum: state.getIn (['album', 'currentAlbum']),\r\n  enterLoading: state.getIn (['album', 'enterLoading']),\r\n});\r\n// 映射dispatch到props上\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    getAlbumDataDispatch (id) {\r\n      dispatch (changeEnterLoading (true));\r\n      dispatch (getAlbumList (id));\r\n    },\r\n  };\r\n};\r\n\r\n// 将ui组件包装成容器组件\r\nexport default connect (mapStateToProps, mapDispatchToProps) (\r\n  React.memo (Album)\r\n);\r\n","import {RankTypes} from './config';\r\n\r\nexport const getCount = count => {\r\n  if (count < 0) return;\r\n  if (count < 10000) {\r\n    return count;\r\n  } else if (Math.floor (count / 10000) < 10000) {\r\n    return Math.floor (count / 1000) / 10 + '万';\r\n  } else {\r\n    return Math.floor (count / 10000000) / 10 + '亿';\r\n  }\r\n};\r\n\r\nexport const debounce = (func, delay) => {\r\n  let timer;\r\n  return function (...args) {\r\n    if (timer) {\r\n      clearTimeout (timer);\r\n    }\r\n    timer = setTimeout (() => {\r\n      func.apply (this, args);\r\n      clearTimeout (timer);\r\n    }, delay);\r\n  };\r\n};\r\n\r\n// 处理数据，找出第一个没有歌名的排行榜的索引\r\nexport const filterIndex = rankList => {\r\n  for (let i = 0; i < rankList.length - 1; i++) {\r\n    if (rankList[i].tracks.length && !rankList[i + 1].tracks.length) {\r\n      return i + 1;\r\n    }\r\n  }\r\n};\r\n\r\n//找出排行榜的编号\r\nexport const filterIdx = name => {\r\n  for (var key in RankTypes) {\r\n    if (RankTypes[key] === name) return key;\r\n  }\r\n  return null;\r\n};\r\n\r\n// 处理歌手列表拼接歌手名字\r\nexport const getName = list => {\r\n  let str = '';\r\n  list.map ((item, index) => {\r\n    str += index === 0 ? item.name : '/' + item.name;\r\n    return item;\r\n  });\r\n  return str;\r\n};\r\n\r\n//判断一个对象是否为空\r\nexport const isEmptyObject = obj => !obj || Object.keys (obj).length === 0;\r\n","import React from 'react';\r\nimport styled, {keyframes} from 'styled-components';\r\nimport style from '../../assets/global-style';\r\nimport {PropTypes} from 'prop-types';\r\n\r\nconst loading = keyframes`\r\n  0%, 100% {\r\n    transform: scale(0.0);\r\n  }\r\n  50% {\r\n    transform: scale(1.0);\r\n  }\r\n`;\r\nconst LoadingWrapper = styled.div`\r\n  >div {\r\n    position: absolute;\r\n    left: 0; \r\n    right: 0;  \r\n    top: 0;\r\n    bottom: 0;\r\n    margin: auto;\r\n    width: 60px;\r\n    height: 60px;\r\n    opacity: 0.6;\r\n    border-radius: 50%;\r\n    background-color: ${style['theme-color']};\r\n    animation: ${loading} 1.4s infinite ease-in;\r\n  }\r\n  >div:nth-child(2) {\r\n    animation-delay: -0.7s;\r\n  }\r\n`;\r\n\r\nfunction Loading (props) {\r\n  const {show} = props;\r\n  return (\r\n    <LoadingWrapper style={show ? {display: ''} : {display: 'none'}}>\r\n      <div />\r\n      <div />\r\n    </LoadingWrapper>\r\n  );\r\n}\r\n\r\nLoading.defaultProps = {\r\n  show: true,\r\n};\r\n\r\nLoading.propTypes = {\r\n  show: PropTypes.bool,\r\n};\r\n\r\nexport default React.memo (Loading);\r\n","import React from 'react';\r\nimport styled, {keyframes} from 'styled-components';\r\nimport style from '../../assets/global-style';\r\n\r\nconst dance = keyframes`\r\n    0%, 40%, 100%{\r\n      transform: scaleY(0.4);\r\n      transform-origin: center 100%;\r\n    }\r\n    20%{\r\n      transform: scaleY(1);\r\n    }\r\n`;\r\nconst Loading = styled.div`\r\n    height: 10px;\r\n    width: 100%;\r\n    margin: auto;\r\n    text-align: center;\r\n    font-size: 10px;\r\n    >div{\r\n      display: inline-block;\r\n      background-color: ${style['theme-color']};\r\n      height: 100%;\r\n      width: 1px;\r\n      margin-right:2px;\r\n      animation: ${dance} 1s infinite;\r\n    }\r\n    >div:nth-child(2) {\r\n      animation-delay: -0.4s;\r\n    }\r\n    >div:nth-child(3) {\r\n      animation-delay: -0.6s;\r\n    }\r\n    >div:nth-child(4) {\r\n      animation-delay: -0.5s;\r\n    }\r\n    >div:nth-child(5) {\r\n      animation-delay: -0.2s;\r\n    } \r\n`;\r\n\r\nfunction LoadingV2 () {\r\n  return (\r\n    <Loading>\r\n      <div />\r\n      <div />\r\n      <div />\r\n      <div />\r\n      <div />\r\n      <span>拼命加载中...</span>\r\n    </Loading>\r\n  );\r\n}\r\n\r\nexport default React.memo (LoadingV2);\r\n","import React, {\r\n  forwardRef,\r\n  useState,\r\n  useEffect,\r\n  useRef,\r\n  useImperativeHandle,\r\n  useMemo,\r\n} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport BScroll from 'better-scroll';\r\nimport styled from 'styled-components';\r\nimport Loading from '../loading';\r\nimport {debounce} from '../../api/utils';\r\nimport LoadingV2 from '../loading-v2';\r\n\r\nconst ScrollContainer = styled.div`\r\n  width: 100%;\r\n  height: 100%;\r\n  overflow: hidden;\r\n`;\r\n\r\nconst PullUpLoading = styled.div`\r\n  position: absolute;\r\n  left:0; right:0;\r\n  bottom: 5px;\r\n  width: 60px;\r\n  height: 60px;\r\n  margin: auto;\r\n  z-index: 100;\r\n`;\r\n\r\nexport const PullDownLoading = styled.div`\r\n  position: absolute;\r\n  left:0; right:0;\r\n  top: 0px;\r\n  height: 30px;\r\n  margin: auto;\r\n  z-index: 100;\r\n`;\r\n\r\nconst Scroll = forwardRef ((props, ref) => {\r\n  const [bScroll, setBScroll] = useState ();\r\n\r\n  const scrollContaninerRef = useRef ();\r\n\r\n  const {direction, click, refresh, bounceTop, bounceBottom} = props;\r\n\r\n  const {pullUp, pullDown, onScroll, pullUpLoading, pullDownLoading} = props;\r\n\r\n  let pullUpDebounce = useMemo (\r\n    () => {\r\n      return debounce (pullUp, 300);\r\n    },\r\n    [pullUp]\r\n  );\r\n\r\n  let pullDownDebounce = useMemo (\r\n    () => {\r\n      return debounce (pullDown, 300);\r\n    },\r\n    [pullDown]\r\n  );\r\n\r\n  useEffect (() => {\r\n    const scroll = new BScroll (scrollContaninerRef.current, {\r\n      scrollX: direction === 'horizental',\r\n      scrollY: direction === 'vertical',\r\n      probeType: 3,\r\n      click: click,\r\n      bounce: {\r\n        top: bounceTop,\r\n        bottom: bounceBottom,\r\n      },\r\n    });\r\n    setBScroll (scroll);\r\n    return () => {\r\n      setBScroll (null);\r\n    };\r\n    // eslint-disable-next-line\r\n  }, []);\r\n\r\n  useEffect (\r\n    () => {\r\n      if (!bScroll || !onScroll) return;\r\n      bScroll.on ('scroll', scroll => {\r\n        onScroll (scroll);\r\n      });\r\n      return () => {\r\n        bScroll.off ('scroll');\r\n      };\r\n    },\r\n    [onScroll, bScroll]\r\n  );\r\n\r\n  useEffect (\r\n    () => {\r\n      if (!bScroll || !pullUp) return;\r\n      bScroll.on ('scrollEnd', () => {\r\n        //判断是否滑动到了底部\r\n        if (bScroll.y <= bScroll.maxScrollY + 100) {\r\n          pullUpDebounce ();\r\n        }\r\n      });\r\n      return () => {\r\n        bScroll.off ('scrollEnd');\r\n      };\r\n    },\r\n    [pullUpDebounce, pullUp, bScroll]\r\n  );\r\n\r\n  useEffect (\r\n    () => {\r\n      if (!bScroll || !pullDown) return;\r\n      bScroll.on ('touchEnd', pos => {\r\n        //判断用户的下拉动作\r\n        if (pos.y > 50) {\r\n          pullDownDebounce ();\r\n        }\r\n      });\r\n      return () => {\r\n        bScroll.off ('touchEnd');\r\n      };\r\n    },\r\n    [pullDownDebounce, pullDown, bScroll]\r\n  );\r\n\r\n  useEffect (() => {\r\n    if (refresh && bScroll) {\r\n      bScroll.refresh ();\r\n    }\r\n  });\r\n\r\n  useImperativeHandle (ref, () => ({\r\n    refresh () {\r\n      if (bScroll) {\r\n        bScroll.refresh ();\r\n        bScroll.scrollTo (0, 0);\r\n      }\r\n    },\r\n    getBScroll () {\r\n      if (bScroll) {\r\n        return bScroll;\r\n      }\r\n    },\r\n  }));\r\n\r\n  const PullUpdisplayStyle = pullUpLoading ? {display: ''} : {display: 'none'};\r\n  const PullDowndisplayStyle = pullDownLoading ? {display: ''} : {display: 'none'};\r\n  return (\r\n    <ScrollContainer ref={scrollContaninerRef}>\r\n      {props.children}\r\n      {/* 滑到底部加载动画 */}\r\n      <PullUpLoading style={PullUpdisplayStyle}><Loading /></PullUpLoading>\r\n      {/* 顶部下拉刷新动画 */}\r\n      <PullDownLoading style={PullDowndisplayStyle}>\r\n        <LoadingV2 />\r\n      </PullDownLoading>\r\n    </ScrollContainer>\r\n  );\r\n});\r\n\r\nScroll.defaultProps = {\r\n  direction: 'vertical',\r\n  click: true,\r\n  refresh: true,\r\n  onScroll: null,\r\n  pullUpLoading: false,\r\n  pullDownLoading: false,\r\n  pullUp: null,\r\n  pullDown: null,\r\n  bounceTop: true,\r\n  bounceBottom: true,\r\n};\r\n\r\nScroll.propTypes = {\r\n  direction: PropTypes.oneOf (['vertical', 'horizental']),\r\n  refresh: PropTypes.bool,\r\n  onScroll: PropTypes.func,\r\n  pullUp: PropTypes.func,\r\n  pullDown: PropTypes.func,\r\n  pullUpLoading: PropTypes.bool,\r\n  pullDownLoading: PropTypes.bool,\r\n  bounceTop: PropTypes.bool, //是否支持向上吸顶\r\n  bounceBottom: PropTypes.bool, //是否支持向上吸顶\r\n};\r\n\r\nexport default Scroll;\r\n"],"sourceRoot":""}